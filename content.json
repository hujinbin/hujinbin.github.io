{"pages":[{"title":"","text":"site-verification: dd72084801cc52aac876bc9d7adb7c9c","link":"/dd72084801cc52aac876bc9d7adb7c9c.html"},{"title":"","text":"ä¸ªäººç®€ä»‹è”ç³»æ–¹å¼æ‰‹æœºå·: 171-**-2662Email: 437044048@qq.comWeChat: hjb94110QQäº¤æµç¾¤ï¼š749076211 ä¸ªäººä¿¡æ¯èƒ¡é‡‘æ–Œ/ç”·/1994èŒä½: å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆåœ°ç‚¹: æ­å·2015å¹´6æœˆä»½å¼€å§‹ä»äº‹å‰ç«¯å·¥ä½œã€‚ å‰ç«¯çˆ±å¥½è€… åšå®¢ä¿¡æ¯ ç½‘ç«™é‡‡ç”¨çš„Icarusä¸»é¢˜ è¿½æ±‚å°½å¯èƒ½çš„ç®€æ´ï¼Œæ¸…æ™°ï¼Œæ˜“ç”¨ã€‚ åœ¨Icarusä¸»é¢˜ä¹‹ä¸Šè¿›è¡Œäº†éƒ¨åˆ†ä¿®æ”¹ã€‚ æœ¬ç«™æ¨èç´¢å¼• åšå®¢ä¸»é¢˜ç›¸å…³ github Issue ä½œä¸ºåšå®¢å¾®å‹æ•°æ®åº“çš„åº”ç”¨ github pageç½‘ç«™cdnä¼˜åŒ–åŠ é€Ÿ åšå®¢æºç åˆ†äº« åšå®¢æ¢è‚¤çš„ä¸€ç§å®ç°æ–¹å¼æ€è·¯ åšå®¢ä¸­gitalkæœ€æ–°è¯„è®ºçš„è·å– åšå®¢å›¾ç‰‡ä¸Šä¼ picgoå·¥å…·githubå›¾ä¼ ä½¿ç”¨ å®‰è£…ã€éƒ¨åˆ†é…ç½®icarusä¸»é¢˜ä¸­æ–‡ç‰ˆ","link":"/about/index.html"},{"title":"","text":"ğŸˆğŸˆå¾®ç¬‘å¢™ğŸˆğŸˆ å½­å°è‹’ å”è‰ºæ˜• æä¸€æ¡ gakki å›¾ç‰‡æœé›†äºäº’è”ç½‘ï¼Œä¾µæƒè¯·ç•™è¨€ï¼Œé©¬ä¸Šå¤„ç†ğŸ˜Šã€‚","link":"/album/index.html"},{"title":"éŸ³ä¹æ­Œå•æ”¶è—","text":"æ¸©é¦¨æç¤ºï¼šé€‰æ‹©å–œæ¬¢çš„éŸ³ä¹åŒå‡»æ’­æ”¾ï¼Œç”±äºç‰ˆæƒåŸå› éƒ¨åˆ†ä¸èƒ½æ’­æ”¾ã€‚å¦‚æœå–œæ¬¢æ­Œå•æ”¶è—ä¸€ä¸‹ï¼Œå»ç½‘æ˜“äº‘éƒ½èƒ½æ’­æ”¾å“Ÿï¼","link":"/music/index.html"},{"title":"","text":"ç”³è¯·å‹é“¾é¡»çŸ¥ åŸåˆ™ä¸Šåªå’ŒæŠ€æœ¯ç±»åšå®¢äº¤æ¢ï¼Œä½†ä¸åŒ…æ‹¬å«æœ‰å’Œè‰²æƒ…ã€æš´åŠ›ã€æ”¿æ²»æ•æ„Ÿçš„ç½‘ç«™ã€‚ ä¸å’Œå‰½çªƒã€ä¾µæƒã€æ— è¯šä¿¡çš„ç½‘ç«™äº¤æ¢ï¼Œä¼˜å…ˆå’Œå…·æœ‰åŸåˆ›ä½œå“çš„ç½‘ç«™äº¤æ¢ã€‚ ç”³è¯·è¯·æä¾›ï¼šç«™ç‚¹åç§°ã€ç«™ç‚¹é“¾æ¥ã€ç«™ç‚¹æè¿°ã€logoæˆ–å¤´åƒï¼ˆä¸è¦è®¾ç½®é˜²ç›—é“¾ï¼‰ã€‚ æ’åä¸åˆ†å…ˆåï¼Œåˆ·æ–°åé‡æ’ï¼Œæ›´æ–°ä¿¡æ¯åè¯·ç•™è¨€å‘ŠçŸ¥ã€‚ ä¼šå®šæœŸæ¸…ç†å¾ˆä¹…å¾ˆä¹…ä¸æ›´æ–°çš„ã€ä¸ç¬¦åˆè¦æ±‚çš„å‹é“¾ï¼Œä¸å†å¦è¡Œé€šçŸ¥ã€‚ æœ¬ç«™ä¸å­˜å‚¨å‹é“¾å›¾ç‰‡ï¼Œå¦‚æœå‹é“¾å›¾ç‰‡æ¢äº†æ— æ³•æ›´æ–°ã€‚å›¾ç‰‡è£‚äº†çš„ä¼šæ›¿æ¢æˆé»˜è®¤å›¾ï¼Œéœ€è¦æ›´æ¢çš„è¯·ç•™è¨€å‘ŠçŸ¥ã€‚ æœ¬ç«™å‹é“¾ä¿¡æ¯å¦‚ä¸‹ï¼Œç”³è¯·å‹é“¾å‰è¯·å…ˆæ·»åŠ æœ¬ç«™ä¿¡æ¯ï¼š ç½‘ç«™å›¾æ ‡ï¼šhttp://cdn.leheavengame.com/jue/images/89090210-71cf-11eb-98c3-375c38d4a5d6.jpeg ç½‘ç«™åç§°ï¼šèƒ¡é‡‘æ–Œçš„ä¸ªäººç½‘ç«™ ç½‘ç«™åœ°å€ï¼šhttps://hjb.leheavengame.com/ ç½‘ç«™ç®€ä»‹ï¼šå‰ç«¯å¼€å‘ï¼ŒæŠ€æœ¯äº¤æµ åŠ è½½ä¸­ï¼Œç¨ç­‰å‡ ç§’...","link":"/friend/index.html"},{"title":"","text":"&nbsp;&nbsp;å¬å¬éŸ³ä¹ éŸ³ä¹æ’­æ”¾å™¨ç”±mePlayeræä¾›ï¼Œå¸ƒå±€å‚ç…§ç½‘å‹åšå®¢æ‰€ä½œï¼Œæ„Ÿè°¢ä½œè€…çš„è¾›å‹¤ä»˜å‡ºã€‚æ›´å¤šéŸ³ä¹åˆ†äº«è¯·æŸ¥çœ‹æ­Œå•ã€‚ &nbsp;&nbsp;çœ‹çœ‹è§†é¢‘ ->ç‚¹å‡»ä»¥ä¸‹æ¡ç›®å¼€å§‹æ’­æ”¾è§†é¢‘,å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š","link":"/media/index.html"},{"title":"","text":"æ¥è€Œä¸å¾€éç¤¼ä¹Ÿç•…æ‰€æ¬²è¨€ï¼Œæœ‰ç•™å¿…åº”","link":"/message/index.html"},{"title":"","text":"ç¢ç¢å¿µ tipsï¼šgithubç™»å½•åæŒ‰æ—¶é—´æ­£åºæŸ¥çœ‹ã€Œ+99æ¬¡æŸ¥çœ‹ã€ ç¢ç¢å¿µåŠ è½½ä¸­ï¼Œè¯·ç¨ç­‰... $.getScript(\"/js/gitalk_self.min.js\", function () { var gitalk = new Gitalk({ clientID: '80d9615d7f9ac170422a', clientSecret: '96a3ef8319106445349a5c16e716dcf5caa0e887', id: '666666', repo: 'myBlog', owner: 'hujinbin', admin: \"hujinbin\", createIssueManually: true, distractionFreeMode: false }); gitalk.render('comment-container1'); });","link":"/self-talking/index.html"}],"posts":[{"title":"HTMLçš„ä¸¤ç±»æ ‡ç­¾ï¼šè¡Œæ ‡ç­¾å’Œå—æ ‡ç­¾","text":"è¡Œæ ‡ç­¾ï¼šåŒ…å«aã€spanã€emã€strongã€imgã€varï¼›a æ ‡ç­¾ï¼šä¸»è¦ç”¨æ¥é“¾æ¥ä¸€ä¸ªå…¶ä»–çš„ç½‘é¡µï¼› span æ ‡ç­¾ï¼šä¸»è¦ç”¨æ¥å¯¹è¡Œå†…çš„æ–‡å­—è¿›è¡Œä¸€äº›æ ·å¼ä»¥åŠå…¶ä»–çš„æ“ä½œï¼› em æ ‡ç­¾ï¼šä¸€èˆ¬ç”¨æ¥å¯¹æ–‡å­—è¿›è¡Œå¼ºè°ƒï¼Œä½¿ç”¨æ–œä½“ä½“ç°å‡ºæ¥ï¼› strong æ ‡ç­¾ï¼šä¸€èˆ¬ç”¨æ¥å¯¹æ–‡å­—è¿›è¡Œå¼ºè°ƒï¼Œä½¿ç”¨åŠ ç²—å­—ä½“ä½“ç°å‡ºæ¥ï¼› img æ ‡ç­¾ï¼šå›¾ç‰‡å¼•ç”¨æ ‡ç­¾ï¼Œå…¶ä¸­ srcå±æ€§ä¸­å†™å…¥å›¾ç‰‡çš„åœ°å€ï¼› var æ ‡ç­¾ï¼šJavaScriptä¸­å‘½åå˜é‡çš„æ ‡ç­¾ã€‚ å—æ ‡ç­¾ï¼šåŒ…å«pã€divã€ulã€olã€liã€dlã€dtã€ddã€h1~h6ï¼›p æ ‡ç­¾ï¼šæ®µè½æ ‡ç­¾ï¼Œæ®µè½æ–‡å­—ä½¿ç”¨ï¼Œé»˜è®¤æ ¼å¼ï¼šæ®µå°¾è¿›è¡Œæ¢è¡Œï¼› div æ ‡ç­¾ï¼šåˆ’åˆ†å—çš„ä¸»è¦ä½¿ç”¨æ ‡ç­¾ï¼› ul æ ‡ç­¾ï¼šæ— åºåˆ—è¡¨çš„ä¸»æ ‡ç­¾ï¼Œåé¢çš„æ ‡å·ä¸ºåœ†ç‚¹ï¼ˆé»‘è‰²ï¼‰ï¼› ol æ ‡ç­¾ï¼šæœ‰åºåˆ—è¡¨çš„ä¸»æ ‡ç­¾ï¼Œåé¢ä¸€èˆ¬è·Ÿæœ‰åºçš„1,2,3,4,5â€¦ï¼› li æ ‡ç­¾ï¼šåˆ—è¡¨ä¸­çš„ä¸»ä½“ä½¿ç”¨æ ‡ç­¾ dl æ ‡ç­¾ï¼šè‡ªå®šä¹‰æ ‡ç­¾çš„ä¸»æ ‡ç­¾ï¼› dt æ ‡ç­¾ï¼šè‡ªå®šä¹‰æ ‡ç­¾çš„è¡¨å¤´ï¼› dd æ ‡ç­¾ï¼šè‡ªå®šä¹‰æ ‡ç­¾çš„è¡¨å¤´çš„è§£é‡Šï¼ˆæè¿°ï¼‰ä¿¡æ¯ï¼› h1~h6ï¼š6çº§æ ‡é¢˜æ ‡ç­¾ã€å­—ä½“çš„å¤§å°ä¾æ¬¡å˜å°ã€‚ å—æ ‡ç­¾å’Œè¡Œæ ‡ç­¾çš„åŒºåˆ«ï¼šâ—† å—æ ‡ç­¾ï¼šç‹¬è‡ªå é¢†ä¸€è¡Œã€å¯ä»¥è¿›è¡Œå®½é«˜çš„æ•°å€¼çš„è®¾å®šï¼› â—† è¡Œæ ‡ç­¾ï¼šåœ¨ä¸€è¡Œå†…æ˜¾ç¤ºã€ä¸å¯ä»¥è¿›è¡Œå®½é«˜çš„æ•°å€¼è®¾å®šï¼Œè®¾ç½®äº†æ ‡ç­¾çš„è¡Œé«˜ï¼ˆline-heightï¼‰å¯ä»¥æ”¹å˜æ ‡ç­¾çš„é«˜åº¦ï¼› åµŒå¥—è§„åˆ™â—† å—æ ‡ç­¾å¯ä»¥å¥—è¡Œæ ‡ç­¾ï¼Œè¡Œæ ‡ç­¾ä¸å¯ä»¥å¥—å—æ ‡ç­¾ã€‚ â—† pæ ‡ç­¾ä¸è¦å¥—å—å±æ€§æ ‡ç­¾ï¼Œå¯ä»¥å¥—aï¼Œspanï¼Œæ–‡æœ¬ã€‚ â—† åµŒå¥—çš„æ—¶å€™æ³¨æ„ä»£ç çš„ç¼©è¿›ã€‚ æ³¨ï¼šå¿…è¦çš„æ—¶å€™ è¡Œå†…æ ‡ç­¾å’Œå—æ ‡ç­¾æ˜¯å¯ä»¥ç›¸äº’è½¬æ¢çš„ï¼ˆé€šè¿‡displayå±æ€§ï¼‰ã€‚","link":"/2018/05/03/HTML%E7%9A%84%E4%B8%A4%E7%B1%BB%E6%A0%87%E7%AD%BE%EF%BC%9A%E8%A1%8C%E6%A0%87%E7%AD%BE%E5%92%8C%E5%9D%97%E6%A0%87%E7%AD%BE/"},{"title":"Gitæäº¤è§„èŒƒä¿æŠ¤","text":"Git è§„èŒƒGit ä½œä¸ºç°åœ¨æœ€æµè¡Œçš„åˆ†å¸ƒå¼ç®¡ç†å·¥å…·ï¼ŒåŸºæœ¬ä¸Šæ˜¯æ¯ä¸ªå›¢é˜Ÿçš„å¿…å¤‡ã€‚ Git Commitæ ¼å¼æ ¡éªŒ å‡†å¤‡commitlint/cliç”¨äºæ ¼å¼æ ¡éªŒ å‡†å¤‡huskyç”¨äºgitæäº¤ä»£ç æ—¶è§¦å‘æ ¡éªŒ huskyhusky æ˜¯åˆ›å»º git å®¢æˆ·ç«¯ hooks çš„ç¥å™¨ã€‚ ç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯ 7.*ï¼Œæ–‡æ¡£åœ¨è¿™é‡Œ(opens new window) åˆå§‹åŒ– husky åªéœ€è¦ä¸‰æ­¥ã€‚é¦–å…ˆè¦å®‰è£…ï¼š 1$ npm i husky --save-dev æ‰§è¡Œä¸‹é¢çš„è„šæœ¬ï¼Œä¼šåˆå§‹åŒ–ä¸€ä¸ª .husky ç›®å½•ï¼š 1$ npx husky install åˆå§‹åŒ–åï¼Œå°±å¯ä»¥æ·»åŠ  hook äº†ã€‚ æ·»åŠ ä¸€ä¸ª commit-msg é’©å­ï¼Œå¹¶æŒ‡å®šä¸€ä¸ªé»˜è®¤ shellï¼š 1$ npx husky add .husky/commit-msg 'npx --no-install commitlint --edit &quot;$1&quot;' ç°åœ¨åœ¨æ‰§è¡Œ git commit ä¹‹å‰ï¼Œå°±ä¼šæ‰§è¡Œä¸Šé¢æŒ‡å®šçš„ shellã€‚ commitlintä¸Šé¢çš„ shell é‡Œæœ‰ä¸€ä¸ª commitlint å‘½ä»¤ï¼Œå…¶å®å®ƒæ˜¯å¦ä¸€ä¸ªå·¥å…·ï¼Œç”¨æ¥æ ¡éªŒ commit æäº¤ä¿¡æ¯ï¼Œè¿™æ˜¯ husky + commitlint è¿™å¯¹é»„é‡‘æ­æ¡£çš„ä¸»è¦åŠŸèƒ½ã€‚ commitlint çš„æ–‡æ¡£åœ¨è¿™é‡Œ(opens new window) ä¸ºäº†ç›´è§‚çš„çœ‹å‡º commit çš„æ›´æ–°å†…å®¹ï¼Œå¼€å‘è€…ç¤¾åŒºè¯ç”Ÿäº†ä¸€ç§è§„èŒƒï¼Œå°† commit æŒ‰ç…§åŠŸèƒ½åˆ’åˆ†ï¼ŒåŠ ä¸€äº›å›ºå®šå‰ç¼€ï¼Œæ¯”å¦‚ fix:ï¼Œfeat:ï¼Œç”¨æ¥æ ‡è®°è¿™ä¸ª commit ä¸»è¦åšäº†ä»€ä¹ˆäº‹æƒ…ã€‚ commitlint å‘½ä»¤å°±æ˜¯æ ¡éªŒ commit ä¿¡æ¯æ˜¯å¦ç¬¦åˆä¸Šè¿°è§„èŒƒï¼Œä¸ç¬¦åˆï¼Œåˆ™ä¼šé…åˆ husky é˜»æ­¢æäº¤ã€‚ é¦–å…ˆå®‰è£… commitlintï¼š 1$ npm i @commitlint/{config-conventional,cli} --save-dev ç„¶ååˆ›å»ºé…ç½®æ–‡ä»¶ï¼š 1echo &quot;module.exports = {extends: ['@commitlint/config-conventional']}&quot; &gt; commitlint.config.js è¿™æ ·å°±å¥½äº†ï¼Œç„¶åæˆ‘ä»¬éšä¾¿æ”¹ä¸€å¤„ä»£ç ï¼Œè¯•è¯•æ•ˆæœï¼š 12$ git add .$ git commit -m 'test' å› ä¸º â€œtestâ€ ä¸ç¬¦åˆ commit è§„èŒƒï¼Œæ‰€ä»¥è¢«é˜»æ­¢äº†ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š æˆ‘ä»¬å†è¯•ä¸€ä¸‹ç¬¦åˆè§„èŒƒçš„æäº¤æ ¼å¼ï¼š 1$ git commit -m 'fix: ä¿®å¤**åŠŸèƒ½' è¿™æ ·å°±å¯ä»¥é€šè¿‡äº†ï¼ commitå‰ç¼€ç›®å‰ä¸»æµçš„å‰ç¼€åŒ…æ‹¬ä»¥ä¸‹éƒ¨åˆ†ï¼š buildï¼šè¡¨ç¤ºæ„å»ºï¼Œå‘å¸ƒç‰ˆæœ¬å¯ç”¨è¿™ä¸ª ciï¼šæ›´æ–° CI/CD ç­‰è‡ªåŠ¨åŒ–é…ç½® choreï¼šæ‚é¡¹ï¼Œå…¶ä»–æ›´æ”¹ docsï¼šæ›´æ–°æ–‡æ¡£ featï¼šå¸¸ç”¨ï¼Œè¡¨ç¤ºæ–°å¢åŠŸèƒ½ fixï¼šå¸¸ç”¨ï¼šè¡¨ç¤ºä¿®å¤ bug perfï¼šæ€§èƒ½ä¼˜åŒ– refactorï¼šé‡æ„ revertï¼šä»£ç å›æ»š styleï¼šæ ·å¼æ›´æ”¹ testï¼šå•å…ƒæµ‹è¯•æ›´æ”¹","link":"/2021/11/24/Git%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83%E4%BF%9D%E6%8A%A4/"},{"title":"JavaScriptçš„æ•°ç»„æ’åº","text":"1. JavaScriptçš„sort()æ–¹æ³•123456var array = [1,4,-8,-3,6,12,9,8];function compare(val1,val2){ return val1-val2;};array.sort(compare);document.write(array); sort()æ–¹æ³•æŒ‰ç…§å‡åºæ’åˆ—æ•°ç»„é¡¹ï¼Œä¼šè°ƒç”¨æ¯ä¸ªæ•°ç»„é¡¹çš„toString()è½¬å‹æ–¹æ³•ï¼Œç„¶åæ¯”è¾ƒå¾—åˆ°çš„å­—ç¬¦ä¸²ã€‚ toString()æ–¹æ³•æ˜¯æŠŠå¸ƒå°”å€¼ï¼ˆBooleanï¼‰æˆ–å¯¹è±¡(Object)è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç»“æœã€‚ compare()å‡½æ•°æ–¹æ³•æ˜¯ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ï¼Œä½œä¸ºsort()æ–¹æ³•çš„å‚æ•°ã€‚ 2. å†’æ³¡æ’åºï¼ˆä»åå‘å‰ï¼‰123456789101112131415var array = [1,4,-8,-3,6,12,9,8];function sort(arr){ for(var j=0;j&lt;arr.length-1;j++){ //ä¸¤ä¸¤æ¯”è¾ƒï¼Œå¦‚æœå‰ä¸€ä¸ªæ¯”åä¸€ä¸ªå¤§ï¼Œåˆ™äº¤æ¢ä½ç½®ã€‚ for(var i=0;i&lt;arr.length-1-j;i++){ if(arr[i]&gt;arr[i+1]){ var temp = arr[i]; arr[i] = arr[i+1]; arr[i+1] = temp; } } }}sort(array);document.write(array); ï¼ˆ1ï¼‰æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªä½ç½®ã€‚ï¼ˆ2ï¼‰å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚åœ¨è¿™ä¸€ç‚¹ï¼Œæœ€åçš„å…ƒç´ åº”è¯¥ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚ï¼ˆ3ï¼‰é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚ï¼ˆ4ï¼‰æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚ 3. å¿«é€Ÿæ’åºï¼šé€’å½’æ€æƒ³ï¼Œä¸¤è¾¹å¿«é€Ÿçš„æ’åºï¼Œå†’æ³¡æ’åºçš„æ”¹è¿›123456789101112131415161718192021222324var array = [1,4,-8,-3,6,12,9,8];function quickSort(arr){//å¦‚æœæ•°ç»„é•¿åº¦å°äºç­‰äº1ï¼Œåˆ™è¿”å›æ•°ç»„æœ¬èº« if(arr.length&lt;=1){ return arr; } //å®šä¹‰ä¸­é—´å€¼çš„ç´¢å¼• var index = Math.floor(arr.length/2); //å–åˆ°ä¸­é—´å€¼ var temp = arr.splice(index,1); //å®šä¹‰å·¦å³éƒ¨åˆ†æ•°ç»„ var left = []; var right = []; for(var i=0;i&lt;arr.length;i++){ //å¦‚æœå…ƒç´ æ¯”ä¸­é—´å€¼å°ï¼Œé‚£ä¹ˆæ”¾åœ¨å·¦è¾¹ï¼Œå¦åˆ™æ”¾å³è¾¹ if(arr[i]&lt;temp){ left.push(arr[i]); }else{ right.push(arr[i]); } } return quickSort(left).concat(temp,quickSort(right));}document.write(quickSort(array)); Math.floor(x)æ–¹æ³•æ˜¯å‘ä¸‹å–æ•´ï¼Œè¿”å›å°äºæˆ–ç­‰äºxçš„æœ€æ¥è¿‘çš„æ•´æ•°ã€‚ splice(index,num,item)æ–¹æ³•æ˜¯å‘æ•°ç»„ä¸­æ·»åŠ é¡¹ç›®ï¼Œæˆ–æ˜¯ä»æ•°ç»„ä¸­åˆ é™¤é¡¹ç›®ï¼Œå¹¶è¿”å›è¢«åˆ é™¤çš„é¡¹ç›®ã€‚ indexæ˜¯æ•´æ•°ï¼Œè¢«æ“ä½œé¡¹ç›®æ‰€åœ¨çš„ä½ç½®ï¼ˆå¿…é¡»ï¼‰numæ˜¯æ•´æ•°ï¼Œè¦åˆ é™¤çš„é¡¹ç›®çš„æ•°é‡ï¼Œå¦‚æœä¸º0ï¼Œè¡¨ç¤ºä¸åˆ é™¤ï¼ˆå¿…é¡»ï¼‰itemæ˜¯å‘æ•°ç»„ä¸­æ·»åŠ çš„æ–°é¡¹ç›®ï¼Œå¯ä»¥æ˜¯å¤šä¸ªï¼ˆå¯é€‰ï¼‰push()æ–¹æ³•æ˜¯å‘æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæ–°é¡¹ç›®å¹¶è¿”å›æ–°æ•°ç»„çš„é•¿åº¦ concat()æ–¹æ³•è¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ï¼Œä¸ä¼šæ”¹å˜åŸæœ‰æ•°ç»„ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ 4. æ’å…¥æ’åº12345678910111213141516171819202122var array = [1,4,-8,-3,6,12,9,8];function insertSort(arr){//å‡è®¾ç¬¬0å…ƒç´ æ˜¯æœ‰åºåºåˆ—ï¼Œç¬¬1å…ƒç´ ä¹‹åæ˜¯æ— åºçš„åºåˆ—ã€‚ä»ç¬¬1å…ƒç´ å¼€å§‹ä¾æ¬¡å°†æ— åºåºåˆ—çš„å…ƒç´ æ’å…¥åˆ°æœ‰åºåºåˆ—ä¸­ for(var i=1; i&lt;arr.length;i++){ if(arr[i]&lt;arr[i-1]){ //å–å‡ºæ— åºåºåˆ—ä¸­éœ€è¦æ’å…¥çš„ç¬¬iä¸ªå…ƒç´  var temp = arr[i]; //å®šä¹‰æœ‰åºä¸­çš„æœ€åä¸€ä¸ªä½ç½® var j = i-1; arr[i] = arr[j]; //æ¯”è¾ƒå¤§å°ï¼Œæ‰¾åˆ°æ’å…¥çš„ä½ç½® while(j&gt;=0&amp;&amp;temp&lt;arr[j]){ arr[j+1] = arr[j]; j--; }; //æ’å…¥ arr[j+1] = temp; } } }insertSort(array)document.write(array); ï¼ˆ1ï¼‰ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åºï¼ˆ2ï¼‰å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­æ‰«æï¼ˆ3ï¼‰å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼ˆ4ï¼‰é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®ï¼ˆ5ï¼‰å°†æ–°å…ƒç´ æ’å…¥åˆ°ä¸‹ä¸€ä½ç½®ä¸­ï¼ˆ6ï¼‰é‡å¤æ­¥éª¤2 5. é€‰æ‹©æ’åº1234567891011121314151617181920var array = [1,4,-8,-3,6,12,9,8];function selectSort(arr){ for(var i=0;i&lt;arr.length;i++){ //è®¾ç½®å½“å‰èŒƒå›´æœ€å°å€¼å’Œç´¢å¼• var min = arr[i]; var minIndex = i; //åœ¨è¯¥èŒƒå›´é€‰å‡ºæœ€å°å€¼ for(var j=i+1;j&lt;arr.length;j++){ if(min&gt;arr[j]){ min = arr[j]; minIndex = j; } } //å°†æœ€å°å€¼æ’å…¥,å¹¶å°†åŸæ¥ä½ç½®çš„æœ€å°å€¼åˆ é™¤ arr.splice(i,0,min); arr.splice(minIndex+1,1); }}selectSort(array);document.write(array); ï¼ˆ1ï¼‰åœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼ˆ2ï¼‰å¹¶å­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼ˆ3ï¼‰ç„¶åï¼Œå†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼ˆ4ï¼‰ç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚ï¼ˆ5ï¼‰ä»¥æ­¤ç±»æ¨","link":"/2018/07/21/JavaScript%E7%9A%84%E6%95%B0%E7%BB%84%E6%8E%92%E5%BA%8F/"},{"title":"JavaScriptè®¾è®¡æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼","text":"ç­–ç•¥æ¨¡å¼ï¼šå®šä¹‰äº†ä¸€ç³»åˆ—å®¶æ—ç®—æ³•ï¼Œå¹¶å¯¹æ¯ä¸€ç§ç®—æ³•å•ç‹¬å°è£…èµ·æ¥ï¼Œè®©ç®—æ³•ä¹‹é—´å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚é€šä¿—çš„è®²å°±æ˜¯æ ¹æ®ä¸åŒçš„å‚æ•°å¯ä»¥å®šä¹‰ä¸åŒçš„ç­–ç•¥ã€‚ç­–ç•¥æ¨¡å¼æ˜¯JavaScriptä¸­æ¯”è¾ƒç»å…¸çš„æ¨¡å¼ä¹‹ä¸€, å¯ä»¥å‡å°‘å¤§é‡çš„ifè¯­å¥,å¯å¤ç”¨ç¨‹åº¦é«˜ å¦‚ä¸‹é¢çš„ä¾‹å­: 123456789101112131415//æ¸…é™¤å­—ç¬¦ç©ºæ ¼const trim = { 'A': function (str, type) { return str.replace(/\\s+/g, &quot;&quot;); }, 'B': function (str, type) { return str.replace(/(^\\s*)|(\\s*$)/g, &quot;&quot;); }, 'C': function (str, type) { return str.replace(/(^\\s*)/g, &quot;&quot;); }, 'D': function (str, type) { return str.replace(/(\\s*$)/g, &quot;&quot;); }}","link":"/2018/05/22/JavaScript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"},{"title":"JavaScriptè®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼","text":"å•ä¾‹æ¨¡å¼æ¦‚å¿µï¼šä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚æ¦‚å¿µï¼šå•ä¾‹å°±æ˜¯ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå®ç°æ–¹æ³•ä¸€èˆ¬æ˜¯å…ˆåˆ¤æ–­å®ä¾‹å­˜åœ¨ä¸å¦ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥è¿”å›ï¼Œå¦‚æœä¸å­˜åœ¨å°±åˆ›å»ºäº†å†è¿”å›ï¼Œè¿™å°±ç¡®ä¿äº†ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚åœ¨JavaScripté‡Œï¼Œå•ä¾‹ä½œä¸ºä¸€ä¸ªå‘½åç©ºé—´æä¾›è€…ï¼Œä»å…¨å±€å‘½åç©ºé—´é‡Œæä¾›ä¸€ä¸ªå”¯ä¸€çš„è®¿é—®ç‚¹æ¥è®¿é—®è¯¥å¯¹è±¡ã€‚ å•ä¾‹æ¨¡å¼çš„ä½œç”¨å’Œæ³¨æ„äº‹é¡¹æ¨¡å¼ä½œç”¨ï¼š 1ã€æ¨¡å—é—´é€šä¿¡ 2ã€ç³»ç»Ÿä¸­æŸä¸ªç±»çš„å¯¹è±¡åªèƒ½å­˜åœ¨ä¸€ä¸ª 3ã€ä¿æŠ¤è‡ªå·±çš„å±æ€§å’Œæ–¹æ³• æ³¨æ„äº‹é¡¹ï¼š 1ã€æ³¨æ„thisçš„ä½¿ç”¨ 2ã€é—­åŒ…å®¹æ˜“é€ æˆå†…å­˜æ³„éœ²ï¼Œä¸éœ€è¦çš„è¦èµ¶å¿«å¹²æ‰ 3ã€æ³¨æ„newçš„æˆæœ¬ã€‚ï¼ˆç»§æ‰¿ï¼‰ å•ä¾‹æ¨¡å¼ä»£ç ä¾‹å­æœ€ç®€å•çš„å®ç°æ–¹å¼ï¼Œå°±æ˜¯ä½¿ç”¨å¯¹è±¡å­—é¢é‡çš„æ–¹æ³• 1234567let testSingleton_1 = { pt_1: 'test1', pt_2: 'test2', testFunc: function() { console.log('æœ€ç®€å•çš„å•ä¾‹æ¨¡å¼'); }} å¦‚æœè¦ä½¿ç”¨è‡ªå·±çš„ç§æœ‰å˜é‡å’Œæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨é—­åŒ…æ¥å°è£…è¿™äº›å±æ€§å’Œå‡½æ•°ï¼Œåªæš´éœ²å‡ºå…¬æœ‰å˜é‡å’Œæ–¹æ³•å³å¯ 12345678910111213141516let testSingleton_2 = { let p_1 = 'ç§æœ‰å˜é‡'; function testFunc() { console.log('æˆ‘æ˜¯ç§æœ‰æ–¹æ³•', p_1); } //æš´éœ²å‡ºçš„å¯¹è±¡ï¼Œä½ åœ¨é‡Œé¢å¯ä»¥å®šä¹‰ä½ çš„æƒ³è¦ç»™åˆ«äººçœ‹åˆ°çš„ä¸œè¥¿ return { p_2: 'å…¬æœ‰å˜é‡', testFunc_2: function() { console.log('å…¬æœ‰æ–¹æ³•'); testFunc(); } }} åœ¨ä½¿ç”¨çš„æ—¶å€™åˆå§‹åŒ–å¯ä»¥æé«˜æ•ˆç‡ 123456789101112131415161718192021222324252627282930let testSingleton_3 = (function() { let instance; let p_1 = 'ç§æœ‰å˜é‡'; function testFunc() { console.log('æˆ‘æ˜¯ç§æœ‰æ–¹æ³•', p_1); } function init() { //æ“ä½œä½ çš„éœ€æ±‚é€»è¾‘ return { p_2: 'å…¬æœ‰å˜é‡', testFunc_2: function() { console.log('å…¬æœ‰æ–¹æ³•'); testFunc(); } } } return { getInstance: function() { if(!instance) { instance = init(); } return instance; } }})(); å•ä¾‹æ¨¡å¼çš„å®—æ—¨å°±æ˜¯ä¿æŒä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹","link":"/2018/05/28/JavaScript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"},{"title":"Vueç»„ä»¶é—´çš„é€šä¿¡æ–¹å¼","text":"æ–¹æ³•ä¸€ã€props/$emitçˆ¶ç»„ä»¶ A é€šè¿‡ props çš„æ–¹å¼å‘å­ç»„ä»¶ B ä¼ é€’ï¼ŒB to A é€šè¿‡åœ¨ B ç»„ä»¶ä¸­ $emit, A ç»„ä»¶ä¸­ v-on çš„æ–¹å¼å®ç°ã€‚ çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œè¯´æ˜çˆ¶ç»„ä»¶å¦‚ä½•å‘å­ç»„ä»¶ä¼ é€’å€¼ï¼šåœ¨å­ç»„ä»¶ Users.vue ä¸­å¦‚ä½•è·å–çˆ¶ç»„ä»¶ App.vue ä¸­çš„æ•°æ® users:[â€œç‹å°è™â€,â€å¼ ä¸‰â€,â€æå››â€] 123456789101112131415161718192021//App.vueçˆ¶ç»„ä»¶&lt;template&gt; &lt;div id=&quot;app&quot;&gt; &lt;users v-bind:users=&quot;users&quot;&gt;&lt;/users&gt;//å‰è€…è‡ªå®šä¹‰åç§°ä¾¿äºå­ç»„ä»¶è°ƒç”¨ï¼Œåè€…è¦ä¼ é€’æ•°æ®å &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Users from &quot;./components/Users&quot;export default { name: 'App', data(){ return{ users:[&quot;ç‹å°è™&quot;,&quot;å¼ ä¸‰&quot;,&quot;æå››&quot;] } }, components:{ &quot;users&quot;:Users }} 12345678910111213141516171819//userså­ç»„ä»¶&lt;template&gt; &lt;div class=&quot;hello&quot;&gt; &lt;ul&gt; &lt;li v-for=&quot;user in users&quot;&gt;{{user}}&lt;/li&gt;//éå†ä¼ é€’è¿‡æ¥çš„å€¼ï¼Œç„¶åå‘ˆç°åˆ°é¡µé¢ &lt;/ul&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default { name: 'HelloWorld', props:{ users:{ //è¿™ä¸ªå°±æ˜¯çˆ¶ç»„ä»¶ä¸­å­æ ‡ç­¾è‡ªå®šä¹‰åå­— type:Array, required:true } }}&lt;/script&gt; çˆ¶ç»„ä»¶é€šè¿‡ props å‘ä¸‹ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ã€‚æ³¨ï¼šç»„ä»¶ä¸­çš„æ•°æ®å…±æœ‰ä¸‰ç§å½¢å¼ï¼šdataã€propsã€computed å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼ï¼ˆé€šè¿‡äº‹ä»¶å½¢å¼ï¼‰æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œè¯´æ˜å­ç»„ä»¶å¦‚ä½•å‘çˆ¶ç»„ä»¶ä¼ é€’å€¼ï¼šå½“æˆ‘ä»¬ç‚¹å‡»â€œVue.js Demoâ€åï¼Œå­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’å€¼ï¼Œæ–‡å­—ç”±åŸæ¥çš„â€œä¼ é€’çš„æ˜¯ä¸€ä¸ªå€¼â€å˜æˆâ€œå­å‘çˆ¶ç»„ä»¶ä¼ å€¼â€ï¼Œå®ç°å­ç»„ä»¶å‘çˆ¶ç»„ä»¶å€¼çš„ä¼ é€’ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950// å­ç»„ä»¶&lt;template&gt; &lt;header&gt; &lt;h1 @click=&quot;changeTitle&quot;&gt;{{title}}&lt;/h1&gt;//ç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶ &lt;/header&gt;&lt;/template&gt;&lt;script&gt;export default { name: 'app-header', data() { return { title:&quot;Vue.js Demo&quot; } }, methods:{ changeTitle() { this.$emit(&quot;titleChanged&quot;,&quot;å­å‘çˆ¶ç»„ä»¶ä¼ å€¼&quot;);//è‡ªå®šä¹‰äº‹ä»¶ ä¼ é€’å€¼â€œå­å‘çˆ¶ç»„ä»¶ä¼ å€¼â€ } }}&lt;/script&gt;// çˆ¶ç»„ä»¶&lt;template&gt; &lt;div id=&quot;app&quot;&gt; &lt;app-header v-on:titleChanged=&quot;updateTitle&quot; &gt;&lt;/app-header&gt;//ä¸å­ç»„ä»¶titleChangedè‡ªå®šä¹‰äº‹ä»¶ä¿æŒä¸€è‡´ // updateTitle($event)æ¥å—ä¼ é€’è¿‡æ¥çš„æ–‡å­— &lt;h2&gt;{{title}}&lt;/h2&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Header from &quot;./components/Header&quot;export default { name: 'App', data(){ return{ title:&quot;ä¼ é€’çš„æ˜¯ä¸€ä¸ªå€¼&quot; } }, methods:{ updateTitle(e){ //å£°æ˜è¿™ä¸ªå‡½æ•° this.title = e; } }, components:{ &quot;app-header&quot;:Header, }}&lt;/script&gt; å­ç»„ä»¶é€šè¿‡ events ç»™çˆ¶ç»„ä»¶å‘é€æ¶ˆæ¯ï¼Œå®é™…ä¸Šå°±æ˜¯å­ç»„ä»¶æŠŠè‡ªå·±çš„æ•°æ®å‘é€åˆ°çˆ¶ç»„ä»¶ã€‚ æ–¹æ³•äºŒã€$emit/$onè¿™ç§æ–¹æ³•é€šè¿‡ä¸€ä¸ªç©ºçš„ Vue å®ä¾‹ä½œä¸ºä¸­å¤®äº‹ä»¶æ€»çº¿ï¼ˆäº‹ä»¶ä¸­å¿ƒï¼‰ï¼Œç”¨å®ƒæ¥è§¦å‘äº‹ä»¶å’Œç›‘å¬äº‹ä»¶,å·§å¦™è€Œè½»é‡åœ°å®ç°äº†ä»»ä½•ç»„ä»¶é—´çš„é€šä¿¡ï¼ŒåŒ…æ‹¬çˆ¶å­ã€å…„å¼Ÿã€è·¨çº§ã€‚å½“æˆ‘ä»¬çš„é¡¹ç›®æ¯”è¾ƒå¤§æ—¶ï¼Œå¯ä»¥é€‰æ‹©æ›´å¥½çš„çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆ vuexã€‚ 1.å…·ä½“å®ç°æ–¹å¼ï¼š 123var Event=new Vue();Event.$emit(äº‹ä»¶å,æ•°æ®);Event.$on(äº‹ä»¶å,data =&gt; {}); 2.ä¸¾ä¸ªä¾‹å­å‡è®¾å…„å¼Ÿç»„ä»¶æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«æ˜¯ Aã€Bã€C ç»„ä»¶ï¼ŒC ç»„ä»¶å¦‚ä½•è·å– A æˆ–è€… B ç»„ä»¶çš„æ•°æ® 12345678910111213141516171819202122232425262728293031&lt;div id=&quot;itany&quot;&gt; &lt;my-a&gt;&lt;/my-a&gt; &lt;my-b&gt;&lt;/my-b&gt; &lt;my-c&gt;&lt;/my-c&gt;&lt;/div&gt;&lt;template id=&quot;a&quot;&gt; &lt;div&gt; &lt;h3&gt;Aç»„ä»¶ï¼š{{name}}&lt;/h3&gt; &lt;button @click=&quot;send&quot;&gt;å°†æ•°æ®å‘é€ç»™Cç»„ä»¶&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;template id=&quot;b&quot;&gt; &lt;div&gt; &lt;h3&gt;Bç»„ä»¶ï¼š{{age}}&lt;/h3&gt; &lt;button @click=&quot;send&quot;&gt;å°†æ•°ç»„å‘é€ç»™Cç»„ä»¶&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;template id=&quot;c&quot;&gt; &lt;div&gt; &lt;h3&gt;Cç»„ä»¶ï¼š{{name}}ï¼Œ{{age}}&lt;/h3&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;var Event = new Vue();//å®šä¹‰ä¸€ä¸ªç©ºçš„Vueå®ä¾‹var A = { template: '#a', data() { return { name: 'tom' } }, $on ç›‘å¬äº†è‡ªå®šä¹‰äº‹ä»¶ data-a å’Œ data-bï¼Œå› ä¸ºæœ‰æ—¶ä¸ç¡®å®šä½•æ—¶ä¼šè§¦å‘äº‹ä»¶ï¼Œä¸€èˆ¬ä¼šåœ¨ mounted æˆ– created é’©å­ä¸­æ¥ç›‘å¬ã€‚ æ–¹æ³•ä¸‰ã€vuex ç®€è¦ä»‹ç» Vuex åŸç†Vuex å®ç°äº†ä¸€ä¸ªå•å‘æ•°æ®æµï¼Œåœ¨å…¨å±€æ‹¥æœ‰ä¸€ä¸ª State å­˜æ”¾æ•°æ®ï¼Œå½“ç»„ä»¶è¦æ›´æ”¹ State ä¸­çš„æ•°æ®æ—¶ï¼Œå¿…é¡»é€šè¿‡ Mutation è¿›è¡Œï¼ŒMutation åŒæ—¶æä¾›äº†è®¢é˜…è€…æ¨¡å¼ä¾›å¤–éƒ¨æ’ä»¶è°ƒç”¨è·å– State æ•°æ®çš„æ›´æ–°ã€‚è€Œå½“æ‰€æœ‰å¼‚æ­¥æ“ä½œ(å¸¸è§äºè°ƒç”¨åç«¯æ¥å£å¼‚æ­¥è·å–æ›´æ–°æ•°æ®)æˆ–æ‰¹é‡çš„åŒæ­¥æ“ä½œéœ€è¦èµ° Actionï¼Œä½† Action ä¹Ÿæ˜¯æ— æ³•ç›´æ¥ä¿®æ”¹ State çš„ï¼Œè¿˜æ˜¯éœ€è¦é€šè¿‡ Mutation æ¥ä¿®æ”¹ State çš„æ•°æ®ã€‚æœ€åï¼Œæ ¹æ® State çš„å˜åŒ–ï¼Œæ¸²æŸ“åˆ°è§†å›¾ä¸Šã€‚ ç®€è¦ä»‹ç»å„æ¨¡å—åœ¨æµç¨‹ä¸­çš„åŠŸèƒ½ï¼šVue Componentsï¼šVue ç»„ä»¶ã€‚HTML é¡µé¢ä¸Šï¼Œè´Ÿè´£æ¥æ”¶ç”¨æˆ·æ“ä½œç­‰äº¤äº’è¡Œä¸ºï¼Œæ‰§è¡Œ dispatch æ–¹æ³•è§¦å‘å¯¹åº” action è¿›è¡Œå›åº”ã€‚dispatchï¼šæ“ä½œè¡Œä¸ºè§¦å‘æ–¹æ³•ï¼Œæ˜¯å”¯ä¸€èƒ½æ‰§è¡Œ action çš„æ–¹æ³•ã€‚actionsï¼šæ“ä½œè¡Œä¸ºå¤„ç†æ¨¡å—,ç”±ç»„ä»¶ä¸­çš„$store.dispatch(â€˜action åç§°â€™, data1)æ¥è§¦å‘ã€‚ç„¶åç”± commit()æ¥è§¦å‘ mutation çš„è°ƒç”¨ , é—´æ¥æ›´æ–° stateã€‚è´Ÿè´£å¤„ç† Vue Components æ¥æ”¶åˆ°çš„æ‰€æœ‰äº¤äº’è¡Œä¸ºã€‚åŒ…å«åŒæ­¥/å¼‚æ­¥æ“ä½œï¼Œæ”¯æŒå¤šä¸ªåŒåæ–¹æ³•ï¼ŒæŒ‰ç…§æ³¨å†Œçš„é¡ºåºä¾æ¬¡è§¦å‘ã€‚å‘åå° API è¯·æ±‚çš„æ“ä½œå°±åœ¨è¿™ä¸ªæ¨¡å—ä¸­è¿›è¡Œï¼ŒåŒ…æ‹¬è§¦å‘å…¶ä»– action ä»¥åŠæäº¤ mutation çš„æ“ä½œã€‚è¯¥æ¨¡å—æä¾›äº† Promise çš„å°è£…ï¼Œä»¥æ”¯æŒ action çš„é“¾å¼è§¦å‘ã€‚commitï¼šçŠ¶æ€æ”¹å˜æäº¤æ“ä½œæ–¹æ³•ã€‚å¯¹ mutation è¿›è¡Œæäº¤ï¼Œæ˜¯å”¯ä¸€èƒ½æ‰§è¡Œ mutation çš„æ–¹æ³•ã€‚mutationsï¼šçŠ¶æ€æ”¹å˜æ“ä½œæ–¹æ³•ï¼Œç”± actions ä¸­çš„commit(â€˜mutation åç§°â€™)æ¥è§¦å‘ã€‚æ˜¯ Vuex ä¿®æ”¹ state çš„å”¯ä¸€æ¨èæ–¹æ³•ã€‚è¯¥æ–¹æ³•åªèƒ½è¿›è¡ŒåŒæ­¥æ“ä½œï¼Œä¸”æ–¹æ³•ååªèƒ½å…¨å±€å”¯ä¸€ã€‚æ“ä½œä¹‹ä¸­ä¼šæœ‰ä¸€äº› hook æš´éœ²å‡ºæ¥ï¼Œä»¥è¿›è¡Œ state çš„ç›‘æ§ç­‰ã€‚stateï¼šé¡µé¢çŠ¶æ€ç®¡ç†å®¹å™¨å¯¹è±¡ã€‚é›†ä¸­å­˜å‚¨ Vue components ä¸­ data å¯¹è±¡çš„é›¶æ•£æ•°æ®ï¼Œå…¨å±€å”¯ä¸€ï¼Œä»¥è¿›è¡Œç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†ã€‚é¡µé¢æ˜¾ç¤ºæ‰€éœ€çš„æ•°æ®ä»è¯¥å¯¹è±¡ä¸­è¿›è¡Œè¯»å–ï¼Œåˆ©ç”¨ Vue çš„ç»†ç²’åº¦æ•°æ®å“åº”æœºåˆ¶æ¥è¿›è¡Œé«˜æ•ˆçš„çŠ¶æ€æ›´æ–°ã€‚gettersï¼šstate å¯¹è±¡è¯»å–æ–¹æ³•ã€‚å›¾ä¸­æ²¡æœ‰å•ç‹¬åˆ—å‡ºè¯¥æ¨¡å—ï¼Œåº”è¯¥è¢«åŒ…å«åœ¨äº† render ä¸­ï¼ŒVue Components é€šè¿‡è¯¥æ–¹æ³•è¯»å–å…¨å±€ state å¯¹è±¡ã€‚ Vuex ä¸ localStoragevuex æ˜¯ vue çš„çŠ¶æ€ç®¡ç†å™¨ï¼Œå­˜å‚¨çš„æ•°æ®æ˜¯å“åº”å¼çš„ã€‚ä½†æ˜¯å¹¶ä¸ä¼šä¿å­˜èµ·æ¥ï¼Œåˆ·æ–°ä¹‹åå°±å›åˆ°äº†åˆå§‹çŠ¶æ€ï¼Œå…·ä½“åšæ³•åº”è¯¥åœ¨ vuex é‡Œæ•°æ®æ”¹å˜çš„æ—¶å€™æŠŠæ•°æ®æ‹·è´ä¸€ä»½ä¿å­˜åˆ° localStorage é‡Œé¢ï¼Œåˆ·æ–°ä¹‹åï¼Œå¦‚æœ localStorage é‡Œæœ‰ä¿å­˜çš„æ•°æ®ï¼Œå–å‡ºæ¥å†æ›¿æ¢ store é‡Œçš„ stateã€‚ 1234567891011121314151617181920let defaultCity = &quot;ä¸Šæµ·&quot;try { // ç”¨æˆ·å…³é—­äº†æœ¬åœ°å­˜å‚¨åŠŸèƒ½ï¼Œæ­¤æ—¶åœ¨å¤–å±‚åŠ ä¸ªtry...catch if (!defaultCity){ defaultCity = JSON.parse(window.localStorage.getItem('defaultCity')) }}catch(e){}export default new Vuex.Store({ state: { city: defaultCity }, mutations: { changeCity(state, city) { state.city = city try { window.localStorage.setItem('defaultCity', JSON.stringify(state.city)); // æ•°æ®æ”¹å˜çš„æ—¶å€™æŠŠæ•°æ®æ‹·è´ä¸€ä»½ä¿å­˜åˆ°localStorageé‡Œé¢ } catch (e) {} } }}) è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šç”±äº vuex é‡Œï¼Œæˆ‘ä»¬ä¿å­˜çš„çŠ¶æ€ï¼Œéƒ½æ˜¯æ•°ç»„ï¼Œè€Œ localStorage åªæ”¯æŒå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥éœ€è¦ç”¨ JSON è½¬æ¢ï¼š 12JSON.stringify(state.subscribeList); // array -&gt; stringJSON.parse(window.localStorage.getItem(&quot;subscribeList&quot;)); // string -&gt; array æ–¹æ³•å››ã€$attrs/$listeners ç®€ä»‹å¤šçº§ç»„ä»¶åµŒå¥—éœ€è¦ä¼ é€’æ•°æ®æ—¶ï¼Œé€šå¸¸ä½¿ç”¨çš„æ–¹æ³•æ˜¯é€šè¿‡ vuexã€‚ä½†å¦‚æœä»…ä»…æ˜¯ä¼ é€’æ•°æ®ï¼Œè€Œä¸åšä¸­é—´å¤„ç†ï¼Œä½¿ç”¨ vuex å¤„ç†ï¼Œæœªå…æœ‰ç‚¹å¤§æå°ç”¨ã€‚ä¸ºæ­¤ Vue2.4 ç‰ˆæœ¬æä¾›äº†å¦ä¸€ç§æ–¹æ³•â€”-$attrs/$listeners $attrsï¼šåŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­ä¸è¢« prop æ‰€è¯†åˆ« (ä¸”è·å–) çš„ç‰¹æ€§ç»‘å®š (class å’Œ style é™¤å¤–)ã€‚å½“ä¸€ä¸ªç»„ä»¶æ²¡æœ‰å£°æ˜ä»»ä½• prop æ—¶ï¼Œè¿™é‡Œä¼šåŒ…å«æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„ç»‘å®š (class å’Œ style é™¤å¤–)ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ v-bind=â€$attrsâ€ ä¼ å…¥å†…éƒ¨ç»„ä»¶ã€‚é€šå¸¸é…åˆ interitAttrs é€‰é¡¹ä¸€èµ·ä½¿ç”¨ã€‚$listenersï¼šåŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­çš„ (ä¸å« .native ä¿®é¥°å™¨çš„) v-on äº‹ä»¶ç›‘å¬å™¨ã€‚å®ƒå¯ä»¥é€šè¿‡ v-on=â€$listenersâ€ ä¼ å…¥å†…éƒ¨ç»„ä»¶æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸ªè·¨çº§é€šä¿¡çš„ä¾‹å­ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687// index.vue&lt;template&gt; &lt;div&gt; &lt;h2&gt;ç®€æ´è‡³ä¸Š&lt;/h2&gt; &lt;child-com1 :foo=&quot;foo&quot; :boo=&quot;boo&quot; :coo=&quot;coo&quot; :doo=&quot;doo&quot; title=&quot;é«˜æ€§èƒ½&quot; &gt;&lt;/child-com1&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;const childCom1 = () =&gt; import(&quot;./childCom1.vue&quot;);export default { components: { childCom1 }, data() { return { foo: &quot;Javascript&quot;, boo: &quot;Html&quot;, coo: &quot;CSS&quot;, doo: &quot;Vue&quot; }; }};&lt;/script&gt;// childCom1.vue&lt;template class=&quot;border&quot;&gt; &lt;div&gt; &lt;p&gt;foo: {{ foo }}&lt;/p&gt; &lt;p&gt;childCom1çš„$attrs: {{ $attrs }}&lt;/p&gt; &lt;child-com2 v-bind=&quot;$attrs&quot;&gt;&lt;/child-com2&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;const childCom2 = () =&gt; import(&quot;./childCom2.vue&quot;);export default { components: { childCom2 }, inheritAttrs: false, // å¯ä»¥å…³é—­è‡ªåŠ¨æŒ‚è½½åˆ°ç»„ä»¶æ ¹å…ƒç´ ä¸Šçš„æ²¡æœ‰åœ¨propså£°æ˜çš„å±æ€§ props: { foo: String // fooä½œä¸ºpropså±æ€§ç»‘å®š }, created() { console.log(this.$attrs); // { &quot;boo&quot;: &quot;Html&quot;, &quot;coo&quot;: &quot;CSS&quot;, &quot;doo&quot;: &quot;Vue&quot;, &quot;title&quot;: &quot;é«˜æ€§èƒ½&quot; } }};&lt;/script&gt;// childCom2.vue&lt;template&gt; &lt;div class=&quot;border&quot;&gt; &lt;p&gt;boo: {{ boo }}&lt;/p&gt; &lt;p&gt;childCom2: {{ $attrs }}&lt;/p&gt; &lt;child-com3 v-bind=&quot;$attrs&quot;&gt;&lt;/child-com3&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;const childCom3 = () =&gt; import(&quot;./childCom3.vue&quot;);export default { components: { childCom3 }, inheritAttrs: false, props: { boo: String }, created() { console.log(this.$attrs); // { &quot;boo&quot;: &quot;Html&quot;, &quot;coo&quot;: &quot;CSS&quot;, &quot;doo&quot;: &quot;Vue&quot;, &quot;title&quot;: &quot;é«˜æ€§èƒ½&quot; } }};&lt;/script&gt;// childCom3.vue&lt;template&gt; &lt;div class=&quot;border&quot;&gt; &lt;p&gt;childCom3: {{ $attrs }}&lt;/p&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default { props: { coo: String, title: String }};&lt;/script&gt; å¦‚ä¸Šå›¾æ‰€ç¤º$attrsè¡¨ç¤ºæ²¡æœ‰ç»§æ‰¿æ•°æ®çš„å¯¹è±¡ï¼Œæ ¼å¼ä¸º{å±æ€§åï¼šå±æ€§å€¼}ã€‚Vue2.4 æä¾›äº†$attrs , $listeners æ¥ä¼ é€’æ•°æ®ä¸äº‹ä»¶ï¼Œè·¨çº§ç»„ä»¶ä¹‹é—´çš„é€šè®¯å˜å¾—æ›´ç®€å•ã€‚ ç®€å•æ¥è¯´ï¼š$attrsä¸$listeners æ˜¯ä¸¤ä¸ªå¯¹è±¡ï¼Œ$attrs é‡Œå­˜æ”¾çš„æ˜¯çˆ¶ç»„ä»¶ä¸­ç»‘å®šçš„é Props å±æ€§ï¼Œ$listenersé‡Œå­˜æ”¾çš„æ˜¯çˆ¶ç»„ä»¶ä¸­ç»‘å®šçš„éåŸç”Ÿäº‹ä»¶ã€‚ æ–¹æ³•äº”ã€provide/inject ç®€ä»‹Vue2.2.0 æ–°å¢ API,è¿™å¯¹é€‰é¡¹éœ€è¦ä¸€èµ·ä½¿ç”¨ï¼Œä»¥å…è®¸ä¸€ä¸ªç¥–å…ˆç»„ä»¶å‘å…¶æ‰€æœ‰å­å­™åä»£æ³¨å…¥ä¸€ä¸ªä¾èµ–ï¼Œä¸è®ºç»„ä»¶å±‚æ¬¡æœ‰å¤šæ·±ï¼Œå¹¶åœ¨èµ·ä¸Šä¸‹æ¸¸å…³ç³»æˆç«‹çš„æ—¶é—´é‡Œå§‹ç»ˆç”Ÿæ•ˆã€‚ä¸€è¨€è€Œè”½ä¹‹ï¼šç¥–å…ˆç»„ä»¶ä¸­é€šè¿‡ provider æ¥æä¾›å˜é‡ï¼Œç„¶ååœ¨å­å­™ç»„ä»¶ä¸­é€šè¿‡ inject æ¥æ³¨å…¥å˜é‡ã€‚provide / inject API ä¸»è¦è§£å†³äº†è·¨çº§ç»„ä»¶é—´çš„é€šä¿¡é—®é¢˜ï¼Œä¸è¿‡å®ƒçš„ä½¿ç”¨åœºæ™¯ï¼Œä¸»è¦æ˜¯å­ç»„ä»¶è·å–ä¸Šçº§ç»„ä»¶çš„çŠ¶æ€ï¼Œè·¨çº§ç»„ä»¶é—´å»ºç«‹äº†ä¸€ç§ä¸»åŠ¨æä¾›ä¸ä¾èµ–æ³¨å…¥çš„å…³ç³»ã€‚ ä¸¾ä¸ªä¾‹å­å‡è®¾æœ‰ä¸¤ä¸ªç»„ä»¶ï¼š A.vue å’Œ B.vueï¼ŒB æ˜¯ A çš„å­ç»„ä»¶ 12345678910111213// A.vueexport default { provide: { name: 'ç®€æ´è‡³ä¸Š' }}// B.vueexport default { inject: ['name'], mounted () { console.log(this.name); // ç®€æ´è‡³ä¸Š }} å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ A.vue é‡Œï¼Œæˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ª provide: nameï¼Œå€¼ä¸º ç®€æ´è‡³ä¸Šï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å°† name è¿™ä¸ªå˜é‡æä¾›ç»™å®ƒçš„æ‰€æœ‰å­ç»„ä»¶ã€‚è€Œåœ¨ B.vue ä¸­ï¼Œé€šè¿‡ inject æ³¨å…¥äº†ä» A ç»„ä»¶ä¸­æä¾›çš„ name å˜é‡ï¼Œé‚£ä¹ˆåœ¨ç»„ä»¶ B ä¸­ï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡ this.name è®¿é—®è¿™ä¸ªå˜é‡äº†ï¼Œå®ƒçš„å€¼ä¹Ÿæ˜¯ æµªé‡Œè¡ŒèˆŸã€‚è¿™å°±æ˜¯ provide / inject API æœ€æ ¸å¿ƒçš„ç”¨æ³•ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šprovide å’Œ inject ç»‘å®šå¹¶ä¸æ˜¯å¯å“åº”çš„ã€‚è¿™æ˜¯åˆ»æ„ä¸ºä¹‹çš„ã€‚ç„¶è€Œï¼Œå¦‚æœä½ ä¼ å…¥äº†ä¸€ä¸ªå¯ç›‘å¬çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå…¶å¯¹è±¡çš„å±æ€§è¿˜æ˜¯å¯å“åº”çš„â€”-vue å®˜æ–¹æ–‡æ¡£æ‰€ä»¥ï¼Œä¸Šé¢ A.vue çš„ name å¦‚æœæ”¹å˜äº†ï¼ŒB.vue çš„ this.name æ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œä»ç„¶æ˜¯ ç®€æ´è‡³ä¸Šã€‚ provide ä¸ inject æ€ä¹ˆå®ç°æ•°æ®å“åº”å¼ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰ä¸¤ç§åŠæ³•ï¼š provide ç¥–å…ˆç»„ä»¶çš„å®ä¾‹ï¼Œç„¶ååœ¨å­å­™ç»„ä»¶ä¸­æ³¨å…¥ä¾èµ–ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨å­å­™ç»„ä»¶ä¸­ç›´æ¥ä¿®æ”¹ç¥–å…ˆç»„ä»¶çš„å®ä¾‹çš„å±æ€§ï¼Œä¸è¿‡è¿™ç§æ–¹æ³•æœ‰ä¸ªç¼ºç‚¹å°±æ˜¯è¿™ä¸ªå®ä¾‹ä¸ŠæŒ‚è½½å¾ˆå¤šæ²¡æœ‰å¿…è¦çš„ä¸œè¥¿æ¯”å¦‚ propsï¼Œmethodsä½¿ç”¨ 2.6 æœ€æ–° API Vue.observable ä¼˜åŒ–å“åº”å¼ provide(æ¨è)æˆ‘ä»¬æ¥çœ‹ä¸ªä¾‹å­ï¼šå­™ç»„ä»¶ Dã€E å’Œ F è·å– A ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ color å€¼ï¼Œå¹¶èƒ½å®ç°æ•°æ®å“åº”å¼å˜åŒ–ï¼Œå³ A ç»„ä»¶çš„ color å˜åŒ–åï¼Œç»„ä»¶ Dã€Eã€F ä¸ä¼šè·Ÿç€å˜ï¼ˆæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼šï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950// A ç»„ä»¶&lt;div&gt; &lt;h1&gt;A ç»„ä»¶&lt;/h1&gt; &lt;button @click=&quot;() =&gt; changeColor()&quot;&gt;æ”¹å˜color&lt;/button&gt; &lt;ChildrenB /&gt; &lt;ChildrenC /&gt;&lt;/div&gt;...... data() { return { color: &quot;blue&quot; }; }, // provide() { // return { // theme: { // color: this.color //è¿™ç§æ–¹å¼ç»‘å®šçš„æ•°æ®å¹¶ä¸æ˜¯å¯å“åº”çš„ // } // å³Aç»„ä»¶çš„colorå˜åŒ–åï¼Œç»„ä»¶Dã€Eã€Fä¸ä¼šè·Ÿç€å˜ // }; // }, provide() { return { theme: this//æ–¹æ³•ä¸€ï¼šæä¾›ç¥–å…ˆç»„ä»¶çš„å®ä¾‹ }; }, methods: { changeColor(color) { if (color) { this.color = color; } else { this.color = this.color === &quot;blue&quot; ? &quot;red&quot; : &quot;blue&quot;; } } }// F ç»„ä»¶&lt;template functional&gt; &lt;div class=&quot;border2&quot;&gt; &lt;h3 :style=&quot;{ color: injections.theme.color }&quot;&gt;F ç»„ä»¶&lt;/h3&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default { inject: { theme: { //å‡½æ•°å¼ç»„ä»¶å–å€¼ä¸ä¸€æ · default: () =&gt; ({}) } }};&lt;/script&gt; è™½è¯´ provide å’Œ inject ä¸»è¦ä¸ºé«˜é˜¶æ’ä»¶/ç»„ä»¶åº“æä¾›ç”¨ä¾‹ï¼Œä½†å¦‚æœä½ èƒ½åœ¨ä¸šåŠ¡ä¸­ç†Ÿç»ƒè¿ç”¨ï¼Œå¯ä»¥è¾¾åˆ°äº‹åŠåŠŸå€çš„æ•ˆæœï¼ æ–¹æ³•å…­ã€$parent / $childrenä¸ refrefï¼šå¦‚æœåœ¨æ™®é€šçš„ DOM å…ƒç´ ä¸Šä½¿ç”¨ï¼Œå¼•ç”¨æŒ‡å‘çš„å°±æ˜¯ DOM å…ƒç´ ï¼›å¦‚æœç”¨åœ¨å­ç»„ä»¶ä¸Šï¼Œå¼•ç”¨å°±æŒ‡å‘ç»„ä»¶å®ä¾‹$parent / $childrenï¼šè®¿é—®çˆ¶ / å­å®ä¾‹éœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™ä¸¤ç§éƒ½æ˜¯ç›´æ¥å¾—åˆ°ç»„ä»¶å®ä¾‹ï¼Œä½¿ç”¨åå¯ä»¥ç›´æ¥è°ƒç”¨ç»„ä»¶çš„æ–¹æ³•æˆ–è®¿é—®æ•°æ®ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸ªç”¨ refæ¥è®¿é—®ç»„ä»¶çš„ä¾‹å­ï¼š 1234567891011121314151617181920212223242526// component-a å­ç»„ä»¶export default { data () { return { title: 'Vue.js' } }, methods: { sayHello () { window.alert('Hello'); } }}// çˆ¶ç»„ä»¶&lt;template&gt; &lt;component-a ref=&quot;comA&quot;&gt;&lt;/component-a&gt;&lt;/template&gt;&lt;script&gt; export default { mounted () { const comA = this.$refs.comA; console.log(comA.title); // Vue.js comA.sayHello(); // å¼¹çª— } }&lt;/script&gt; ä¸è¿‡ï¼Œè¿™ä¸¤ç§æ–¹æ³•çš„å¼Šç«¯æ˜¯ï¼Œæ— æ³•åœ¨è·¨çº§æˆ–å…„å¼Ÿé—´é€šä¿¡ã€‚ 1234// parent.vue&lt;component-a&gt;&lt;/component-a&gt;&lt;component-b&gt;&lt;/component-b&gt;&lt;component-b&gt;&lt;/component-b&gt; æˆ‘ä»¬æƒ³åœ¨ component-a ä¸­ï¼Œè®¿é—®åˆ°å¼•ç”¨å®ƒçš„é¡µé¢ä¸­ï¼ˆè¿™é‡Œå°±æ˜¯ parent.vueï¼‰çš„ä¸¤ä¸ª component-b ç»„ä»¶ï¼Œé‚£è¿™ç§æƒ…å†µä¸‹ï¼Œå°±å¾—é…ç½®é¢å¤–çš„æ’ä»¶æˆ–å·¥å…·äº†ï¼Œæ¯”å¦‚ Vuex å’Œ Bus çš„è§£å†³æ–¹æ¡ˆã€‚","link":"/2019/08/04/Vue%E7%BB%84%E4%BB%B6%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/"},{"title":"Javascript toString()ã€toLocaleString()ã€valueOf()ä¸‰ä¸ªæ–¹æ³•çš„åŒºåˆ«","text":"Arrayã€Booleanã€Dateã€Numberç­‰å¯¹è±¡éƒ½å…·æœ‰toString()ã€toLocaleString()ã€valueOf()ä¸‰ä¸ªæ–¹æ³•ï¼Œé‚£è¿™ä¸‰ä¸ªæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼Ÿï¼Ÿ ä¸€ã€JS Array123456789//ä¾‹å­ï¼švar array = new Array(&quot;ni&quot;,&quot;li&quot;,&quot;mi&quot;);console.log(array.valueOf());console.log(array.toString());console.log(array.toLocaleString());//ç»“æœï¼šArray[3]ni,li,mini,li,mi valueOfï¼šè¿”å›æ•°ç»„æœ¬èº«toString()ï¼šæŠŠæ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç»“æœï¼Œæ¯ä¸€é¡¹ä»¥é€—å·åˆ†å‰²ã€‚toLocalString()ï¼šæŠŠæ•°ç»„è½¬æ¢ä¸ºæœ¬åœ°æ•°ç»„ï¼Œå¹¶è¿”å›ç»“æœã€‚ äºŒã€JS Boolean12345678//ä¾‹å­ï¼švar boolean = new Boolean();console.log(boolean.valueOf());console.log(boolean.toString());//ç»“æœï¼šfalsefalsefalse//è°·æ­Œæµè§ˆå™¨ä¸‹é¢æ˜¯false valueOfï¼šè¿”å› Boolean å¯¹è±¡çš„åŸå§‹å€¼ã€‚toString()ï¼šæ ¹æ®åŸå§‹å¸ƒå°”å€¼æˆ–è€… booleanObject å¯¹è±¡çš„å€¼è¿”å›å­—ç¬¦ä¸² â€œtrueâ€ æˆ– â€œfalseâ€ã€‚é»˜è®¤ä¸ºâ€falseâ€ã€‚toLocalString()ï¼šBooleanå¯¹è±¡æ²¡æœ‰toLocalString()æ–¹æ³•ã€‚ä½†æ˜¯åœ¨Booleanå¯¹è±¡ä¸Šä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚ ä¸‰ã€JS Date123456789//ä¾‹å­ï¼švar date = new Date();console.log(date.valueOf());console.log(date.toString());console.log(date.toLocaleString());//ç»“æœï¼š1528799692512Tue Jun 12 2018 18:34:52 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)2018/6/12 ä¸‹åˆ6:34:52 valueOfï¼šè¿”å› Date å¯¹è±¡çš„åŸå§‹å€¼ï¼Œä»¥æ¯«ç§’è¡¨ç¤ºã€‚toString()ï¼šæŠŠ Date å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç»“æœã€‚ä½¿ç”¨æœ¬åœ°æ—¶é—´è¡¨ç¤ºã€‚toLocalString()ï¼šå¯æ ¹æ®æœ¬åœ°æ—¶é—´æŠŠ Date å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç»“æœï¼Œè¿”å›çš„å­—ç¬¦ä¸²æ ¹æ®æœ¬åœ°è§„åˆ™æ ¼å¼åŒ–ã€‚ å››ã€JS Math1234//ä¾‹å­ï¼šconsole.log(Math.PI.valueOf());//ç»“æœï¼š3.141592653589793 valueOfï¼šè¿”å› Math å¯¹è±¡çš„åŸå§‹å€¼ã€‚ äº”ã€JS Number123456789//ä¾‹å­ï¼švar num = new Number(1337);console.log(num.valueOf());console.log(num.toString());console.log(num.toLocaleString());//ç»“æœï¼š133713371,337 valueOfï¼šè¿”å›ä¸€ä¸ª Number å¯¹è±¡çš„åŸºæœ¬æ•°å­—å€¼ã€‚toString()ï¼šæŠŠæ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä½¿ç”¨æŒ‡å®šçš„åŸºæ•°ã€‚toLocalString()ï¼šæŠŠæ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä½¿ç”¨æœ¬åœ°æ•°å­—æ ¼å¼é¡ºåºã€‚ å…­ã€JS String1234567//ä¾‹å­ï¼š var string = new String(&quot;abc&quot;);console.log(string.valueOf());console.log(string.toString());//ç»“æœï¼šabcabc valueOfï¼šè¿”å›æŸä¸ªå­—ç¬¦ä¸²å¯¹è±¡çš„åŸå§‹å€¼ã€‚toString()ï¼šè¿”å›å­—ç¬¦ä¸²ã€‚ ä¸ƒã€toString()æ–¹æ³•ä¸toLocalString()æ–¹æ³•åŒºåˆ«ï¼štoLocalString()æ˜¯è°ƒç”¨æ¯ä¸ªæ•°ç»„å…ƒç´ çš„ toLocaleString() æ–¹æ³•ï¼Œç„¶åä½¿ç”¨åœ°åŒºç‰¹å®šçš„åˆ†éš”ç¬¦æŠŠç”Ÿæˆçš„å­—ç¬¦ä¸²è¿æ¥èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ toString()æ–¹æ³•è·å–çš„æ˜¯String(ä¼ ç»Ÿå­—ç¬¦ä¸²),è€ŒtoLocaleString()æ–¹æ³•è·å–çš„æ˜¯LocaleString(æœ¬åœ°ç¯å¢ƒå­—ç¬¦ä¸²)ã€‚ LocaleString()ä¼šæ ¹æ®ä½ æœºå™¨çš„æœ¬åœ°ç¯å¢ƒæ¥è¿”å›å­—ç¬¦ä¸²ï¼Œå®ƒå’ŒtoString()è¿”å›çš„å€¼åœ¨ä¸åŒçš„æœ¬åœ°ç¯å¢ƒä¸‹ä½¿ç”¨çš„ç¬¦å·ä¼šæœ‰å¾®å¦™çš„å˜åŒ–ã€‚ æ‰€ä»¥ä½¿ç”¨toString()æ˜¯ä¿é™©çš„ï¼Œè¿”å›å”¯ä¸€å€¼çš„æ–¹æ³•,å®ƒä¸ä¼šå› ä¸ºæœ¬åœ°ç¯å¢ƒçš„æ”¹å˜è€Œå‘ç”Ÿå˜åŒ–ã€‚å¦‚æœæ˜¯ä¸ºäº†è¿”å›æ—¶é—´ç±»å‹çš„æ•°æ®ï¼Œæ¨èä½¿ç”¨LocaleString()ã€‚","link":"/2018/06/17/Javascript-toString-%E3%80%81toLocaleString-%E3%80%81valueOf-%E4%B8%89%E4%B8%AA%E6%96%B9%E6%B3%95%E7%9A%84%E5%8C%BA%E5%88%AB/"},{"title":"TypeError: token.type.endsWith is not a function vue eslint æŠ¥é”™é—®é¢˜ä¿®å¤","text":"é—®é¢˜ç°è±¡ç»´æŠ¤äº†å¾ˆä¹…çš„vueé¡¹ç›®ï¼Œå‘ç° eslint ä¼šæŠ¥é”™ token.type.endsWith is not a function é—®é¢˜åŸå› babel-eslint npmåŒ…å·²è¢«å¼ƒç”¨ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ä¸‹è½½åˆ°è¿™ä¸ªåŒ…ï¼Œå¯¼è‡´é¡¹ç›®ç¼ºå°‘ä¾èµ–æŠ¥é”™ é—®é¢˜è§£å†³å°†å¼ƒç”¨çš„babel-eslint æ¢æˆ@babel/eslint-parserå³å¯ ç§»é™¤ babel-eslint æ·»åŠ ï¼š 123&quot;eslint&quot;: &quot;7.30.0&quot;,&quot;eslint-plugin-vue&quot;: &quot;6.2.2&quot;,&quot;@babel/eslint-parser&quot;: &quot;7.15.8&quot;, åœ¨.eslintrc.jsæ–‡ä»¶å†…æ·»åŠ  123parserOptions: { parser: '@babel/eslint-parser'}, æœ€åè¿™ä¸ªé—®é¢˜æˆåŠŸè§£å†³ issueä¸Šä¹Ÿæœ‰è®¨è®ºè¿‡è¿™ä¸ªé—®é¢˜ï¼Œ #issue é“¾æ¥","link":"/2021/12/18/TypeError-token-type-endsWith-is-not-a-function-vue-eslint-%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98%E4%BF%AE%E5%A4%8D/"},{"title":"css3å¥‡å¶é€‰æ‹©","text":"ç¬¬ä¸€ç§ï¼šç®€å•æ•°å­—åºå·å†™æ³•:nth-child(number) ç›´æ¥åŒ¹é…ç¬¬numberä¸ªå…ƒç´ ã€‚å‚æ•°numberå¿…é¡»ä¸ºå¤§äº0çš„æ•´æ•°ã€‚ ä¾‹å­ï¼š 123ä»£ç å¦‚ä¸‹:li:nth-child(3){background:orange;} ç¬¬äºŒç§ï¼šå€æ•°å†™æ³•:nth-child(an) åŒ¹é…æ‰€æœ‰å€æ•°ä¸ºaçš„å…ƒç´ ã€‚å…¶ä¸­å‚æ•°anä¸­çš„å­—æ¯nä¸å¯ç¼ºçœï¼Œå®ƒæ˜¯å€æ•°å†™æ³•çš„æ ‡å¿—ï¼Œå¦‚3nã€5nã€‚ ä¾‹å­ï¼š 123ä»£ç å¦‚ä¸‹:li:nth-child(3n){background:orange;} ç¬¬ä¸‰ç§ï¼šå€æ•°åˆ†ç»„åŒ¹é…:nth-child(an+b) ä¸ :nth-child(an-b) å…ˆå¯¹å…ƒç´ è¿›è¡Œåˆ†ç»„ï¼Œæ¯ç»„æœ‰aä¸ªï¼Œbä¸ºç»„å†…æˆå‘˜çš„åºå·ï¼Œå…¶ä¸­å­—æ¯nå’ŒåŠ å·+ä¸å¯ç¼ºçœï¼Œä½ç½®ä¸å¯è°ƒæ¢ï¼Œè¿™æ˜¯è¯¥å†™æ³•çš„æ ‡å¿—ï¼Œå…¶ä¸­a,bå‡ä¸ºæ­£æ•´æ•°æˆ–0ã€‚å¦‚3n+1ã€5n+1ã€‚ä½†åŠ å·å¯ä»¥å˜ä¸ºè´Ÿå·ï¼Œæ­¤æ—¶åŒ¹é…ç»„å†…çš„ç¬¬a-bä¸ªã€‚ï¼ˆå…¶å®anå‰é¢ä¹Ÿå¯ä»¥æ˜¯è´Ÿå·ï¼Œä½†ç•™ç»™ä¸‹ä¸€éƒ¨åˆ†è®²ã€‚ï¼‰ ä¾‹å­ï¼š 1234567ä»£ç å¦‚ä¸‹:li:nth-child(3n+1){background:orange;} li:nth-child(3n+5){background:orange;} li:nth-child(5n-1){background:orange;} li:nth-child(3nÂ±0){background:orange;}li:nth-child(Â±0n+3){background:orange;} ç¬¬å››ç§ï¼šåå‘å€æ•°åˆ†ç»„åŒ¹é…:nth-child(-an+b) æ­¤å¤„ä¸€è´Ÿä¸€æ­£ï¼Œå‡ä¸å¯ç¼ºçœï¼Œå¦åˆ™æ— æ„ä¹‰ã€‚è¿™æ—¶ä¸:nth-child(an+1)ç›¸ä¼¼ï¼Œéƒ½æ˜¯åŒ¹é…ç¬¬1ä¸ªï¼Œä½†ä¸åŒçš„æ˜¯å®ƒæ˜¯å€’ç€ç®—çš„ï¼Œä»ç¬¬bä¸ªå¼€å§‹å¾€å›ç®—ï¼Œæ‰€ä»¥å®ƒæ‰€åŒ¹é…çš„æœ€å¤šä¹Ÿä¸ä¼šè¶…è¿‡bä¸ªã€‚ ä¾‹å­ï¼š 123ä»£ç å¦‚ä¸‹:li:nth-child(-3n+8){background:orange;}li:nth-child(-1n+8){background:orange;} ç¬¬äº”ç§ï¼šå¥‡å¶åŒ¹é…:nth-child(odd) ä¸ :nth-child(even) åˆ†åˆ«åŒ¹é…åºå·ä¸ºå¥‡æ•°ä¸å¶æ•°çš„å…ƒç´ ã€‚å¥‡æ•°(odd)ä¸(2n+1)ç»“æœä¸€æ ·ï¼›å¶æ•°(even)ä¸(2n+0)åŠ(2n)ç»“æœä¸€æ ·ã€‚","link":"/2019/09/22/css3%E5%A5%87%E5%81%B6%E9%80%89%E6%8B%A9/"},{"title":"forEachçš„åŸç”Ÿå†™æ³•","text":"forEachä½œç”¨: å¾ªç¯éå†æ•°ç»„ç‰¹ç‚¹:ä¸æ”¹å˜åŸæ•°ç»„ï¼Œè¿”å›å€¼ä¸ºundefinedã€‚æ”¹å˜ä¸äº†æ•°ç»„çš„éå†(return/breakä¸å¥½ä½¿ï¼Œä¼šæŠ¥é”™) æºç å®ç° 123456Array.prototype.myForEach = function(func) { var len = this.length; for(var i = 0; i &lt; len; i++) { func(this[i], i); }}","link":"/2019/12/29/forEach%E7%9A%84%E5%8E%9F%E7%94%9F%E5%86%99%E6%B3%95/"},{"title":"mapçš„åŸç”Ÿå†™æ³•","text":"mapç‰¹ç‚¹:mapå¤„ç†returnå‡ºæ¥çš„å€¼ï¼ŒæŠŠå€¼æ”¾åœ¨ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œé»˜è®¤è¿”å›undefinedã€‚æµ…æ‹·è´ï¼Œä¼šæ”¹å˜åŸæ•°ç»„ã€‚æµ…åº¦mapå®ç° 12345678Array.prototype.myMap = function(func) { var len = this.length, newArr = []; for(var i = 0; i &lt; len; i++) { newArr.push(func(this[i], i)); } return newArr;} æ·±åº¦mapå®ç° 1234567891011121314151617181920212223242526272829303132333435363738// æ·±åº¦å…‹éš†function deepClone(target, option) { if(option !== null) { for(var prop in option) { var src = target[prop], copy = option[prop]; if(typeof(copy) === 'object') { if(Object.prototype.toString(copy) === '[object Array]') { src = []; }else { src = {}; } target[prop] = deepClone(src, copy); }else { target[prop] = copy; } } } return target;}Array.prototype.myMap = function(func) { var len = this.length, newArr = []; for(var i = 0; i &lt; len; i++) { if(this[i] &amp;&amp; Object.prototype.toString.call(this[i]) === '[object Object]') { var newObj = {}; deepClone(newObj, this[i]); newArr.push(func(newObj, i)); }else if(this[i] &amp;&amp; Object.prototype.toString.call(this[i]) === '[object Array]') { var Arr = []; deepClone(newArr, this[i]); newArr.push(func(Arr, i)); }else { newArr.push(func(this[i], i)); } } return newArr;}","link":"/2020/03/29/map%E7%9A%84%E5%8E%9F%E7%94%9F%E5%86%99%E6%B3%95/"},{"title":"filterçš„åŸç”Ÿå†™æ³•","text":"filterä½œç”¨: filterç­›é€‰æ•°ç»„ï¼Œç­›é€‰å‡ºæ–°çš„æ•°ç»„ã€‚ç‰¹ç‚¹: ç­›é€‰çš„å€¼ç”±returnæ¥å†³å®šï¼Œä¼šæ”¾åœ¨ä¸€ä¸ªæ–°çš„æ•°ç»„ä¸­è¿”å›ã€‚ æºç å®ç° 12345678910Array.prototype.myFilter = function(func) { var len = this.length, newArr = []; for(var i = 0; i &lt; len; i++) { if(func(this[i], i)) { newArr.push(this[i]); } } return newArr;}","link":"/2020/03/21/filter%E7%9A%84%E5%8E%9F%E7%94%9F%E5%86%99%E6%B3%95/"},{"title":"jsåˆ¤æ–­æ˜¯å¦å¯ä»¥æ‰“å¼€æœ¬åœ°è½¯ä»¶","text":"js åˆ¤æ–­æ˜¯å¦å®‰è£…æ’ä»¶ éœ€æ±‚ï¼šç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œç„¶åæ‰“å¼€æœ¬åœ°çš„è½¯ä»¶ã€‚ç±»ä¼¼ä¸€äº›ç½‘ç«™æ‰“å¼€ qq ä¸€æ ·ã€‚ä½†æ˜¯åæ¥é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæœ¬åœ°æ²¡æœ‰å®‰è£…è¿™ä¸ªæŒ‡å®šçš„è½¯ä»¶ï¼Œåˆ™æ— æ³•æ‰“å¼€ã€‚æ‰€ä»¥éœ€è¦åˆ¤æ–­å½“å‰çš„ç”µè„‘æ˜¯å¦å·²ç»å®‰è£…æŒ‡å®šè½¯ä»¶ï¼Œå¦‚æœå·²å®‰è£…ï¼Œåˆ™æ‰“å¼€è½¯ä»¶ï¼›å¦åˆ™ï¼Œå¼¹å‡ºæ¨¡æ€æ¡†ï¼Œæç¤ºä¸‹è½½å¹¶å®‰è£…è½¯ä»¶ã€‚å¦‚æœæœ¬åœ°å®‰è£…äº†æ’ä»¶ï¼Œå½“å°è¯•ä½¿ç”¨æ’ä»¶æ‰“å¼€æ—¶ï¼Œwindowåè§¦å‘bluräº‹ä»¶ï¼›å¦‚æœæ— æ³•æ‰“å¼€æ’ä»¶ï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿã€‚ æ ¹æ®è¿™ä¸ªåŸç†ï¼Œè¿›è¡Œä¸€ä¸ªç®€å•çš„å°è£…ã€‚ï¼ˆå…¶å®ä¹Ÿä¸ç®—æ˜¯å°è£…ï¼Œåªæ˜¯ç®€å•çš„æŠŠå…¶ä¸­çš„åŸç†å±•ç°å‡ºæ¥è€Œå·²ï¼‰ è¿™é‡Œä½¿ç”¨çš„æ˜¯es5ä»£ç ï¼Œä¸»è¦æ˜¯ä¸ºäº†å…¼ä»»ä½ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œå¯ä»¥åœ¨ç†è§£å…¶ä¸­çš„åŸç†åï¼Œç§»æ¤åˆ°ç›¸åº”çš„é¡¹ç›®æˆ–è€…æ¡†æ¶ã€‚ 1234567891011121314151617181920212223242526272829303132// doméƒ¨åˆ†&lt;p class=&quot;link&quot; data-link=&quot;blahblah:randomstuff&quot;&gt;plugin 1&lt;/p&gt;&lt;p class=&quot;link&quot; data-link=&quot;mailto:johndoe@somewhere.com&quot;&gt;plugin 2&lt;/p&gt;&lt;p class=&quot;link&quot; data-link=&quot;tencent://message&quot;&gt;plugin 3&lt;/p&gt;// jséƒ¨åˆ†var links = document.getElementsByClassName('link')var readyToBlur = falsevar hasPlugin = nullvar timeout = 1000window.addEventListener('blur', function () { if (readyToBlur) { hasPlugin = true console.log('has plugin') }})for (var i = 0; i &lt; links.length; i++) { (function (id, win) { links[id].addEventListener('click', function () { readyToBlur = true hasPlugin = false window.location.href = links[id].getAttribute('data-link') var t = setTimeout(function () { win.readyToBlur = false !hasPlugin &amp;&amp; onHasNoPlugin(links[id].innerText) clearTimeout(t) }, timeout) }) })(i, window)}function onHasNoPlugin(pluginName) { console.log('no plugin: ' + pluginName)} åŸç†åˆ†æ æ‰“å¼€æœ¬åœ°æ’ä»¶ï¼ˆè½¯ä»¶ï¼Œä¾‹å¦‚ qqï¼‰çš„æ–¹æ³•åŸºæœ¬æ˜¯è®©æµè§ˆå™¨çš„ url å‘ç”Ÿæ”¹å˜ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹æ–¹æ³•ï¼š 123ä½¿ç”¨aæ ‡ç­¾ï¼Œå¹¶ä½¿ç”¨hrefå±æ€§ã€‚&lt;a href=&quot;plugin:data&quot;&gt;plugin&lt;/a&gt;window.location.href = 'plugin:data'window.open('plugin:data') è¿™é‡Œä½¿ç”¨çš„æ˜¯ç¬¬äºŒç§æ–¹æ³•ã€‚ç¬¬ä¸€ç§ä¸å¥½åšæ‹¦æˆªï¼Œç¬¬ä¸‰ç§æ— è®ºæ˜¯å¦å®‰è£…éƒ½ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„çª—å£ã€‚ å½“å°è¯•æ‰“å¼€è½¯ä»¶æ—¶ï¼Œå¼€å§‹ç›‘å¬windowçš„bluräº‹ä»¶ã€‚åœ¨æŒ‡å®šçš„äº‹ä»¶å†…ï¼Œå¦‚æœè§¦å‘äº†bluräº‹ä»¶ï¼Œè¯´æ˜è½¯ä»¶å·²ç»å®‰è£…ï¼Œä¿®æ”¹hasPluginæ ‡è¯†ï¼›å¦åˆ™æ— æ“ä½œã€‚ç„¶åå½“æ—¶é—´åˆ°æœŸæ—¶ï¼Œç§»é™¤ç›‘å¬ï¼Œå¹¶åˆ¤æ–­hasPluginçš„å€¼ï¼Œå¦‚æœä¸ºfalseï¼Œåˆ™è¯´æ˜æ²¡æœ‰å®‰è£…æ’ä»¶ï¼Œæ‰§è¡Œç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚ å¦å¤–è¿˜éœ€æ³¨æ„ä¸€ç‚¹ï¼Œè¿™é‡Œè®¾ç½®çš„ timeout æ˜¯æ ¹æ®å®é™…æƒ…å†µè€Œå®šçš„ï¼Œå› ä¸ºæœ‰ä¸€äº›è½¯ä»¶æ‰“å¼€çš„é€Ÿåº¦å¯èƒ½å¾ˆæ…¢ï¼Œä¸ä¼šåƒ qq è¿™æ ·çš„è½¯ä»¶ä¸€ç‚¹å‡»å°±ä¼šé©¬ä¸Šæ‰“å¼€ï¼Œæ‰€ä»¥è¿™é‡ŒæŠŠç›‘å¬çš„ timeout è®¾ç½®ä¸º 1 ç§’ã€‚","link":"/2018/10/14/js%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%89%93%E5%BC%80%E6%9C%AC%E5%9C%B0%E8%BD%AF%E4%BB%B6/"},{"title":"nodeç‰ˆæœ¬åˆ‡æ¢å·¥å…·nçš„ä½¿ç”¨ä»‹ç»","text":"nodeç‰ˆæœ¬åˆ‡æ¢å·¥å…·nçš„ä½¿ç”¨ä»‹ç»näº¤äº’å¼ç®¡ç† Node.js ç‰ˆæœ¬ æ”¯æŒçš„å¹³å°nåœ¨ macOSã€Linuxï¼ˆåŒ…æ‹¬é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿï¼‰å’Œå„ç§å…¶ä»–ç±» Unix ç³»ç»Ÿä¸Šå‡å—æ”¯æŒã€‚å®ƒè¢«ç¼–å†™ä¸º BASH è„šæœ¬ï¼Œä½†ä¸éœ€è¦æ‚¨ä½¿ç”¨ BASH ä½œä¸ºæ‚¨çš„å‘½ä»¤å¤–å£³ã€‚ n åœ¨ Microsoft Windowsï¼ˆå¦‚ PowerShellï¼‰çš„æœ¬æœº shellã€Windows BASH çš„ Git æˆ– Cygwin DLL ä¸­ä¸èµ·ä½œç”¨ã€‚ å…¨å±€å®‰è£…1npm install -g n macçš„å®‰è£…ç›®å½•/usr/local/n/versions/node/13.2.0å› æ­¤é¦–å…ˆåœ¨/usr/local/åˆ›å»ºç›®å½•nï¼Œä¿®æ”¹æƒé™ä¸ºæ™®é€šè®¿é—®æƒé™ï¼Œè¿™æ ·åç»­æ“ä½œå°±ä¸éœ€è¦ä½¿ç”¨sudo åŸºæœ¬æ“ä½œ123456789n x.x.x å®‰è£…æŸä¸ªç‰ˆæœ¬n latest å®‰è£…æœ€æ–°ç‰ˆæœ¬n stable å®‰è£…ç¨³å®šç‰ˆæœ¬ltsn rm x.x.x åˆ é™¤æŸä¸ªç‰ˆæœ¬n use 7.10.0 some.js ç”¨åˆ¶å®šçš„ç‰ˆæœ¬æ‰§è¡Œè„šæœ¬n å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å·²å®‰è£…çš„nodeç‰ˆæœ¬ï¼Œå¯ä»¥æ ¹æ®ä¸Šä¸‹å’Œå›è½¦é€‰æ‹©è¦ä½¿ç”¨çš„ç‰ˆæœ¬n help å¸®åŠ©ä¿¡æ¯n ls æŸ¥çœ‹å·²ç»å®‰è£…çš„ç‰ˆæœ¬n ls-remote --all æŸ¥çœ‹æœåŠ¡å™¨ä¸Šæ‰€æœ‰å¯ç”¨çš„ç‰ˆæœ¬","link":"/2021/09/12/node%E7%89%88%E6%9C%AC%E5%88%87%E6%8D%A2%E5%B7%A5%E5%85%B7n%E7%9A%84%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D/"},{"title":"pm2çš„åŸºæœ¬ä½¿ç”¨","text":"PM2PM2 æ˜¯ä¸€ä¸ªå¸¦æœ‰è´Ÿè½½å‡è¡¡åŠŸèƒ½çš„ Node åº”ç”¨è¿›ç¨‹ç®¡ç†å™¨ã€‚ ä¸»è¦ç‰¹æ€§ï¼š å†…å»ºè´Ÿè½½å‡è¡¡ï¼ˆä½¿ç”¨ Node cluster é›†ç¾¤æ¨¡å—ï¼‰ åå°è¿è¡Œ 0 ç§’åœæœºé‡è½½ å…·æœ‰ Ubuntu å’Œ CentOS çš„å¯åŠ¨è„šæœ¬ åœæ­¢ä¸ç¨³å®šçš„è¿›ç¨‹ï¼ˆé¿å…æ— é™å¾ªç¯ï¼‰ æ§åˆ¶å°æ£€æµ‹ æä¾› HTTP API è¿œç¨‹æ§åˆ¶å’Œå®æ—¶çš„æ¥å£ APIï¼ˆNodejs æ¨¡å—ï¼Œå…è®¸å’Œ PM2 è¿›ç¨‹ç®¡ç†å™¨äº¤äº’ï¼‰ å…¨å±€å®‰è£…pm21npm install -g pm2 å¯åŠ¨è¿›ç¨‹12345pm2 start app.js//é‡å‘½åè¿›ç¨‹pm2 start app.js --name wb123//ç›‘å¬ä»£ç å˜åŒ–pm2 start app.js --watch ç»“æŸè¿›ç¨‹123pm2 stop app.js//ç»“æŸæ‰€æœ‰è¿›ç¨‹pm2 stop all åˆ é™¤è¿›ç¨‹123pm2 delete www//åˆ é™¤æ‰€æœ‰è¿›ç¨‹pm2 delete all æŸ¥çœ‹è¿›ç¨‹123456//åˆ—å‡ºæ‰€æœ‰è¿›ç¨‹pm2 list//æŸ¥çœ‹æŸä¸ªè¿›ç¨‹æƒ…å†µpm2 describe app.js//æŸ¥çœ‹è¿›ç¨‹èµ„æºæ¶ˆè€—æƒ…å†µpm2 monit PM2æ—¥å¿—123pm2 logs//æŸ¥çœ‹æŸä¸ªè¿›ç¨‹çš„æ—¥å¿—pm2 logs app.js é‡å¯è¿›ç¨‹123pm2 restart app.js//é‡å¯æ‰€æœ‰è¿›ç¨‹pm2 restart all PM2ä¸‹ä½¿ç”¨ æ‰§è¡Œnpmå‘½ä»¤123npm run dev ç­‰åŒäº pm2 start npm -- run devnpm start ç­‰åŒäº pm2 start npm -- start å‘½åè¿›ç¨‹å123pm2 start npm --name test -- run devpm2 start npm --name test -- start è¯­æ³•ï¼š pm2 start npm --watch --name &lt;taskname&gt; -- run &lt;scriptname&gt; å…¶ä¸­ â€“ watchç›‘å¬ä»£ç å˜åŒ–ï¼Œâ€“ nameé‡å‘½åä»»åŠ¡åç§°ï¼Œâ€“ runåé¢è·Ÿè„šæœ¬åå­—","link":"/2021/12/26/pm2%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},{"title":"reactçˆ¶å­ç»„ä»¶é€šä¿¡","text":"å­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶ï¼š1ï¼‰åœ¨çˆ¶ç»„ä»¶è®¾ç½®å¯¹åº”çš„å±æ€§å’Œæ–¹æ³•ï¼›2ï¼‰å°†çˆ¶ç»„ä»¶çš„å±æ€§ï¼Œæ–¹æ³•è®¾ç½®åœ¨å­ç»„ä»¶çš„æ ‡ç­¾å±æ€§ä¸Šï¼›3ï¼‰å­ç»„ä»¶ä¸­åˆ©ç”¨this.propsæ¥è°ƒç”¨çˆ¶ç»„ä»¶çš„æˆå‘˜ï¼› exampleï¼š123456789101112131415161718//çˆ¶ç»„ä»¶ï¼švar parent=React.cleateClass({ getDefaultProps:function(){ alert(&quot;çˆ¶ç»„ä»¶æ–¹æ³•&quot;) }, render:function(){ return &lt;children a=&quot;233&quot; getDefaultProps={this.getDefaultProps}&gt;&lt;/children&gt; }})//å­ç»„ä»¶ï¼švar children=react.createClass({ render:fucntion(){ return &lt;div&gt; &lt;p&gt;ä»çˆ¶ç»„ä»¶å–å¾—çš„å€¼ï¼š{this.props.a}&lt;/p&gt; &lt;button onClick={this.props.getDefaultProps}&gt;å­ç»„ä»¶æŒ‰é’®&lt;/button&gt; &lt;/div&gt; }}) çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶ï¼š1ï¼‰åœ¨çˆ¶ç»„ä»¶ä¸­çš„å­ç»„ä»¶åˆ©ç”¨refå¯¹å­ç»„ä»¶æ ‡æ³¨å¼•ç”¨ï¼›2ï¼‰åœ¨çˆ¶ç»„ä»¶ä¸­åˆ©ç”¨thisï¼Œrefsè·å–å­ç»„ä»¶çš„å¼•ç”¨ï¼Œä»è€Œè°ƒç”¨å­ç»„ä»¶çš„æˆå‘˜ï¼› exampleï¼š12345678910111213141516171819202122//çˆ¶ç»„ä»¶ï¼švar parent=React.cleateClass({ getDS:function(){ this.refs.one.hands(); }, render:function(){ return &lt;div&gt; &lt;children ref=&quot;one&quot;&gt;&lt;/children&gt; &lt;button onClick={this.getDS}&gt;å‘èµ·è¯·æ±‚&lt;/button&gt; &lt;/div&gt; }})//å­ç»„ä»¶ï¼švar children=React.createClass({ hands:function(){ alert('çˆ¶ç»„ä»¶è°ƒç”¨æˆåŠŸ'); } render:fucntion(){ return &lt;div&gt;&lt;/div&gt; }})","link":"/2017/09/01/react%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/"},{"title":"viteåˆä½“éªŒ","text":"Vite â€”â€” ä¸€ç§æ–°çš„ã€æ›´å¿«åœ° web å¼€å‘å·¥å…·ã€‚ vite æ˜¯ä»€ä¹ˆvite â€”â€” ä¸€ä¸ªç”± vue ä½œè€…å°¤é›¨æºªå¼€å‘çš„ web å¼€å‘å·¥å…·ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š 1.å¿«é€Ÿçš„å†·å¯åŠ¨ 2.å³æ—¶çš„æ¨¡å—çƒ­æ›´æ–° 3.çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ Viteä»‹ç»Viteï¼Œä¸€ä¸ªåŸºäºæµè§ˆå™¨åŸç”Ÿ ES imports çš„å¼€å‘æœåŠ¡å™¨ã€‚åˆ©ç”¨æµè§ˆå™¨å»è§£æ importsï¼Œåœ¨æœåŠ¡å™¨ç«¯æŒ‰éœ€ç¼–è¯‘è¿”å›ï¼Œå®Œå…¨è·³è¿‡äº†æ‰“åŒ…è¿™ä¸ªæ¦‚å¿µï¼ŒæœåŠ¡å™¨éšèµ·éšç”¨ã€‚åŒæ—¶ä¸ä»…æœ‰ Vue æ–‡ä»¶æ”¯æŒï¼Œè¿˜æå®šäº†çƒ­æ›´æ–°ï¼Œè€Œä¸”çƒ­æ›´æ–°çš„é€Ÿåº¦ä¸ä¼šéšç€æ¨¡å—å¢å¤šè€Œå˜æ…¢ã€‚é’ˆå¯¹ç”Ÿäº§ç¯å¢ƒåˆ™å¯ä»¥æŠŠåŒä¸€ä»½ä»£ç ç”¨ rollup æ‰“åŒ…ã€‚ è‹±æ–‡æ–‡æ¡£ ä¸­æ–‡æ–‡æ¡£ GitHub æ­å»ºç¬¬ä¸€ä¸ª Vite é¡¹ç›®å…¼å®¹æ€§æ³¨æ„ Vite éœ€è¦ Node.js ç‰ˆæœ¬ &gt;= 12.0.0ã€‚ ä½¿ç”¨ NPM: 1npm init @vitejs/app ä½¿ç”¨ Yarn: 1yarn create @vitejs/app é€šè¿‡å¦‚ä¸‹å‘½ä»¤æ­å»º 1234npm init vite-app &lt;project-name&gt;cd &lt;project-name&gt;npm installnpm run dev æ­å»ºåçš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š å› ä¸º Vite æ˜¯ä¸€ä¸ªåŸºäºåŸç”Ÿ ESM çš„å¼€å‘æœåŠ¡å™¨ï¼Œæ‰€ä»¥å¯ä»¥çœ‹å‡ºæ˜¯ç§’å¯åŠ¨çš„ã€‚ åˆå§‹åŒ–æ­å»ºçš„demoä¹Ÿæ¯”è¾ƒç®€å• çœ‹ä¸‹package.jsoné‡Œçš„ä»£ç ï¼š 123456789101112131415{ &quot;name&quot;: &quot;vite-app&quot;, &quot;version&quot;: &quot;0.0.0&quot;, &quot;scripts&quot;: { &quot;dev&quot;: &quot;vite&quot;, &quot;build&quot;: &quot;vite build&quot; }, &quot;dependencies&quot;: { &quot;vue&quot;: &quot;^3.0.4&quot; }, &quot;devDependencies&quot;: { &quot;vite&quot;: &quot;^1.0.0-rc.13&quot;, &quot;@vue/compiler-sfc&quot;: &quot;^3.0.4&quot; }} å¯ä»¥çœ‹å‡ºvite æ˜¯å’Œ vue 3 æ­é…ä½¿ç”¨çš„ã€‚ vue 3 æ— è®ºæ€§èƒ½ã€åŒ…å¤§å°è¿˜æœ‰ ts åŠ æŒæ–¹é¢ï¼Œvue 3 éƒ½è¿œä¼˜äº vue 2çš„ã€‚ è€Œbuildçš„è¿‡ç¨‹ï¼Œæ˜¯åˆ©ç”¨ Rollup è¿›è¡Œæ„å»ºçš„ã€‚","link":"/2021/03/20/vite%E5%88%9D%E4%BD%93%E9%AA%8C/"},{"title":"reduceçš„åŸç”Ÿå†™æ³•","text":"reduceç‰¹ç‚¹: reduce() æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå€¼ï¼ˆä»å·¦åˆ°å³ï¼‰å¼€å§‹ç¼©å‡ï¼Œæœ€ç»ˆè®¡ç®—ä¸ºä¸€ä¸ªå€¼ã€‚æºç å®ç° 12345678910111213Array.prototype.myReduceRight = function(func, init) { var prev = init, len = this.length, k = len - 1; if(init === undefined) { prev = this[k]; k = len - 2; } for(k; k &gt;= 0; k --) { prev = func(prev, this[k], k); } return prev;}","link":"/2020/04/19/reduce%E7%9A%84%E5%8E%9F%E7%94%9F%E5%86%99%E6%B3%95/"},{"title":"vue-cliè‡ªå®šä¹‰ç»„ä»¶çš„å¼•ç”¨","text":"åœ¨å¯¹åº”ç»„ä»¶å†…å¼•å…¥ç»„ä»¶1.åœ¨componentsï¼ˆä¸“é—¨æ”¾ç»„ä»¶çš„æ–‡ä»¶ï¼‰ä¸‹åˆ›å»ºä¸€ä¸ªheader.vueæ–‡ä»¶2.åœ¨App.vueæ–‡ä»¶é‡Œæ·»åŠ å¦‚ä¸‹ä»£ç  12345678910 &lt;my-head&gt;&lt;/my-head&gt;import myHead from './components/header' components : { myHead, } å…¨å±€ç»„ä»¶çš„å¼•ç”¨æ³¨å†Œä¸€ä¸ªå…¨å±€ç»„ä»¶è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š 1Vue.component(tagName, options) tagName ä¸ºç»„ä»¶åï¼Œoptions ä¸ºé…ç½®é€‰é¡¹ã€‚æ³¨å†Œåï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ¥è°ƒç”¨ç»„ä»¶ï¼š 1&lt;tagName&gt;&lt;/tagName&gt; å®ä¾‹ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;demo&lt;/title&gt; &lt;script src=&quot;static/js/vue.min.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;!--å…¨å±€ç»„ä»¶--&gt;&lt;div id=&quot;app&quot;&gt; &lt;uuihoo&gt;&lt;/uuihoo&gt;&lt;/div&gt;&lt;script&gt; //æ³¨å†Œ Vue.component('uuihoo',{ template:'&lt;h1&gt;è‡ªå®šä¹‰å…¨å±€ç»„ä»¶&lt;/h1&gt;' }); //åˆ›å»ºæ ¹å®ä¾‹ new Vue({ el:&quot;#app&quot; })&lt;/script&gt; &lt;!--å±€éƒ¨ç»„ä»¶--&gt;&lt;div id=&quot;app1&quot;&gt; &lt;uuihoo1&gt;&lt;/uuihoo1&gt;&lt;/div&gt;&lt;script&gt; //åˆ›å»ºæ ¹å®ä¾‹ new Vue({ el:'#app1', components:{ //&lt;uuihop&gt;å°†åªåœ¨æ¨¡æ¿å¯ç”¨ 'uuihoo1':{template:'&lt;h1&gt;è‡ªå®šä¹‰å±€éƒ¨ç»„ä»¶&lt;/h1&gt;'} } })&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; æ³¨æ„äº‹é¡¹ï¼štagNameä¸èƒ½å’ŒåŸç”Ÿhtmlæ ‡ç­¾åŒåã€‚","link":"/2018/08/19/vue-cli%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84%E5%BC%95%E7%94%A8/"},{"title":"vue-cliå¼€å‘ä¸­ï¼Œajaxè·¨åŸŸè¯·æ±‚æ–¹æ³•","text":"ä½¿ç”¨vue-cliæ„å»ºçš„é¡¹ç›®ï¼Œåœ¨å¼€å‘æ—¶ï¼Œæƒ³è¦è®¿é—®åå°æ¥å£è·å–æ•°æ®ï¼Œè¿™æ—¶å°±ä¼šå‡ºç°è·¨åŸŸé—®é¢˜ã€‚åœ¨config/index.jsä¸­è¿›è¡Œå¦‚ä¸‹é…ç½® ã€å³åœ¨è¿›è¡Œajaxè¯·æ±‚æ—¶ï¼Œåœ°å€ä¸­ä»»ä½•ä»¥/apiå¼€å¤´çš„è¯·æ±‚åœ°å€éƒ½è¢«è§£æä¸ºç›®æ ‡åœ°å€ï¼Œtargetå°±æ˜¯ä½ æƒ³è¦çš„åå°æ¥å£åœ°å€ã€‘ 123456789 proxyTable: { '/api': { target: 'http://www.leheavengame.com', changeOrigin: true, pathRewrite: { '^/api': '' } }} vue-resourceè°ƒç”¨ç¤ºä¾‹12345this.$http.get('/api/main/login', [data]).then(function(response){ // å“åº”æˆåŠŸå›è°ƒ}, function(response){ // å“åº”é”™è¯¯å›è°ƒ}); axiosè°ƒç”¨ç¤ºä¾‹123456789101112axios({ method: 'get', headers: {'Accept': '*/*'}, url: '/api/main/login', data: data}).then(function (response) { console.log(response.data)}).catch(function (error) { console.log(error)}) è®²è§£åŸç†ï¼šåœ¨é…ç½®ä¸­ï¼š target: â€˜http://www.leheavengame.comâ€˜åœ¨ä¸Šæ–¹vue-resourceç¤ºä¾‹ä¸­ ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š /api/user/loginå°±ä¼šè¢«æœ¬åœ°æœåŠ¡å™¨è‡ªåŠ¨è§£æä¸º http://www.leheavengame.com/main/login è€Œè¿™ä¸ªæ­£å¼æˆ‘ä»¬éœ€è¦çš„åœ°å€ã€‚è·¨åŸŸåŸç†ï¼ˆæœ¬åœ°æ–‡ä»¶å‡è£…åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼‰ï¼š é€šè¿‡æµè§ˆå™¨æ‰“å¼€é¡µé¢ï¼Œå½“å‘èµ·è¯·æ±‚æ—¶ï¼šæœ¬åœ°æœåŠ¡å™¨çš„åœ°å€ï¼ˆé€šå¸¸æ˜¯localhost:8080æˆ–è€…127.0.0.1:8080ï¼‰ä¼šæ”¶åˆ°è¿™ä¸ªè¯·æ±‚ï¼Œæ¥ä¸‹æ¥å‘ç°è¿™ä¸ªè¯·æ±‚åœ°å€ä¸­å«æœ‰å­—ç¬¦ä¸² /apiï¼Œé‚£ä¹ˆæœ¬åœ°æœåŠ¡å™¨ä¼šå°†è¯·æ±‚åœ°å€å˜ä¸º http://www.leheavengame.com ï¼ˆé…ç½®åœ°å€ï¼‰ + main/loginï¼ˆè°ƒç”¨æ–¹æ³•å¤„çš„è¯¦ç»†åœ°å€ï¼‰ã€‚åŒæ—¶æœ¬åœ°æœåŠ¡å™¨çš„åœ°å€ä¼šç”±localhost:8080 å˜ä¸ºhttp://www.leheavengame.com ï¼Œç»“æœå°±æ˜¯ï¼š æˆ‘ä»¬æœ¬åœ°çš„æ–‡ä»¶ä¼šè¢«è®¤ä¸ºæ˜¯æ”¾åœ¨ç›®æ ‡åœ°å€ï¼ˆhttp://www.leheavengame.com ï¼‰æœåŠ¡å™¨ä¸Šçš„ï¼Œå½“å‰æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶è¯·æ±‚æœåŠ¡å™¨å…¶ä»–ä¸œè¥¿ï¼Œè‡ªç„¶å°±ä¸æ˜¯è·¨åŸŸäº†ã€‚","link":"/2017/09/24/vue-cli%E5%BC%80%E5%8F%91%E4%B8%AD%EF%BC%8Cajax%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95/"},{"title":"vue-routerä¸­keep-aliveçš„ä½œç”¨","text":"keep-alive ç®€ä»‹keep-alive æ˜¯ Vue å†…ç½®çš„ä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥ä½¿è¢«åŒ…å«çš„ç»„ä»¶ä¿ç•™çŠ¶æ€ï¼Œæˆ–é¿å…é‡æ–°æ¸²æŸ“ã€‚ç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼š 12345&lt;keep-alive&gt; &lt;component&gt; &lt;!-- è¯¥ç»„ä»¶å°†è¢«ç¼“å­˜ï¼ --&gt; &lt;/component&gt;&lt;/keep-alive&gt; propsinclude - å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾ï¼Œåªæœ‰åŒ¹é…çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜exclude - å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼Œä»»ä½•åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜ 123456789101112131415161718// ç»„ä»¶ aexport default { name: 'a', data () { return {} }}&lt;keep-alive include=&quot;a&quot;&gt; &lt;component&gt; &lt;!-- name ä¸º a çš„ç»„ä»¶å°†è¢«ç¼“å­˜ï¼ --&gt; &lt;/component&gt;&lt;/keep-alive&gt;å¯ä»¥ä¿ç•™å®ƒçš„çŠ¶æ€æˆ–é¿å…é‡æ–°æ¸²æŸ“&lt;keep-alive exclude=&quot;a&quot;&gt; &lt;component&gt; &lt;!-- é™¤äº† name ä¸º a çš„ç»„ä»¶éƒ½å°†è¢«ç¼“å­˜ ï¼--&gt; &lt;/component&gt;&lt;/keep-alive&gt;&lt;!--å¯ä»¥ä¿ç•™å®ƒçš„çŠ¶æ€æˆ–é¿å…é‡æ–°æ¸²æŸ“ ï¼--&gt; ä½¿ç”¨ router.meta æ‹“å±•123456789101112131415161718192021222324252627// routes é…ç½®export default [ { path: '/', name: 'home', component: Home, meta: { keepAlive: true // éœ€è¦è¢«ç¼“å­˜ } }, { path: '/:id', name: 'edit', component: Edit, meta: { keepAlive: false // ä¸éœ€è¦è¢«ç¼“å­˜ } }]&lt;keep-alive&gt; &lt;router-view v-if=&quot;$route.meta.keepAlive&quot;&gt; &lt;!-- è¿™é‡Œæ˜¯ä¼šè¢«ç¼“å­˜çš„è§†å›¾ç»„ä»¶ï¼Œæ¯”å¦‚ Homeï¼ --&gt; &lt;/router-view&gt;&lt;/keep-alive&gt;&lt;router-view v-if=&quot;!$route.meta.keepAlive&quot;&gt; &lt;!-- è¿™é‡Œæ˜¯ä¸è¢«ç¼“å­˜çš„è§†å›¾ç»„ä»¶ï¼Œæ¯”å¦‚ Editï¼ --&gt;&lt;/router-view&gt; åœ¨éå•é¡µåº”ç”¨çš„æ—¶å€™ï¼Œkeep-alive å¹¶ä¸èƒ½æœ‰æ•ˆçš„ç¼“å­˜äº†","link":"/2018/03/23/vue-router%E4%B8%ADkeep-alive%E7%9A%84%E4%BD%9C%E7%94%A8/"},{"title":"vue2è€é¡¹ç›®viteå‡çº§æ”¹é€ ","text":"å‰è¨€ Viteæ˜¯ä¸€ç§æ–°å‹å‰ç«¯æ„å»ºå·¥å…·ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡å‰ç«¯å¼€å‘ä½“éªŒã€‚å®ƒä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨ï¼Œå®ƒåŸºäº åŸç”Ÿ ES æ¨¡å— æä¾›äº† ä¸°å¯Œçš„å†…å»ºåŠŸèƒ½ï¼Œå¦‚é€Ÿåº¦å¿«åˆ°æƒŠäººçš„ æ¨¡å—çƒ­æ›´æ–°ï¼ˆHMRï¼‰ã€‚ ä¸€å¥—æ„å»ºæŒ‡ä»¤ï¼Œå®ƒä½¿ç”¨ Rollup æ‰“åŒ…ä½ çš„ä»£ç ï¼Œå¹¶ä¸”å®ƒæ˜¯é¢„é…ç½®çš„ï¼Œå¯è¾“å‡ºç”¨äºç”Ÿäº§ç¯å¢ƒçš„é«˜åº¦ä¼˜åŒ–è¿‡çš„é™æ€èµ„æºã€‚ Vite æ„åœ¨æä¾›å¼€ç®±å³ç”¨çš„é…ç½®ï¼ŒåŒæ—¶å®ƒçš„ æ’ä»¶ API å’Œ JavaScript API å¸¦æ¥äº†é«˜åº¦çš„å¯æ‰©å±•æ€§ï¼Œå¹¶æœ‰å®Œæ•´çš„ç±»å‹æ”¯æŒã€‚ viteåŒ…å«å¦‚ä¸‹ç‰¹ç‚¹ï¼š å…‰é€Ÿå¯åŠ¨ çƒ­æ¨¡å—æ›¿æ¢ æŒ‰éœ€ç¼–è¯‘ æœ¬æ¬¡åœ¨å¼€å‘ç¯å¢ƒå¢åŠ viteçš„å¯åŠ¨æ–¹å¼ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¿æŒåŸæœ‰æ¨¡å¼ã€‚ èƒŒæ™¯ æœ¬æ¬¡æ”¹é€ çš„å·¥ç¨‹æ˜¯å…¬å¸å†…ä¸€ä¸ªå¾ˆé‡è¦ï¼Œè¿­ä»£ç»´æŠ¤äº†3å¹´çš„è€é¡¹ç›®ï¼Œéšç€é¡¹ç›®ä»£ç é‡çš„é€æ¸å¢åŠ ï¼Œé¡¹ç›®å¯åŠ¨é€Ÿåº¦çš„é€Ÿåº¦è¶Šæ¥è¶Šæ…¢ï¼Œå·²ç»ä¸¥é‡å½±å“äº†å¼€å‘æ•ˆç‡ï¼Œå¯åŠ¨æ—¶é—´æ¥è¿‘2åˆ†é’Ÿã€‚ è¯¥é¡¹ç›®ç”±@vue/cli æ­å»ºçš„webpackæ¨¡ç‰ˆï¼Œä¹‹å‰åšè¿‡ä¸€æ¬¡webpack3-&gt;çš„ä¸€æ¬¡å‡çº§ï¼Œç°ä½¿ç”¨webpack4.xç‰ˆæœ¬ã€‚ åœ¨æ­å»ºviteçš„è¿‡ç¨‹ä¸­ï¼Œç†æƒ³çŠ¶å†µæ˜¯ä¸šåŠ¡ä»£ç çš„0æ”¹åŠ¨ã€‚ æ”¹é€ è¿‡ç¨‹ ä¿ç•™webpackçš„é€‰é¡¹ ç”±äºviteä½¿ç”¨ES6 Moduleæ–¹å¼ç»„ç»‡ä»£ç ,index.htmlçš„å¯¼å…¥æ–¹å¼ä¸é€šï¼Œå¤åˆ¶index.html-&gt;prod.html å¹¶ä¿®æ”¹webpack HtmlWebpackPluginæ’ä»¶çš„templateï¼ˆå¼€å‘å’Œç”Ÿäº§é…ç½®ä¼šæœ‰ä¸åŒï¼Œä¿ç•™åŸæœ‰é…ç½®å³å¯ï¼‰ new HtmlWebpackPlugin({ template: â€˜prod.htmlâ€™, }), viteå¼•å…¥å’Œé…ç½® å®‰è£… 1npm i vite --save-dev å¹¶åœ¨æ ¹ç›®å½•æ–°å»ºvite.config.jsæ–‡ä»¶ 123456789101112131415161718192021import { defineConfig } from 'vite' import path from 'path' export default () =&gt; defineConfig({ resolve: { extensions: ['.js', '.vue', '.json', '.less'], alias: { vue: 'vue/dist/vue.esm.js', '@': path.resolve(__dirname, 'src'), } }, server: { port: 8080, // viteé»˜è®¤æ˜¯3000ç«¯å£ï¼Œä¿ç•™åŸæœ‰çš„ç«¯å£å· proxy: { '/api': { target: 'http://baidu.com/', changeOrigin: true, rewrite: path =&gt; path.replace(/^\\/api/, '') } } } }) æ·»åŠ  packge.json ä¸­ scripts å‘½ä»¤ï¼Œå¹¶æ”¹å˜åŸæœ‰çš„webpackå‘½ä»¤ 123456{ &quot;scripts&quot;: { &quot;dev&quot;: &quot;vite&quot; , &quot;dev:w&quot;: &quot;webpack-dev-server --inline --progress --config build/webpack.dev.conf.js --profile&quot; } } ä¿®æ”¹ index.htmlä¸­çš„å…¥å£æ–‡ä»¶å¯¼å…¥æ–¹å¼ é…ç½®å®Œåæˆ‘ä»¬å°±å¯ä»¥å°è¯•è¿è¡Œviteäº† å‘½ä»¤è¡Œè¾“å…¥npm run dev è¿è¡Œåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¾ˆå¤šæŠ¥é”™ï¼Œè¿™ä¹ˆå¤šé”™è¯¯ä¿¡æ¯å¦‚æœæ‰‹åŠ¨ä¿®æ”¹çš„è¯ï¼Œæ— ç–‘æ˜¯ä¸€é¡¹å·¨å¤§çš„å·¥ç¨‹ï¼Œè€Œä¸”è¿™äº›æ”¹åŠ¨æ²¡æœ‰ä»»ä»·å€¼ã€‚é’ˆå¯¹vite å·¥ç¨‹çš„æ”¹é€ ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ’ä»¶è§£å†³å¯¹åº”é—®é¢˜ã€‚ vite-pluginså¼•å…¥ è™½ç„¶ vite å‘å±•å¾ˆå¿«ï¼Œnpm ä¸Šé¢ä¹Ÿé™†é™†ç»­ç»­æœ‰viteçš„æ’ä»¶æ›´æ–°ï¼Œä½†æ˜¯æ€»æœ‰ä¸€äº›æ²¡æœ‰è¦†ç›–åˆ°çš„åœºæ™¯ï¼Œå®˜æ–¹çš„æ ¸å¿ƒæ’ä»¶å¦‚ä¸‹ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ä½¿ç”¨çš„æ˜¯vue2ç‰ˆæœ¬çš„ï¼Œæ‰€ä»¥ç”¨çš„æ˜¯vite-plugin-vue2æ’ä»¶ã€‚ 12345678910// vite.config.jsimport { createVuePlugin } from 'vite-plugin-vue2'export default { plugins: [ createVuePlugin({ jsx: true, }) ],} é’ˆå¯¹è¿™ä¸ªåœºæ™¯ï¼Œä½¿ç”¨çš„æ˜¯è‡ªå·±å†™äº†ä¸€ä¸ªæ’ä»¶vite-plugin-vue2-jsxï¼Œå°†éœ€è¦ä¿®æ”¹çš„å¤„ç†ï¼Œå…¨éƒ¨ç”±æ’ä»¶æ¥è¿›è¡Œè½¬åŒ– ä½¿ç”¨ vite-plugin-vue2-jsx æ›¿æ¢ vite-plugin-vue2 ï¼Œè‡ªåŠ¨å¤„ç† ä»£ç å—å’Œjsæ–‡ä»¶çš„ jsx è¯­æ³• 12345678910// vite.config.jsimport { createVuePlugin } from 'vite-plugin-vue2-jsx'export default { plugins: [ createVuePlugin({ jsx: true, }) ],} requireæŠ¥é”™é—®é¢˜ è¿™ä¸ªé—®é¢˜viteæ˜¯ä½¿ç”¨ESModuleç¼–è¯‘çš„ï¼Œä¸æ”¯æŒCommonJsçš„åŸå› ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦å°†CommonJs è½¬æ¢ä¸ºESModuleã€‚ é¡¹ç›®ä¸­å­˜åœ¨ä¸¤ç§æƒ…å†µï¼š å›¾ç‰‡requireå¼•ç”¨ 1&lt;img class=&quot;logo&quot; :src=&quot;require('./images/logo.png')&quot;/&gt; åœ¨npmä¸Šæ‰¾äº†åŠå¤©ä¹Ÿæ²¡æ‰¾åˆ°æˆ‘éœ€è¦çš„æ’ä»¶ï¼Œé’ˆå¯¹è¿™ä¸ªåœºæ™¯ï¼Œç´¢æ€§è‡ªå·±å†™äº†ä¸€ä¸ªæ’ä»¶vite-plugin-image-require 12345678// vite.config.jsimport { imageRequirePlugin } from 'vite-plugin-image-require'export default { plugins: [ imageRequirePlugin() ],} 2. æšä¸¾çš„å¼•ç”¨ é€šè¿‡å¼•å…¥ vite-plugin-require-transform æ’ä»¶æ¥å¤„ç† 1npm i vite-plugin-require-transform --save-dev é…ç½® 1234567import requireTransform from 'vite-plugin-require-transform';export default defineConfig({ plugins: [ requireTransform({fileRegex:/.js$|.vue$/}), ],}); è½¬æ¢ @import ~ åˆ«å 12345resolve: { alias: { '~': path.join(__dirname, 'node_modules'), } }, webpackçš„ process.env çš„ç¯å¢ƒå˜é‡åœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨å¯¼è‡´çš„é¡µé¢æŠ¥é”™ï¼Œæ— æ³•åŠ è½½ 123define: { 'process.env': process.env}, å®Œæ•´é…ç½®1234567891011121314151617181920212223242526272829303132333435363738import { defineConfig } from 'vite'import { imageRequirePlugin } from 'vite-plugin-image-require'import { createVuePlugin } from 'vite-plugin-vue2-jsx'import requireTransform from 'vite-plugin-require-transform';import path from 'path'export default () =&gt; defineConfig({ define: { 'process.env': process.env }, plugins: [ createVuePlugin({ jsx: true, }), requireTransform({ fileRegex:/.js$|.vue$/ }), imageRequirePlugin(), ], resolve: { extensions: ['.js', '.vue', '.json', '.less'], alias: { vue: 'vue/dist/vue.esm.js', '@': path.resolve(__dirname, 'src'), '~': path.join(__dirname, 'node_modules'), } }, server: { port: 8080, // viteé»˜è®¤æ˜¯3000ç«¯å£ï¼Œä¿ç•™åŸæœ‰çš„ç«¯å£å· proxy: { '/api': { target: 'http://baidu.com/', changeOrigin: true, rewrite: path =&gt; path.replace(/^/api/, '') } } }}) ç»“æŸ12345# ä½¿ç”¨viteå¯åŠ¨æœåŠ¡npm run dev# ä½¿ç”¨webpackå¯åŠ¨æœåŠ¡npm run dev:w","link":"/2022/12/19/vue2%E8%80%81%E9%A1%B9%E7%9B%AEvite%E5%8D%87%E7%BA%A7%E6%94%B9%E9%80%A0/"},{"title":"ã€fetchè·¨åŸŸè¯·æ±‚ã€‘cors","text":"å½“ä½¿ç”¨fetch å‘èµ·è·¨åŸŸè¯·æ±‚æ—¶ï¼ŒCORSï¼ˆè·¨åŸŸèµ„æºå…±äº«Cross-origin resource sharingï¼‰ è¯·æ±‚fetch 123456789101112131415161718const body = {name:&quot;Good boy&quot;}; fetch(&quot;http://leheavengame.com/API&quot;,{ headers:{ 'content-type':'application/json' } method:'POST', body: JSON.stringify(body)}).then(response =&gt; response.json().then(json =&gt; ({ json, response }))).then(({ json, response }) =&gt; { if (!response.ok) { return Promise.reject(json); } return json;}).then( response =&gt; response, error =&gt; error ); å¦‚æœæœåŠ¡å™¨è¿”å›çš„ response å¤´åŒ…å« â€œAccess-Control-Allow-Originï¼šâ€æˆ–è€… ä¸ºä¸è¯·æ±‚æºç›¸åŒçš„åœ°å€ã€‚å³æœåŠ¡å™¨æ”¯æŒæµè§ˆå™¨è·¨åŸŸè®¿é—®ã€‚è‹¥ä¸åŒ…å«éœ€æ±‚ä¿®æ”¹æœåŠ¡å™¨ç«¯ï¼Œä¸æµè§ˆå™¨ç«¯è¯·æ±‚ã€‚ å¦‚æœæœåŠ¡å™¨ä¸æ”¯æŒCORSï¼Œfetchæä¾›äº†ä¸‰ç§æ¨¡å¼ï¼Œå…¶ä¸­no-corså¯ä»¥ç»§ç»­è®¿é—®æœåŠ¡å™¨fetchçš„modeé…ç½®é¡¹æœ‰3ä¸ªå€¼ï¼Œå¦‚ä¸‹ï¼š same-originï¼šè¯¥æ¨¡å¼æ˜¯ä¸å…è®¸è·¨åŸŸçš„ï¼Œå®ƒéœ€è¦éµå®ˆåŒæºç­–ç•¥ï¼Œå¦åˆ™æµè§ˆå™¨ä¼šè¿”å›ä¸€ä¸ªerrorå‘ŠçŸ¥ä¸èƒ½è·¨åŸŸï¼›å…¶å¯¹åº”çš„response typeä¸ºbasicã€‚ cors: è¯¥æ¨¡å¼æ”¯æŒè·¨åŸŸè¯·æ±‚ï¼Œé¡¾åæ€ä¹‰å®ƒæ˜¯ä»¥CORSçš„å½¢å¼è·¨åŸŸï¼›å½“ç„¶è¯¥æ¨¡å¼ä¹Ÿå¯ä»¥åŒåŸŸè¯·æ±‚ä¸éœ€è¦åç«¯é¢å¤–çš„CORSæ”¯æŒï¼›å…¶å¯¹åº”çš„responsetypeä¸ºcorsã€‚ no-cors: è¯¥æ¨¡å¼ç”¨äºè·¨åŸŸè¯·æ±‚ä½†æ˜¯æœåŠ¡å™¨ä¸å¸¦CORSå“åº”å¤´ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡ç«¯ä¸æ”¯æŒCORSï¼›è¿™ä¹Ÿæ˜¯fetchçš„ç‰¹æ®Šè·¨åŸŸè¯·æ±‚æ–¹å¼ï¼›å…¶å¯¹åº”çš„responsetypeä¸ºopaqueã€‚ é’ˆå¯¹è·¨åŸŸè¯·æ±‚ï¼Œcorsæ¨¡å¼æ˜¯å¸¸è§è·¨åŸŸè¯·æ±‚å®ç°ï¼Œä½†æ˜¯fetchè‡ªå¸¦çš„no-corsè·¨åŸŸè¯·æ±‚æ¨¡å¼åˆ™è¾ƒä¸ºé™Œç”Ÿï¼Œè¯¥æ¨¡å¼æœ‰ä¸€ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„ç‰¹ç‚¹ï¼š è¯¥æ¨¡å¼å…è®¸æµè§ˆå™¨å‘é€æœ¬æ¬¡è·¨åŸŸè¯·æ±‚ï¼Œä½†æ˜¯ä¸èƒ½è®¿é—®å“åº”è¿”å›çš„å†…å®¹ï¼Œè¿™ä¹Ÿæ˜¯å…¶response typeä¸ºopaqueé€æ˜çš„åŸå› ã€‚ æ³¨æ„ï¼š cors æ”¯æŒ ä¸‰ç§content-type ä¸æ”¯æŒ application/json application/x-www-form-urlencoded multipart/form-data text/plain å¯¹äºExpressæä¾›çš„æœåŠ¡ç«¯ä¸ºäº†èƒ½æä¾›CORSæœåŠ¡éœ€è¦æ·»åŠ ï¼š 123456789//è®¾ç½®è·¨åŸŸè®¿é—® app.all('*', function(req, res, next) { res.header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;); res.header(&quot;Access-Control-Allow-Headers&quot;, &quot;X-Requested-With&quot;); res.header(&quot;Access-Control-Allow-Methods&quot;,&quot;PUT,POST,GET,DELETE,OPTIONS&quot;); res.header(&quot;X-Powered-By&quot;,' 3.2.1') res.header(&quot;Content-Type&quot;, &quot;application/json;charset=utf-8&quot;); next(); });","link":"/2018/12/31/%E3%80%90fetch%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E3%80%91cors/"},{"title":"webpackä¼˜åŒ–","text":"webpackä¼˜åŒ–ä¹‹è·¯1.åˆ«åalia12345'react': (0, join)(__dirname, './node_modules/react/dist/react.min.js'),resolve: { alias: alias,}, 2.css-loader &lt; 0.15.01&quot;css-loader&quot;: &quot;^0.14.1&quot;, 3.ç§»é™¤css-loaderçš„sourcemapè¿™ä¸€æ­¥æš‚æ—¶æ²¡å¤šå¤§æ•ˆæœï¼Œç»§ç»­ä¸‹é¢çš„æ­¥éª¤ 4.å¤–éƒ¨å¼•å…¥æ¨¡å—1234567891011externals: { 'react': 'React', 'react-dom': 'ReactDOM', 'reactUpdate': 'ReactUpdate', 'antd': 'antd', &quot;jquery&quot;: &quot;jQuery&quot;, 'AMap': 'window.AMap', 'moment': 'moment', 'react-dnd': 'ReactDnD', 'react-router': 'ReactRouter'}, å¿…é¡»è®¾ç½® 123output: { 'libraryTarget': 'var',}, ç„¶åhtmlå¼•å…¥å¤–éƒ¨js 12&lt;script src=&quot;${assetsAt('react.min.js')}&quot;&gt;&lt;/script&gt;&lt;script src=&quot;${assetsAt('react-dom.min.js')}&quot;&gt;&lt;/script&gt; 5.è®¾ç½®cacheä¸ºtrue1cache: true, 6.è®¾ç½®root123resolve: { root: [path.resolve('./src')],}, 7.è®¾ç½®babelçš„cacheDirectoryä¸ºtrue(æ‰“åŒ…æ€§èƒ½æå‡å¾ˆæ˜æ˜¾,ç›¸å…³é“¾æ¥)123456789101112131415161718192021/** babelå‚æ•°* */var babelQuery = { presets: ['es2015', 'react', 'stage-0'], plugins: ['transform-runtime', 'add-module-exports', 'typecheck', &quot;transform-decorators-legacy&quot;], cacheDirectory: true};loaders: [ { test: /\\.js$/, exclude: /node_modules/, loader: 'babel', query: babelQuery }, { test: /\\.jsx$/, loader: 'babel', query: babelQuery }] 8.ä¸€äº›loaderçš„å¤§å°é™åˆ¶(é™åˆ¶å°äºå¤šå°‘æ‰è½¬ä¸ºbase64,è®©ç”Ÿæˆçš„æ–‡ä»¶æœ€å°)123456789101112131415161718192021loaders: [ { test: /\\.woff(\\?v=\\d+\\.\\d+\\.\\d+)?$/, loader: 'url?limit=10000&amp;minetype=application/font-woff' }, { test: /\\.woff2(\\?v=\\d+\\.\\d+\\.\\d+)?$/, loader: 'url?limit=10000&amp;minetype=application/font-woff' }, { test: /\\.ttf(\\?v=\\d+\\.\\d+\\.\\d+)?$/, loader: 'url?limit=10000&amp;minetype=application/octet-stream' }, { test: /\\.eot(\\?v=\\d+\\.\\d+\\.\\d+)?$/, loader: 'file' }, { test: /\\.svg(\\?v=\\d+\\.\\d+\\.\\d+)?$/, loader: 'url?limit=10000&amp;minetype=image/svg+xml' }, { test: /\\.(wav|mp3)?$/, loader: 'url-loader?limit=8192' }] 9.noParseå¦‚æœä½  ç¡®å®šä¸€ä¸ªæ¨¡å—ä¸­æ²¡æœ‰å…¶å®ƒæ–°çš„ä¾èµ– å°±å¯ä»¥é…ç½®è¿™é¡¹ï¼Œwebpack å°†ä¸å†æ‰«æè¿™ä¸ªæ–‡ä»¶ä¸­çš„ä¾èµ–ã€‚ 12345678module: { loaders: [ ], noParse: [ /moment-with-locales/ ]}, 10.æ‹·è´é™æ€æ–‡ä»¶æŠŠæŒ‡å®šæ–‡ä»¶å¤¹xiaçš„æ–‡ä»¶å¤åˆ¶åˆ°æŒ‡å®šçš„ç›®å½• 12345678910111213141516171819202122232425262728293031var CopyWebpackPlugin = require('copy-webpack-plugin');var copyFile = { production: [ {from: 'src/static/antd-0.12.15.min.css', to: 'antd.min.css'}, {from: 'src/static/antd-0.12.15.min.js', to: 'antd.min.js'}, {from: 'src/static/jquery-2.2.1.min.js', to: 'jquery.min.js'}, {from: 'src/static/react-15.0.1.min.js', to: 'react.min.js'}, {from: 'src/static/react-dom-15.0.1.min.js', to: 'react-dom.min.js'}, {from: 'src/static/react-update-0.14.6.min.js', to: 'react-update.min.js'}, {from: 'src/static/favicon.ico', to: 'favicon.ico'}, {from: 'src/static/moment-2.13.0.min.js', to: 'moment.min.js'}, {from: 'src/static/react-dnd-2.1.4.min.js', to: 'react-dnd.min.js'}, {from: 'src/static/react-router-1.0.3.min.js', to: 'react-router.min.js'} ], development: [ {from: 'src/static/antd-0.12.15.min.css', to: 'antd.min.css'}, {from: 'src/static/antd-0.12.15.min.js', to: 'antd.min.js'}, {from: 'src/static/jquery-2.2.1.min.js', to: 'jquery.min.js'}, {from: 'src/static/react-development-15.0.1.min.js', to: 'react.min.js'}, {from: 'src/static/react-dom-development-15.0.1.min.js', to: 'react-dom.min.js'}, {from: 'src/static/react-update-0.14.6.min.js', to: 'react-update.min.js'}, {from: 'src/static/favicon.ico', to: 'favicon.ico'}, {from: 'src/static/moment-2.13.0.min.js', to: 'moment.min.js'}, {from: 'src/static/react-dnd-2.1.4.min.js', to: 'react-dnd.min.js'}, {from: 'src/static/react-router-1.0.3.min.js', to: 'react-router.min.js'} ]};new CopyWebpackPlugin( (runmod == 'devserver') ? copyFile.development : copyFile.production), 11.è®¾ç½®dllåŸç†å°±æ˜¯å°†ç‰¹å®šçš„æ¨¡å—åœ¨é¡¹ç›®æ„å»ºå‰æ„å»ºå¥½ï¼Œç„¶åé€šè¿‡é¡µé¢å¼•å…¥ã€‚ 12.ä½¿ç”¨happypackè®©loaderå¤šè¿›ç¨‹å»å¤„ç†æ–‡ä»¶ã€‚ 12345678910111213var HappyPack = require('happypack');loader: test: /\\.js$/, exclude: /node_modules/, loader: 'babel', query: babelQuery, happy: { id: 'babelJs' }plugins: new HappyPack({ id: 'babelJs' , threads: 4 }),","link":"/2017/04/17/webpack%E4%BC%98%E5%8C%96/"},{"title":"ä»€ä¹ˆæ˜¯ES6ï¼Ÿ","text":"ä»€ä¹ˆæ˜¯ES6ï¼ŸECMAScript 6ï¼ˆä»¥ä¸‹ç®€ç§°ES6ï¼‰æ˜¯JavaScriptè¯­è¨€çš„ä¸‹ä¸€ä»£æ ‡å‡†ï¼Œå·²ç»åœ¨2015å¹´6æœˆæ­£å¼å‘å¸ƒäº†ã€‚Mozillaå…¬å¸å°†åœ¨è¿™ä¸ªæ ‡å‡†çš„åŸºç¡€ä¸Šï¼Œæ¨å‡ºJavaScript 2.0ã€‚ ECMAScriptå’ŒJavaScriptåˆ°åº•æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿå¾ˆå¤šåˆå­¦è€…ä¼šæ„Ÿåˆ°å›°æƒ‘ï¼Œç®€å•æ¥è¯´ï¼ŒECMAScriptæ˜¯JavaScriptè¯­è¨€çš„å›½é™…æ ‡å‡†ï¼ŒJavaScriptæ˜¯ECMAScriptçš„å®ç°ã€‚ 1996å¹´11æœˆï¼ŒJavaScriptçš„åˆ›é€ è€…Netscapeå…¬å¸ï¼Œå†³å®šå°†JavaScriptæäº¤ç»™å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ECMAï¼Œå¸Œæœ›è¿™ç§è¯­è¨€èƒ½å¤Ÿæˆä¸ºå›½é™…æ ‡å‡†ã€‚æ¬¡å¹´ï¼ŒECMAå‘å¸ƒ262å·æ ‡å‡†æ–‡ä»¶ï¼ˆECMA-262ï¼‰çš„ç¬¬ä¸€ç‰ˆï¼Œè§„å®šäº†æµè§ˆå™¨è„šæœ¬è¯­è¨€çš„æ ‡å‡†ï¼Œå¹¶å°†è¿™ç§è¯­è¨€ç§°ä¸ºECMAScriptã€‚è¿™ä¸ªç‰ˆæœ¬å°±æ˜¯ECMAScript 1.0ç‰ˆã€‚ ES6çš„ç›®æ ‡ï¼Œæ˜¯ä½¿å¾—JavaScriptè¯­è¨€å¯ä»¥ç”¨æ¥ç¼–å†™å¤§å‹çš„å¤æ‚çš„åº”ç”¨ç¨‹åºï¼Œæˆä¸ºä¼ä¸šçº§å¼€å‘è¯­è¨€ã€‚ ä½œä¸ºæ–°ä¸€ä»£æ ‡å‡†ES6å°†ä¸ºæˆ‘ä»¬å¸¦æ¥å¾ˆå¤šä»¤äººæ¬£å–œçš„åŠŸèƒ½ç‰¹æ€§ï¼Œæœ¬è¯¾ç¨‹å°†ç€é‡å¸¦é¢†å¤§å®¶é¢†ç•¥ES6çš„é£é‡‡ï¼Œå› æ­¤åœ¨å­¦ä¹ æœ¬è¯¾ç¨‹å‰éœ€è¦å…·å¤‡JavaScriptçš„åŸºç¡€çŸ¥è¯†ï¼Œå¦‚æœä½ å¹¶ä¸äº†è§£JavaScriptæ˜¯ä»€ä¹ˆï¼Œå¯ä»¥å…ˆå­¦ä¹ ä¸€ä¸‹JavaScriptçš„å…¥é—¨è¯¾ç¨‹ã€‚ æ”¯æŒ è™½è¯´ES6å·²ç»ä½œä¸ºæ–°ä¸€ä»£æ ‡å‡†å‘å¸ƒäº†ï¼Œä½†æ˜¯å„å¤§æµè§ˆå™¨å¯¹æ–°åŠŸèƒ½å®ç°æ”¯æŒçš„è¿˜éœ€è¦ä¸€æ®µæ—¶é—´ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆçŸ¥é“è‡ªå·±ä½¿ç”¨çš„æµè§ˆå™¨æ˜¯å¦æ”¯æŒES6çš„ç›¸åº”åŠŸèƒ½å‘¢ï¼Ÿ å¯¹ES6çš„æ”¯æŒå¯ä»¥æŸ¥çœ‹https://kangax.github.io/es5-compat-table/es6/ ï¼Œåœ¨è¿™é‡Œå¯ä»¥æ¸…æ™°çš„äº†è§£åˆ°ä¸åŒç‰ˆæœ¬çš„æµè§ˆå™¨å¯¹ES6åŠŸèƒ½çš„æ”¯æŒæƒ…å†µã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ”¯æŒåº¦å·²ç»è¶Šæ¥è¶Šé«˜äº†ï¼ŒES6çš„å¤§éƒ¨åˆ†ç‰¹æ€§éƒ½å®ç°äº†ã€‚","link":"/2017/03/21/%E4%BB%80%E4%B9%88%E6%98%AFES6%EF%BC%9F/"},{"title":"ä»€ä¹ˆæ˜¯Event loop","text":"ä¼—æ‰€å‘¨çŸ¥ JS æ˜¯é—¨éé˜»å¡å•çº¿ç¨‹è¯­è¨€ï¼Œå› ä¸ºåœ¨æœ€åˆ JS å°±æ˜¯ä¸ºäº†å’Œæµè§ˆå™¨äº¤äº’è€Œè¯ç”Ÿçš„ã€‚å¦‚æœ JS æ˜¯é—¨å¤šçº¿ç¨‹çš„è¯­è¨€è¯ï¼Œæˆ‘ä»¬åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å¤„ç† DOM å°±å¯èƒ½ä¼šå‘ç”Ÿé—®é¢˜ï¼ˆä¸€ä¸ªçº¿ç¨‹ä¸­æ–°åŠ èŠ‚ç‚¹ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¸­åˆ é™¤èŠ‚ç‚¹ï¼‰ï¼Œå½“ç„¶å¯ä»¥å¼•å…¥è¯»å†™é”è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ JS åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿæ‰§è¡Œç¯å¢ƒï¼Œè¿™äº›æ‰§è¡Œç¯å¢ƒä¼šè¢«é¡ºåºçš„åŠ å…¥åˆ°æ‰§è¡Œæ ˆä¸­ã€‚å¦‚æœé‡åˆ°å¼‚æ­¥çš„ä»£ç ï¼Œä¼šè¢«æŒ‚èµ·å¹¶åŠ å…¥åˆ° Taskï¼ˆæœ‰å¤šç§ taskï¼‰ é˜Ÿåˆ—ä¸­ã€‚ä¸€æ—¦æ‰§è¡Œæ ˆä¸ºç©ºï¼ŒEvent Loop å°±ä¼šä» Task é˜Ÿåˆ—ä¸­æ‹¿å‡ºéœ€è¦æ‰§è¡Œçš„ä»£ç å¹¶æ”¾å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šæ¥è¯´ JS ä¸­çš„å¼‚æ­¥è¿˜æ˜¯åŒæ­¥è¡Œä¸ºã€‚ 1234567console.log('script start')setTimeout(function() { console.log('setTimeout')}, 0)console.log('script end') ä»¥ä¸Šä»£ç è™½ç„¶ setTimeout å»¶æ—¶ä¸º 0ï¼Œå…¶å®è¿˜æ˜¯å¼‚æ­¥ã€‚è¿™æ˜¯å› ä¸º HTML5 æ ‡å‡†è§„å®šè¿™ä¸ªå‡½æ•°ç¬¬äºŒä¸ªå‚æ•°ä¸å¾—å°äº 4 æ¯«ç§’ï¼Œä¸è¶³ä¼šè‡ªåŠ¨å¢åŠ ã€‚æ‰€ä»¥ setTimeout è¿˜æ˜¯ä¼šåœ¨ script end ä¹‹åæ‰“å°ã€‚ ä¸åŒçš„ä»»åŠ¡æºä¼šè¢«åˆ†é…åˆ°ä¸åŒçš„ Task é˜Ÿåˆ—ä¸­ï¼Œä»»åŠ¡æºå¯ä»¥åˆ†ä¸º å¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰ å’Œ å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰ã€‚åœ¨ ES6 è§„èŒƒä¸­ï¼Œmicrotask ç§°ä¸º jobsï¼Œmacrotask ç§°ä¸º taskã€‚ 12345678910111213141516171819console.log('script start')setTimeout(function() { console.log('setTimeout')}, 0)new Promise(resolve =&gt; { console.log('Promise') resolve()}) .then(function() { console.log('promise1') }) .then(function() { console.log('promise2') })console.log('script end')// script start =&gt; Promise =&gt; script end =&gt; promise1 =&gt; promise2 =&gt; setTimeout ä»¥ä¸Šä»£ç è™½ç„¶ setTimeout å†™åœ¨ Promise ä¹‹å‰ï¼Œä½†æ˜¯å› ä¸º Promise å±äºå¾®ä»»åŠ¡è€Œ setTimeoutå±äºå®ä»»åŠ¡ï¼Œæ‰€ä»¥ä¼šæœ‰ä»¥ä¸Šçš„æ‰“å°ã€‚ å¾®ä»»åŠ¡åŒ…æ‹¬ process.nextTick ï¼Œpromise ï¼ŒObject.observe ï¼ŒMutationObserver å®ä»»åŠ¡åŒ…æ‹¬ script ï¼Œ setTimeout ï¼ŒsetInterval ï¼ŒsetImmediate ï¼ŒI/O ï¼ŒUI rendering å¾ˆå¤šäººæœ‰ä¸ªè¯¯åŒºï¼Œè®¤ä¸ºå¾®ä»»åŠ¡å¿«äºå®ä»»åŠ¡ï¼Œå…¶å®æ˜¯é”™è¯¯çš„ã€‚å› ä¸ºå®ä»»åŠ¡ä¸­åŒ…æ‹¬äº† script ï¼Œæµè§ˆå™¨ä¼šå…ˆæ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ¥ä¸‹æ¥æœ‰å¼‚æ­¥ä»£ç çš„è¯å°±å…ˆæ‰§è¡Œå¾®ä»»åŠ¡ã€‚ æ‰€ä»¥æ­£ç¡®çš„ä¸€æ¬¡ Event loop é¡ºåºæ˜¯è¿™æ ·çš„ æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œè¿™å±äºå®ä»»åŠ¡ æ‰§è¡Œæ ˆä¸ºç©ºï¼ŒæŸ¥è¯¢æ˜¯å¦æœ‰å¾®ä»»åŠ¡éœ€è¦æ‰§è¡Œ æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡ å¿…è¦çš„è¯æ¸²æŸ“ UI ç„¶åå¼€å§‹ä¸‹ä¸€è½® Event loopï¼Œæ‰§è¡Œå®ä»»åŠ¡ä¸­çš„å¼‚æ­¥ä»£ç  é€šè¿‡ä¸Šè¿°çš„ Event loop é¡ºåºå¯çŸ¥ï¼Œå¦‚æœå®ä»»åŠ¡ä¸­çš„å¼‚æ­¥ä»£ç æœ‰å¤§é‡çš„è®¡ç®—å¹¶ä¸”éœ€è¦æ“ä½œ DOM çš„è¯ï¼Œä¸ºäº†æ›´å¿«çš„ ç•Œé¢å“åº”ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ“ä½œ DOM æ”¾å…¥å¾®ä»»åŠ¡ä¸­ã€‚ Node ä¸­çš„ Event loopNode ä¸­çš„ Event loop å’Œæµè§ˆå™¨ä¸­çš„ä¸ç›¸åŒã€‚ Node çš„ Event loop åˆ†ä¸º 6 ä¸ªé˜¶æ®µï¼Œå®ƒä»¬ä¼šæŒ‰ç…§é¡ºåºåå¤è¿è¡Œ 123456789101112131415161718â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€&gt;â”‚ timers â”‚â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚ I/O callbacks â”‚â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚ idle, prepare â”‚â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ incoming: â”‚â”‚ â”‚ poll â”‚&lt;â”€â”€connectionsâ”€â”€â”€ â”‚â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ data, etc. â”‚â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚ check â”‚â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â””â”€â”€â”¤ close callbacks â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ timertimers é˜¶æ®µä¼šæ‰§è¡Œ setTimeout å’Œ setInterval ä¸€ä¸ª timer æŒ‡å®šçš„æ—¶é—´å¹¶ä¸æ˜¯å‡†ç¡®æ—¶é—´ï¼Œè€Œæ˜¯åœ¨è¾¾åˆ°è¿™ä¸ªæ—¶é—´åå°½å¿«æ‰§è¡Œå›è°ƒï¼Œå¯èƒ½ä¼šå› ä¸ºç³»ç»Ÿæ­£åœ¨æ‰§è¡Œåˆ«çš„äº‹åŠ¡è€Œå»¶è¿Ÿã€‚ ä¸‹é™çš„æ—¶é—´æœ‰ä¸€ä¸ªèŒƒå›´ï¼š[1, 2147483647] ï¼Œå¦‚æœè®¾å®šçš„æ—¶é—´ä¸åœ¨è¿™ä¸ªèŒƒå›´ï¼Œå°†è¢«è®¾ç½®ä¸º 1ã€‚ I/OI/O é˜¶æ®µä¼šæ‰§è¡Œé™¤äº† close äº‹ä»¶ï¼Œå®šæ—¶å™¨å’Œ setImmediate çš„å›è°ƒ idle, prepareidle, prepare é˜¶æ®µå†…éƒ¨å®ç° pollpoll é˜¶æ®µå¾ˆé‡è¦ï¼Œè¿™ä¸€é˜¶æ®µä¸­ï¼Œç³»ç»Ÿä¼šåšä¸¤ä»¶äº‹æƒ… æ‰§è¡Œåˆ°ç‚¹çš„å®šæ—¶å™¨ æ‰§è¡Œ poll é˜Ÿåˆ—ä¸­çš„äº‹ä»¶ å¹¶ä¸”å½“ poll ä¸­æ²¡æœ‰å®šæ—¶å™¨çš„æƒ…å†µä¸‹ï¼Œä¼šå‘ç°ä»¥ä¸‹ä¸¤ä»¶äº‹æƒ… å¦‚æœ poll é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œä¼šéå†å›è°ƒé˜Ÿåˆ—å¹¶åŒæ­¥æ‰§è¡Œï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæˆ–è€…ç³»ç»Ÿé™åˆ¶ å¦‚æœ poll é˜Ÿåˆ—ä¸ºç©ºï¼Œä¼šæœ‰ä¸¤ä»¶äº‹å‘ç”Ÿ å¦‚æœæœ‰ setImmediate éœ€è¦æ‰§è¡Œï¼Œpoll é˜¶æ®µä¼šåœæ­¢å¹¶ä¸”è¿›å…¥åˆ° check é˜¶æ®µæ‰§è¡Œ setImmediate å¦‚æœæ²¡æœ‰ setImmediate éœ€è¦æ‰§è¡Œï¼Œä¼šç­‰å¾…å›è°ƒè¢«åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­å¹¶ç«‹å³æ‰§è¡Œå›è°ƒ å¦‚æœæœ‰åˆ«çš„å®šæ—¶å™¨éœ€è¦è¢«æ‰§è¡Œï¼Œä¼šå›åˆ° timer é˜¶æ®µæ‰§è¡Œå›è°ƒã€‚ checkcheck é˜¶æ®µæ‰§è¡Œ setImmediate close callbacksclose callbacks é˜¶æ®µæ‰§è¡Œ close äº‹ä»¶ å¹¶ä¸”åœ¨ Node ä¸­ï¼Œæœ‰äº›æƒ…å†µä¸‹çš„å®šæ—¶å™¨æ‰§è¡Œé¡ºåºæ˜¯éšæœºçš„ 12345678910setTimeout(() =&gt; { console.log('setTimeout')}, 0)setImmediate(() =&gt; { console.log('setImmediate')})// è¿™é‡Œå¯èƒ½ä¼šè¾“å‡º setTimeoutï¼ŒsetImmediate// å¯èƒ½ä¹Ÿä¼šç›¸åçš„è¾“å‡ºï¼Œè¿™å–å†³äºæ€§èƒ½// å› ä¸ºå¯èƒ½è¿›å…¥ event loop ç”¨äº†ä¸åˆ° 1 æ¯«ç§’ï¼Œè¿™æ—¶å€™ä¼šæ‰§è¡Œ setImmediate// å¦åˆ™ä¼šæ‰§è¡Œ setTimeout å½“ç„¶åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰§è¡Œé¡ºåºæ˜¯ç›¸åŒçš„ 1234567891011121314var fs = require('fs')fs.readFile(__filename, () =&gt; { setTimeout(() =&gt; { console.log('timeout') }, 0) setImmediate(() =&gt; { console.log('immediate') })})// å› ä¸º readFile çš„å›è°ƒåœ¨ poll ä¸­æ‰§è¡Œ// å‘ç°æœ‰ setImmediate ï¼Œæ‰€ä»¥ä¼šç«‹å³è·³åˆ° check é˜¶æ®µæ‰§è¡Œå›è°ƒ// å†å» timer é˜¶æ®µæ‰§è¡Œ setTimeout// æ‰€ä»¥ä»¥ä¸Šè¾“å‡ºä¸€å®šæ˜¯ setImmediateï¼ŒsetTimeout ä¸Šé¢ä»‹ç»çš„éƒ½æ˜¯ macrotask çš„æ‰§è¡Œæƒ…å†µï¼Œmicrotask ä¼šåœ¨ä»¥ä¸Šæ¯ä¸ªé˜¶æ®µå®Œæˆåç«‹å³æ‰§è¡Œã€‚ 1234567891011121314151617181920setTimeout(() =&gt; { console.log('timer1') Promise.resolve().then(function() { console.log('promise1') })}, 0)setTimeout(() =&gt; { console.log('timer2') Promise.resolve().then(function() { console.log('promise2') })}, 0)// ä»¥ä¸Šä»£ç åœ¨æµè§ˆå™¨å’Œ node ä¸­æ‰“å°æƒ…å†µæ˜¯ä¸åŒçš„// æµè§ˆå™¨ä¸­ä¸€å®šæ‰“å° timer1, promise1, timer2, promise2// node ä¸­å¯èƒ½æ‰“å° timer1, timer2, promise1, promise2// ä¹Ÿå¯èƒ½æ‰“å° timer1, promise1, timer2, promise2 Node ä¸­çš„ process.nextTick ä¼šå…ˆäºå…¶ä»– microtask æ‰§è¡Œã€‚ 123456789101112setTimeout(() =&gt; { console.log('timer1') Promise.resolve().then(function() { console.log('promise1') })}, 0)process.nextTick(() =&gt; { console.log('nextTick')})// nextTick, timer1, promise1","link":"/2021/06/19/%E4%BB%80%E4%B9%88%E6%98%AFEvent-loop/"},{"title":"ä»é›¶æ„å»ºå‰ç«¯ç›‘æ§æ¡†æ¶ï¼šåŸç†ä¸å®è·µ","text":"åœ¨å½“ä»Šçš„äº’è”ç½‘åº”ç”¨å¼€å‘ä¸­ï¼Œå‰ç«¯æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒçš„é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚ä¸ºäº†ç¡®ä¿å‰ç«¯åº”ç”¨çš„é«˜è´¨é‡è¿è¡Œï¼Œå‰ç«¯ç›‘æ§å·¥å…·æˆä¸ºäº†å¼€å‘è€…çš„å¾—åŠ›åŠ©æ‰‹ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æå¦‚ä½•æ„å»ºä¸€ä¸ªç±»ä¼¼ monitoring-tool çš„å‰ç«¯ç›‘æ§æ¡†æ¶ï¼ŒåŒ…æ‹¬å…¶å®ç°åŸç†ä»¥åŠè¯¦ç»†çš„æ„å»ºæ­¥éª¤ã€‚ ä¸€ã€å‰ç«¯ç›‘æ§çš„é‡è¦æ€§åœ¨å¤æ‚çš„å‰ç«¯åº”ç”¨ä¸­ï¼Œæ€§èƒ½é—®é¢˜å¯èƒ½å¯¼è‡´é¡µé¢åŠ è½½ç¼“æ…¢ã€ç”¨æˆ·æ“ä½œå¡é¡¿ï¼Œä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒï¼Œè¿›è€Œå¯¼è‡´ç”¨æˆ·æµå¤±ã€‚æ®ç»Ÿè®¡ï¼Œé¡µé¢åŠ è½½æ—¶é—´æ¯å»¶é•¿ 1 ç§’ï¼Œç”¨æˆ·æµå¤±ç‡å¯èƒ½å¢åŠ  10% ä»¥ä¸Šã€‚é”™è¯¯æœªåŠæ—¶å‘ç°å’Œå¤„ç†å¯èƒ½å¼•å‘åº”ç”¨å´©æºƒæˆ–åŠŸèƒ½å¼‚å¸¸ï¼Œä¾‹å¦‚æœªæ•è·çš„ JavaScript é”™è¯¯å¯èƒ½å¯¼è‡´æ•´ä¸ªé¡µé¢äº¤äº’å¤±æ•ˆã€‚é€šè¿‡å‰ç«¯ç›‘æ§ï¼Œæˆ‘ä»¬å¯ä»¥å®æ—¶äº†è§£åº”ç”¨çš„è¿è¡ŒçŠ¶æ€ï¼ŒåŠæ—¶å‘ç°å¹¶è§£å†³é—®é¢˜ï¼Œæå‡åº”ç”¨çš„ç¨³å®šæ€§å’Œæ€§èƒ½ï¼Œä¸ºç”¨æˆ·æä¾›æ›´æµç•…çš„ä½“éªŒã€‚ äºŒã€å®ç°åŸç†1. æ•°æ®é‡‡é›†æ€§èƒ½æŒ‡æ ‡é‡‡é›† åˆ©ç”¨ Performance APIPerformance API æä¾›äº†ä¸°å¯Œçš„æ€§èƒ½æ•°æ®ï¼Œé€šè¿‡ performance.timing å¯ä»¥ç²¾ç¡®è®°å½•é¡µé¢åŠ è½½å„é˜¶æ®µçš„æ—¶é—´ã€‚ä¾‹å¦‚ï¼ŒnavigationStart è¡¨ç¤ºæµè§ˆå™¨å¼€å§‹å¸è½½å½“å‰é¡µé¢çš„æ—¶é—´ï¼ŒresponseStart è¡¨ç¤ºæµè§ˆå™¨å¼€å§‹æ¥æ”¶å“åº”æ•°æ®çš„æ—¶é—´ï¼Œä¸¤è€…çš„å·®å€¼å¯å¾—å‡ºæœåŠ¡å™¨å“åº”æ—¶é—´ã€‚ç›‘å¬ load äº‹ä»¶å¯ä»¥è·å–é¡µé¢å®Œå…¨åŠ è½½çš„æ—¶é—´ï¼ŒDOMContentLoaded äº‹ä»¶åˆ™è¡¨ç¤º DOM æ ‘æ„å»ºå®Œæˆçš„æ—¶é—´ï¼Œç”¨äºç¡®å®šé¡µé¢å…³é”®åŠ è½½èŠ‚ç‚¹ã€‚ è®¡ç®—é¡µé¢æ¸²æŸ“æ—¶é—´é€šè¿‡ performance.getEntriesByType('paint') è·å–ç»˜åˆ¶ç›¸å…³çš„æ€§èƒ½æ¡ç›®ï¼Œè®¡ç®—é¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼ˆFCPï¼‰ã€æœ€å¤§å†…å®¹ç»˜åˆ¶ï¼ˆLCPï¼‰ç­‰æ—¶é—´ï¼Œå¸®åŠ©äº†è§£é¡µé¢ä»å¼€å§‹æ¸²æŸ“åˆ°å¯äº¤äº’çš„æ—¶é•¿ï¼Œæ‰¾å‡ºå¯èƒ½å½±å“ç”¨æˆ·ä½“éªŒçš„ç“¶é¢ˆã€‚ é”™è¯¯ä¿¡æ¯é‡‡é›† JavaScript é”™è¯¯æ•è·å€ŸåŠ© window.onerror æ•è·å„ç±» JavaScript é”™è¯¯ï¼ŒåŒ…æ‹¬è¯­æ³•é”™è¯¯ã€è¿è¡Œæ—¶é”™è¯¯ç­‰ï¼Œè·å–é”™è¯¯ä¿¡æ¯ã€å‘ç”Ÿé”™è¯¯çš„æ–‡ä»¶è·¯å¾„ã€è¡Œå·ã€åˆ—å·ä»¥åŠé”™è¯¯å †æ ˆï¼Œæ–¹ä¾¿å¿«é€Ÿå®šä½é—®é¢˜æ ¹æºã€‚ Promise é”™è¯¯å¤„ç†ç›‘å¬ unhandledrejection äº‹ä»¶ï¼Œç¡®ä¿ Promise ä¸­æœªå¤„ç†çš„é”™è¯¯ä¸ä¼šè¢«é—æ¼ï¼Œæå‡é”™è¯¯æ•è·çš„å…¨é¢æ€§ã€‚ èµ„æºåŠ è½½é”™è¯¯é’ˆå¯¹å›¾ç‰‡æˆ–è„šæœ¬åŠ è½½å¤±è´¥ç­‰èµ„æºåŠ è½½é”™è¯¯ï¼Œé€šè¿‡ç›‘å¬ imgã€script ç­‰å…ƒç´ çš„ error äº‹ä»¶ï¼ŒåŠæ—¶è®°å½•é”™è¯¯æƒ…å†µï¼Œé¿å…å› èµ„æºé—®é¢˜å½±å“é¡µé¢åŠŸèƒ½ã€‚ ç”¨æˆ·è¡Œä¸ºé‡‡é›† äº¤äº’äº‹ä»¶ç›‘å¬å¹¿æ³›ç›‘å¬é¡µé¢äº¤äº’äº‹ä»¶ï¼Œå¦‚ clickã€scroll å’Œ input ç­‰ã€‚å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œè®°å½•ç‚¹å‡»å…ƒç´ çš„æ ‡ç­¾åã€æ—¶é—´å’Œç›¸å…³ä¸Šä¸‹æ–‡ï¼ˆå¦‚å…ƒç´  IDã€ç±»åï¼‰ï¼Œæ·±å…¥äº†è§£ç”¨æˆ·æ“ä½œæµç¨‹ã€‚ æ»šåŠ¨äº‹ä»¶è·Ÿè¸ªè·Ÿè¸ªæ»šåŠ¨äº‹ä»¶ï¼Œè®°å½•ç”¨æˆ·æ»šåŠ¨çš„ä½ç½®å’Œæ—¶é—´ï¼Œåˆ†æç”¨æˆ·åœ¨é¡µé¢ä¸Šçš„æµè§ˆæ·±åº¦å’Œè¡Œä¸ºæ¨¡å¼ï¼Œä¸ºä¼˜åŒ–é¡µé¢å¸ƒå±€å’Œå†…å®¹æä¾›æ•°æ®æ”¯æŒã€‚ 2. æ•°æ®ä¸ŠæŠ¥ åˆ›å»ºä¸ŠæŠ¥è¯·æ±‚é‡‡é›†åˆ°æ•°æ®åï¼Œå°†å…¶æ ¼å¼åŒ–ä¸ºé€‚åˆä¼ è¾“çš„ JSON æ ¼å¼ï¼Œç„¶ååˆ©ç”¨ XMLHttpRequest æˆ– fetch åˆ›å»º POST è¯·æ±‚ï¼Œå°†æ•°æ®å‘é€åˆ°æŒ‡å®šçš„åç«¯æ¥å£ï¼Œç¡®ä¿æ•°æ®å‡†ç¡®ã€åŠæ—¶åœ°ä¼ è¾“ã€‚ è®¾ç½®ä¸ŠæŠ¥æ—¶æœºå’Œç­–ç•¥ å³æ—¶ä¸ŠæŠ¥ï¼šå¯¹äºå…³é”®æ•°æ®ï¼ˆå¦‚é”™è¯¯ä¿¡æ¯ï¼‰é‡‡ç”¨å³æ—¶ä¸ŠæŠ¥ï¼Œç¡®ä¿æ•°æ®åŠæ—¶é€è¾¾åç«¯ï¼Œä½†å¯èƒ½å¢åŠ ç½‘ç»œè¯·æ±‚é¢‘ç‡ã€‚ å®šæ—¶æ‰¹é‡ä¸ŠæŠ¥ï¼šå¯¹äºæ€§èƒ½æŒ‡æ ‡å’Œç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œå¯é‡‡ç”¨å®šæ—¶æ‰¹é‡ä¸ŠæŠ¥ï¼Œä¾‹å¦‚æ¯éš” 5 ç§’é›†ä¸­å‘é€ä¸€æ¬¡æ•°æ®ï¼Œå¹³è¡¡æ€§èƒ½ä¸æ•°æ®å®æ—¶æ€§ã€‚ ç½‘ç»œç¼“å­˜æœºåˆ¶ï¼šè€ƒè™‘ç½‘ç»œçŠ¶å†µï¼Œåœ¨ç½‘ç»œä¸ç¨³å®šæ—¶ï¼Œåˆ©ç”¨ localStorage æˆ– IndexedDB ç¼“å­˜æ•°æ®ï¼Œå¾…ç½‘ç»œæ¢å¤åè‡ªåŠ¨é‡æ–°ä¸ŠæŠ¥ï¼Œä¿è¯æ•°æ®ä¸ä¸¢å¤±ã€‚ 3. æ•°æ®å¤„ç†å’Œåˆ†æï¼ˆåç«¯éƒ¨åˆ†ï¼‰ æ¥æ”¶å’Œå­˜å‚¨æ•°æ®åç«¯æ¥å£æ¥æ”¶å‰ç«¯ä¸ŠæŠ¥çš„æ•°æ®åï¼Œå­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚å¯¹äºç»“æ„åŒ–æ•°æ®å¯ä½¿ç”¨ MySQLï¼Œå¯¹äºéç»“æ„åŒ–æ•°æ®å¯ä½¿ç”¨ MongoDBï¼Œä¸ºåç»­åˆ†ææä¾›æŒä¹…åŒ–çš„æ•°æ®æ”¯æŒã€‚ æ•°æ®æ¸…æ´—å’Œé¢„å¤„ç†æ¸…ç†æ— æ•ˆæˆ–é”™è¯¯çš„æ•°æ®ï¼ˆå¦‚é‡å¤æ•°æ®ã€æ ¼å¼é”™è¯¯çš„æ•°æ®ï¼‰ï¼Œç¡®ä¿åˆ†ææ•°æ®çš„å‡†ç¡®æ€§ã€‚è§£ææ—¶é—´æ ¼å¼ä¸ºç»Ÿä¸€çš„æ—¶é—´æˆ³ï¼Œä¾¿äºåç»­è®¡ç®—å’Œæ¯”è¾ƒï¼ŒåŒæ—¶è¿›è¡Œæ•°æ®ç»Ÿè®¡ï¼Œå¦‚è®¡ç®—æ€§èƒ½æŒ‡æ ‡çš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ç­‰ã€‚ æ•°æ®åˆ†æå’Œå¯è§†åŒ–é€šè¿‡æ•°æ®åˆ†æå·¥å…·å’Œç®—æ³•ï¼Œæ·±å…¥æŒ–æ˜æ€§èƒ½æ•°æ®èƒŒåçš„è§„å¾‹ã€‚ä¾‹å¦‚ï¼Œåˆ†æä¸åŒæ—¶é—´æ®µæˆ–é¡µé¢çš„æ€§èƒ½è¶‹åŠ¿ï¼Œæ‰¾å‡ºæ€§èƒ½æ³¢åŠ¨çš„åŸå› ã€‚å°†åˆ†æç»“æœä»¥ç›´è§‚çš„å›¾è¡¨å½¢å¼å±•ç¤ºï¼Œå¦‚æŸ±çŠ¶å›¾å±•ç¤ºä¸åŒé¡µé¢çš„åŠ è½½æ—¶é—´å¯¹æ¯”ï¼ŒæŠ˜çº¿å›¾å‘ˆç°æ€§èƒ½æŒ‡æ ‡éšæ—¶é—´çš„å˜åŒ–è¶‹åŠ¿ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿç†è§£å’Œå®šä½é—®é¢˜ã€‚ 4. å¯æ‰©å±•æ€§è®¾è®¡ æ’ä»¶æœºåˆ¶æä¾›æ’ä»¶æ¥å£ï¼Œå…è®¸å¼€å‘è€…æ ¹æ®é¡¹ç›®ç‰¹å®šéœ€æ±‚æ‰©å±•ç›‘æ§åŠŸèƒ½ã€‚æ’ä»¶åº”åŒ…å«åˆå§‹åŒ–å‡½æ•°å’Œæ•°æ®å¤„ç†å‡½æ•°ï¼Œä¾‹å¦‚ç¼–å†™æ’ä»¶é‡‡é›†ä¸šåŠ¡ç›¸å…³çš„è‡ªå®šä¹‰æ•°æ®ï¼ˆå¦‚ç”¨æˆ·è´­ç‰©æµç¨‹ä¸­çš„å…³é”®æ“ä½œä¿¡æ¯ï¼‰ï¼Œæˆ–è€…å¯¹é‡‡é›†åˆ°çš„æ•°æ®è¿›è¡Œä¸ªæ€§åŒ–å¤„ç†åå†ä¸ŠæŠ¥ã€‚ é…ç½®çµæ´»æ€§é€šè¿‡é…ç½®æ–‡ä»¶æˆ–åˆå§‹åŒ–å‚æ•°ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿè½»æ¾è°ƒæ•´ç›‘æ§èŒƒå›´ï¼ˆå¦‚ä»…ç›‘æ§å…³é”®é¡µé¢æˆ–åŠŸèƒ½æ¨¡å—ï¼‰ã€è‡ªå®šä¹‰ä¸ŠæŠ¥åœ°å€ï¼ˆé€‚åº”ä¸åŒçš„åç«¯éƒ¨ç½²ç¯å¢ƒï¼‰ã€çµæ´»è®¾ç½®æ•°æ®é‡‡é›†é¢‘ç‡ï¼ˆæ ¹æ®åº”ç”¨çš„å®é™…æƒ…å†µå¹³è¡¡æ€§èƒ½å’Œæ•°æ®å®Œæ•´æ€§ï¼‰ã€‚ 5. ä¸å‰ç«¯æ¡†æ¶é›†æˆè‹¥é’ˆå¯¹ç‰¹å®šå‰ç«¯æ¡†æ¶ï¼ˆå¦‚ Vueã€Reactï¼‰è®¾è®¡ï¼Œå¯å°†ç›‘æ§åŠŸèƒ½å°è£…ä¸ºæ’ä»¶æˆ–æŒ‡ä»¤ã€‚åœ¨ Vue ä¸­ï¼Œåˆ©ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­ mounted å’Œ destroyed åµŒå…¥æ•°æ®é‡‡é›†é€»è¾‘ï¼›åœ¨ React ä¸­ï¼Œé€šè¿‡è‡ªå®šä¹‰ Hooks å®ç°ã€‚ä¸æ¡†æ¶çš„è·¯ç”±ç³»ç»Ÿç´§å¯†ç»“åˆï¼Œå®ç°é¡µé¢åˆ‡æ¢æ—¶çš„æ€§èƒ½ç›‘æ§å’Œæ•°æ®ä¸ŠæŠ¥ï¼Œæä¾›å…¨é¢çš„åº”ç”¨ç›‘æ§è§£å†³æ–¹æ¡ˆã€‚ 6. å®‰å…¨æ€§è€ƒè™‘ æ•°æ®åŠ å¯†åœ¨æ•°æ®ä¸ŠæŠ¥è¿‡ç¨‹ä¸­ï¼Œå¯¹æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·èº«ä»½æ ‡è¯†ã€ä¸šåŠ¡æ•°æ®ç­‰ï¼‰ä½¿ç”¨ AES ç­‰åŠ å¯†ç®—æ³•è¿›è¡ŒåŠ å¯†ï¼Œé˜²æ­¢æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«çªƒå–æˆ–ç¯¡æ”¹ï¼Œç¡®ä¿æ•°æ®å®‰å…¨ã€‚ æƒé™ç®¡ç†åç«¯æ¥å£å®æ–½ä¸¥æ ¼çš„æƒé™éªŒè¯ï¼Œé‡‡ç”¨ JWT ä»¤ç‰Œè®¤è¯ï¼Œåªæœ‰ç»è¿‡æˆæƒçš„å‰ç«¯åº”ç”¨æ‰èƒ½æˆåŠŸä¸ŠæŠ¥æ•°æ®ï¼Œé˜²æ­¢éæ³•æ•°æ®æ³¨å…¥ï¼Œä¿éšœç³»ç»Ÿçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚ ä¸‰ã€æ„å»ºæ­¥éª¤1. é¡¹ç›®åˆå§‹åŒ–åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨ npm init ç”Ÿæˆ package.json æ–‡ä»¶ï¼Œåˆå§‹åŒ–é¡¹ç›®åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚é¡¹ç›®åç§°ã€ç‰ˆæœ¬å·å’Œä¾èµ–ç®¡ç†ç­‰ã€‚ 2. ä¾èµ–å®‰è£…æ ¹æ®é¡¹ç›®éœ€æ±‚ï¼Œå®‰è£…å¿…è¦çš„ä¾èµ–åº“ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ performance-now è·å–æ›´ç²¾ç¡®çš„æ—¶é—´æˆ³ï¼Œaxios å¤„ç† HTTP è¯·æ±‚ï¼Œtypescript è¿›è¡Œç±»å‹å®‰å…¨å¼€å‘ï¼Œå¹¶å®‰è£…ç›¸åº”çš„ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚ 3. æ€§èƒ½æŒ‡æ ‡é‡‡é›†æ¨¡å—å°è£… Performance API çš„ä½¿ç”¨ï¼Œåˆ›å»ºå‡½æ•°è·å–é¡µé¢åŠ è½½æ—¶é—´ã€èµ„æºåŠ è½½æ—¶é—´ç­‰å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼š 1234function getPageLoadTime() { const { performance } = window; return performance.timing.loadEventEnd - performance.timing.navigationStart;} ç›‘å¬é¡µé¢åŠ è½½äº‹ä»¶ï¼Œåœ¨åˆé€‚æ—¶æœºè°ƒç”¨é‡‡é›†å‡½æ•°å¹¶å­˜å‚¨æ•°æ®ï¼š 123window.addEventListener('load', () =&gt; { const loadTime = getPageLoadTime(); // å­˜å‚¨æ•°æ®ä»¥ä¾¿åç»­ä¸ŠæŠ¥}); 4. é”™è¯¯ä¿¡æ¯é‡‡é›†æ¨¡å—å®ç° window.onerror äº‹ä»¶ç›‘å¬å™¨ï¼Œæ•è· JavaScript é”™è¯¯å¹¶è®°å½•è¯¦ç»†ä¿¡æ¯ï¼š 12345678910window.onerror = function (message, source, lineno, colno, error) { const errorData = { message, source, lineno, colno, stack: error &amp;&amp; error.stack }; // å¤„ç†é”™è¯¯æ•°æ®ï¼Œå¦‚å­˜å‚¨æˆ–ä¸ŠæŠ¥}; é’ˆå¯¹ Promise é”™è¯¯å’Œèµ„æºåŠ è½½é”™è¯¯ï¼Œåˆ†åˆ«æ·»åŠ ç›¸åº”çš„ç›‘å¬å™¨ï¼š 1234567window.addEventListener('unhandledrejection', (event) =&gt; { const errorData = { message: event.reason.message, stack: event.reason.stack }; // å¤„ç†Promiseé”™è¯¯æ•°æ®}); 5. ç”¨æˆ·è¡Œä¸ºé‡‡é›†æ¨¡å—ä¸ºå¸¸è§çš„ç”¨æˆ·äº¤äº’äº‹ä»¶æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œè®°å½•ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼š 12345678910document.addEventListener('click', (event) =&gt; { const behaviorData = { type: 'click', target: event.target.tagName, time: new Date().getTime(), targetId: event.target.id, targetClass: event.target.className }; // å¤„ç†è¡Œä¸ºæ•°æ®}); 6. æ•°æ®ä¸ŠæŠ¥æ¨¡å—å°è£…æ•°æ®ä¸ŠæŠ¥å‡½æ•°ï¼Œå°†é‡‡é›†åˆ°çš„æ•°æ®æ ¼å¼åŒ–ä¸º JSON æ ¼å¼ï¼Œå¹¶ä½¿ç”¨ fetch æˆ– axios å‘é€ POST è¯·æ±‚åˆ°åç«¯æ¥å£ï¼š 1234567891011121314151617async function reportData(data) { try { const response = await fetch('your-backend-api-url', { method: 'POST', headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer YOUR_TOKEN' // æƒé™éªŒè¯ä»¤ç‰Œ }, body: JSON.stringify(data) }); const result = await response.json(); // å¤„ç†ä¸ŠæŠ¥ç»“æœ } catch (error) { // å¤„ç†ä¸ŠæŠ¥å¤±è´¥æƒ…å†µï¼Œå­˜å…¥ç¼“å­˜ localStorage.setItem('monitoringData', JSON.stringify(data)); }} 7. åç«¯æ­å»ºï¼ˆç®€è¦æ¦‚è¿°ï¼‰é€‰æ‹©åˆé€‚çš„åç«¯æŠ€æœ¯æ ˆï¼Œå¦‚ Node.js + Expressï¼š 123456789101112131415161718192021222324252627282930const express = require('express');const app = express();const bodyParser = require('body-parser');const jwt = require('jsonwebtoken'); // ç”¨äºæƒé™éªŒè¯// è§£æJSONè¯·æ±‚ä½“app.use(bodyParser.json());// æƒé™éªŒè¯ä¸­é—´ä»¶function verifyToken(req, res, next) { const token = req.headers.authorization?.split(' ')[1]; if (!token) return res.status(403).send('No token provided'); jwt.verify(token, process.env.JWT_SECRET, (err, decoded) =&gt; { if (err) return res.status(401).send('Invalid token'); req.user = decoded; next(); });}app.post('/api/report', verifyToken, (req, res) =&gt; { const data = req.body; // å°†æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ï¼ˆå¦‚MySQLæˆ–MongoDBï¼‰ console.log('Received data:', data); res.send('Data received successfully');});const port = 3000;app.listen(port, () =&gt; { console.log(`Server running on port ${port}`);}); 8. å¯æ‰©å±•æ€§è®¾è®¡å®šä¹‰æ’ä»¶æ¥å£ï¼Œè§„å®šæ’ä»¶çš„ç»“æ„å’ŒåŠŸèƒ½è§„èŒƒï¼š 12345// æ’ä»¶æ¥å£å®šä¹‰interface MonitorPlugin { init(config: any): void; processData(data: any): any;} åœ¨ä¸»ç›‘æ§æ¨¡å—ä¸­ï¼Œæä¾›åŠ è½½æ’ä»¶çš„æœºåˆ¶ï¼š 12345678910class Monitor { plugins: MonitorPlugin[] = []; addPlugin(plugin: MonitorPlugin) { this.plugins.push(plugin); plugin.init(this.config); } processWithPlugins(data: any) { return this.plugins.reduce((acc, plugin) =&gt; plugin.processData(acc), data); }} 9. å®‰å…¨æ€§å¢å¼ºå¯¹äºæ•°æ®åŠ å¯†ï¼Œä½¿ç”¨ AES ç®—æ³•å¯¹æ•æ„Ÿæ•°æ®è¿›è¡ŒåŠ å¯†å¤„ç†ï¼š 1234567const crypto = require('crypto');function encryptData(data, key) { const cipher = crypto.createCipheriv('aes-256-cbc', key, iv); let encrypted = cipher.update(data, 'utf8', 'hex'); encrypted += cipher.final('hex'); return encrypted;} 10. æµ‹è¯•ä¸ä¼˜åŒ–ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–å„ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œä½¿ç”¨ Jest æµ‹è¯•æ¡†æ¶ï¼š 12345678910111213test('getPageLoadTime should return correct value', () =&gt; { const expectedLoadTime = 1000; // æ¨¡æ‹Ÿperformance.timing.loadEventEndå’ŒnavigationStart Object.defineProperty(window.performance, 'timing', { value: { loadEventEnd: expectedLoadTime + 500, navigationStart: 500 }, writable: true }); const result = getPageLoadTime(); expect(result).toBe(expectedLoadTime);}); è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œé¿å…ç›‘æ§ä»£ç å¯¹åº”ç”¨æ€§èƒ½äº§ç”Ÿè¿‡å¤§å½±å“ï¼Œä¾‹å¦‚ä¼˜åŒ–æ•°æ®é‡‡é›†çš„é¢‘ç‡ï¼Œå‡å°‘ä¸å¿…è¦çš„äº‹ä»¶ç›‘å¬å’Œè®¡ç®—ã€‚ 11. æ–‡æ¡£ç¼–å†™æ’°å†™è¯¦ç»†çš„æ–‡æ¡£ï¼ŒåŒ…æ‹¬é¡¹ç›®çš„ä½¿ç”¨æ–¹æ³•ã€API æ–‡æ¡£ã€é…ç½®è¯´æ˜ç­‰ã€‚ä¾‹å¦‚ï¼Œè¯´æ˜å¦‚ä½•åˆå§‹åŒ–ç›‘æ§å®ä¾‹ã€é…ç½®ä¸ŠæŠ¥åœ°å€ã€æ·»åŠ è‡ªå®šä¹‰æ’ä»¶ç­‰ï¼Œæ–¹ä¾¿å…¶ä»–å¼€å‘è€…ä½¿ç”¨å’Œæ‰©å±•è¯¥ç›‘æ§æ¡†æ¶ã€‚ é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥é€æ­¥æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œå¤‡ã€å¯æ‰©å±•ä¸”å®‰å…¨çš„å‰ç«¯ç›‘æ§æ¡†æ¶ï¼Œä¸ºå‰ç«¯åº”ç”¨çš„æ€§èƒ½ä¼˜åŒ–å’Œé”™è¯¯æ’æŸ¥æä¾›æœ‰åŠ›æ”¯æŒã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯æ ¹æ®å…·ä½“éœ€æ±‚è¿›ä¸€æ­¥å®šåˆ¶å’Œå®Œå–„è¯¥æ¡†æ¶ï¼Œä»¥æ»¡è¶³ä¸åŒé¡¹ç›®çš„ç›‘æ§éœ€æ±‚ã€‚æ¬¢è¿è®¿é—® monitoring-tool æŸ¥çœ‹æ›´å¤šå®ç°ç»†èŠ‚å’Œç¤ºä¾‹ä»£ç ","link":"/2025/06/03/%E4%BB%8E%E9%9B%B6%E6%9E%84%E5%BB%BA%E5%89%8D%E7%AB%AF%E7%9B%91%E6%8E%A7%E6%A1%86%E6%9E%B6%EF%BC%9A%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/"},{"title":"ä»€ä¹ˆæ˜¯XSSï¼Ÿ","text":"ä»€ä¹ˆæ˜¯XSSå‘¢ è·¨ç½‘ç«™æŒ‡ä»¤ç ï¼ˆè‹±è¯­ï¼šCross-site scriptingï¼Œé€šå¸¸ç®€ç§°ä¸ºï¼šXSSï¼‰æ˜¯ä¸€ç§ç½‘ç«™åº”ç”¨ç¨‹å¼çš„å®‰å…¨æ¼æ´æ”»å‡»ï¼Œæ˜¯[ä»£ç æ³¨å…¥]çš„ä¸€ç§ã€‚å®ƒå…è®¸æ¶æ„ä½¿ç”¨è€…å°†ç¨‹å¼ç æ³¨å…¥åˆ°ç½‘é¡µä¸Šï¼Œå…¶ä»–ä½¿ç”¨è€…åœ¨è§‚çœ‹ç½‘é¡µæ—¶å°±ä¼šå—åˆ°å½±å“ã€‚è¿™ç±»æ”»å‡»é€šå¸¸åŒ…å«äº† HTML ä»¥åŠä½¿ç”¨è€…ç«¯è„šæœ¬è¯­è¨€ã€‚ XSS åˆ†ä¸ºä¸‰ç§ï¼šåå°„å‹ï¼Œå­˜å‚¨å‹å’Œ DOM-based å¦‚ä½•æ”»å‡»XSS é€šè¿‡ä¿®æ”¹ HTML èŠ‚ç‚¹æˆ–è€…æ‰§è¡Œ JS ä»£ç æ¥æ”»å‡»ç½‘ç«™ã€‚ ä¾‹å¦‚é€šè¿‡ URL è·å–æŸäº›å‚æ•° 12&lt;!-- http://www.domain.com?name=&lt;script&gt;alert(1)&lt;/script&gt; --&gt;&lt;div&gt;{{name}}&lt;/div&gt; ä¸Šè¿° URL è¾“å…¥å¯èƒ½ä¼šå°† HTML æ”¹ä¸º &lt;div&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;/div&gt; ï¼Œè¿™æ ·é¡µé¢ä¸­å°±å‡­ç©ºå¤šäº†ä¸€æ®µå¯æ‰§è¡Œè„šæœ¬ã€‚è¿™ç§æ”»å‡»ç±»å‹æ˜¯åå°„å‹æ”»å‡»ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ DOM-based æ”»å‡»ã€‚ ä¹Ÿæœ‰å¦ä¸€ç§åœºæ™¯ï¼Œæ¯”å¦‚å†™äº†ä¸€ç¯‡åŒ…å«æ”»å‡»ä»£ç  &lt;script&gt;alert(1)&lt;/script&gt; çš„æ–‡ç« ï¼Œé‚£ä¹ˆå¯èƒ½æµè§ˆæ–‡ç« çš„ç”¨æˆ·éƒ½ä¼šè¢«æ”»å‡»åˆ°ã€‚è¿™ç§æ”»å‡»ç±»å‹æ˜¯å­˜å‚¨å‹æ”»å‡»ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ DOM-based æ”»å‡»ï¼Œå¹¶ä¸”è¿™ç§æ”»å‡»æ‰“å‡»é¢æ›´å¹¿ã€‚ å¦‚ä½•é˜²å¾¡æœ€æ™®éçš„åšæ³•æ˜¯è½¬ä¹‰è¾“å…¥è¾“å‡ºçš„å†…å®¹ï¼Œå¯¹äºå¼•å·ï¼Œå°–æ‹¬å·ï¼Œæ–œæ è¿›è¡Œè½¬ä¹‰ 12345678910function escape(str) { str = str.replace(/&amp;/g, '&amp;amp;') str = str.replace(/&lt;/g, '&amp;lt;') str = str.replace(/&gt;/g, '&amp;gt;') str = str.replace(/&quot;/g, '&amp;quto;') str = str.replace(/'/g, '&amp;#39;') str = str.replace(/`/g, '&amp;#96;') str = str.replace(/\\//g, '&amp;#x2F;') return str} é€šè¿‡è½¬ä¹‰å¯ä»¥å°†æ”»å‡»ä»£ç  &lt;script&gt;alert(1)&lt;/script&gt; å˜æˆ 12// -&gt; &amp;lt;script&amp;gt;alert(1)&amp;lt;&amp;#x2F;script&amp;gt;escape('&lt;script&gt;alert(1)&lt;/script&gt;') å¯¹äºæ˜¾ç¤ºå¯Œæ–‡æœ¬æ¥è¯´ï¼Œä¸èƒ½é€šè¿‡ä¸Šé¢çš„åŠæ³•æ¥è½¬ä¹‰æ‰€æœ‰å­—ç¬¦ï¼Œå› ä¸ºè¿™æ ·ä¼šæŠŠéœ€è¦çš„æ ¼å¼ä¹Ÿè¿‡æ»¤æ‰ã€‚è¿™ç§æƒ…å†µé€šå¸¸é‡‡ç”¨ç™½åå•è¿‡æ»¤çš„åŠæ³•ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡é»‘åå•è¿‡æ»¤ï¼Œä½†æ˜¯è€ƒè™‘åˆ°éœ€è¦è¿‡æ»¤çš„æ ‡ç­¾å’Œæ ‡ç­¾å±æ€§å®åœ¨å¤ªå¤šï¼Œæ›´åŠ æ¨èä½¿ç”¨ç™½åå•çš„æ–¹å¼ã€‚ 1234var xss = require('xss')var html = xss('&lt;h1 id=&quot;title&quot;&gt;XSS Demo&lt;/h1&gt;&lt;script&gt;alert(&quot;xss&quot;);&lt;/script&gt;')// -&gt; &lt;h1&gt;XSS Demo&lt;/h1&gt;&amp;lt;script&amp;gt;alert(&quot;xss&quot;);&amp;lt;/script&amp;gt;console.log(html) ä»¥ä¸Šç¤ºä¾‹ä½¿ç”¨äº† js-xss æ¥å®ç°ã€‚å¯ä»¥çœ‹åˆ°åœ¨è¾“å‡ºä¸­ä¿ç•™äº† h1 æ ‡ç­¾ä¸”è¿‡æ»¤äº† script æ ‡ç­¾","link":"/2021/07/11/%E4%BB%80%E4%B9%88%E6%98%AFXSS%EF%BC%9F/"},{"title":"å‰ç«¯å›½é™…åŒ–å…¨æµç¨‹è§£å†³æ–¹æ¡ˆ","text":"èƒŒæ™¯è¿›å…¥é¡¹ç›®ç»„ï¼Œæ¥åˆ°çš„éœ€æ±‚æ˜¯vueæ¡†æ¶çš„é¡¹ç›®å®ç°å›½é™…åŒ–ï¼Œå®ç°ä¸­è‹±æ–‡ç‰ˆæœ¬çš„åˆ‡æ¢ã€‚ç›®å‰å¸¸ç”¨çš„å‰ç«¯å›½é™…åŒ–å®ç°æ–¹å¼æ˜¯ä½¿ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œä½¿ç”¨çš„æ˜¯åŒä¸€å¥—ç•Œé¢ï¼Œæ ¹æ®è¯­è¨€çš„ä¸åŒåŠ è½½å¯¹åº”çš„é…ç½®æ–‡ä»¶ã€‚ è€Œå®ç°è¿™ä¸€åŠŸèƒ½ï¼Œé¢å¯¹çš„é—®é¢˜æ˜¯éœ€è¦å°†é¡¹ç›®ä¸­çš„ä¸­æ–‡æŠ½ç¦»å‡ºä¸­æ–‡çš„è¯­è¨€åŒ…ï¼Œå¹¶å°†å…¶ç¿»è¯‘è¾“å‡ºè‹±æ–‡è¯­è¨€åŒ…ï¼Œä»¥åŠé¡¹ç›®ä¸­ä¸­æ–‡æ›¿æ¢æˆè¯­è¨€åŒ…ä¸­çš„å˜é‡ï¼Œå·¥ä½œé‡å¤§ä¸”å®¹æ˜“å‡ºé”™ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´æ™ºèƒ½ã€æ›´é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆæ¥åº”å¯¹è¿™ä¸€æŒ‘æˆ˜ï¼Œç»è¿‡æ·±å…¥ç ”ç©¶å„ç§æŠ€æœ¯æ–¹æ¡ˆï¼Œæ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡æ’ä»¶å®ç°è‡ªåŠ¨è¯†åˆ«ä»£ç ä¸­çš„å¯ç¿»è¯‘å­—ç¬¦ä¸²ã€ç”Ÿæˆç¿»è¯‘æ–‡ä»¶å¹¶åŒæ­¥ä¸åŒè¯­è¨€è¿™ä¸€ç¹ççš„è¿‡ç¨‹å‘¢ â€“ äºæ˜¯ä¸€ä¸ªæå®šé¡¹ç›®å›½é™…åŒ–çš„æ’ä»¶å°±æ­¤è¯ç”Ÿã€‚ æ–¹æ¡ˆé€‰æ‹©å¸¸ç”¨é¡¹ç›®ä½¿ç”¨çš„æŠ€æœ¯æ ˆç›¸åŒ¹é…çš„å›½é™…åŒ–çš„æ’ä»¶å·¥å…·ï¼š vue ä½¿ç”¨æ’ä»¶ï¼švue-i18n angularä½¿ç”¨æ’ä»¶ï¼šangular-translate reactä½¿ç”¨æ’ä»¶ï¼šreact-intl jquery ä½¿ç”¨æ’ä»¶ï¼š jquery.i18n.property è¿™äº›æ’ä»¶çš„è§£å†³æ–¹æ¡ˆéƒ½æ˜¯åŸºäºå¤šä¸ªå›½å®¶é…ç½®ä¸åŒçš„è¯­è¨€æ–‡æ¡ˆ,å°†æ‰€æœ‰çš„è¯­è¨€èµ„æºæ”¾åœ¨ç‹¬ç«‹çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œä»¥æ¯ä¸ªå­—æ®µå”¯ä¸€æ ‡è¯†ï¼ˆé€šè¿‡å¯¹åº”keyåŠ¨æ€æ¸²æŸ“ï¼‰ï¼Œå»æ‰¾åˆ°ä¸åŒè¯­è¨€ç›¸å¯¹åº”çš„å­—æ®µï¼Œä»¥æ˜¾ç¤ºæ¥å®Œæˆå‰ç«¯å›½é™…åŒ–ã€‚ è¿™æ ·åœ¨htmlæˆ‘ä»¬åªéœ€è¦è¾“å‡ºæ ‡è¯†ç¬¦ï¼Œåœ¨jsä¸­é…ç½®å¥½åŠŸèƒ½ã€è·¯å¾„ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®©å®ƒè‡ªè¡Œå»è¯­è¨€èµ„æºåŒ…ä¸­æ‰¾åˆ°å¯¹åº”è¯­è¨€å­—æ®µä»¥æ˜¾ç¤ºã€‚ ç”±äºæ˜¯vueæ¡†æ¶çš„é¡¹ç›®ï¼Œæ‰€ä»¥æ’ä»¶ä¹Ÿæ˜¯åŸºäºvue+vue-i18nçš„åŸºç¡€ä¸‹è¿›è¡Œè®¾è®¡å’Œå¼€å‘çš„ã€‚ å®ç°è¿‡ç¨‹ä¸ºäº†ç®€åŒ–å›½é™…åŒ–è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªä¸€é”®å¼è§£å†³æ–¹æ¡ˆæ’ä»¶ã€‚è¯¥æ’ä»¶å¯ä»¥è‡ªåŠ¨è¯†åˆ«ä»£ç ä¸­çš„å¯ç¿»è¯‘å­—ç¬¦ä¸²ï¼Œç”Ÿæˆå¯¹åº”çš„ç¿»è¯‘æ–‡ä»¶ï¼Œå¹¶å®ç°ä¸åŒè¯­è¨€ä¹‹é—´çš„åŒæ­¥ã€‚webpack-in-loaderï¼šè¯¥Loaderé€šè¿‡é›†æˆåˆ°æ„å»ºæµç¨‹ï¼Œå®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š è‡ªåŠ¨è¯†åˆ« ï¼šæ·±æ½œVueã€JavaScriptã€TypeScriptåŠå…¶è¡ç”Ÿ(JSX,TSX)ç­‰æºç æµ·æ´‹ï¼Œç²¾å‡†æ•æ‰æ¯ä¸€å¤„å¾…è¯‘å­—ç¬¦ä¸²ï¼Œæ— é—æ¼ï¼Œé«˜æ•ˆç‡ã€‚ ç¿»è¯‘æ–‡ä»¶ç”Ÿæˆ ï¼šåŸºäºè¯†åˆ«åˆ°çš„å­—ç¬¦ä¸²è‡ªåŠ¨ç”Ÿæˆæˆ–æ›´æ–°è¯­è¨€èµ„æºæ–‡ä»¶ï¼Œå¦‚ä½¿ç”¨MD5ç ä½œä¸ºé”®å€¼ï¼Œç¡®ä¿å”¯ä¸€æ€§ã€‚ åŒæ­¥ä¸åŒè¯­è¨€ ï¼šæ”¯æŒè‡ªåŠ¨ç¿»è¯‘ï¼ˆé€šè¿‡é›†æˆç¿»è¯‘APIå¦‚ç™¾åº¦ç¿»è¯‘ï¼‰å’Œæ‰‹åŠ¨ç¿»è¯‘ï¼Œç¡®ä¿ç¿»è¯‘å†…å®¹ä¸æºè¯­è¨€çš„åŒæ­¥æ›´æ–°ã€‚ é›†æˆä¾¿åˆ©æ€§ ï¼šä½œä¸ºWebpackæ„å»ºæµç¨‹ä¸­çš„éšå½¢åŠ©æ‰‹ï¼Œåªéœ€ç®€å•é…ç½®ï¼Œæ— éœ€è§¦åŠ¨åŸå§‹ä»£ç ï¼Œå³å¯è½»æ¾å¼€å¯å›½é™…åŒ–æ—…ç¨‹ã€‚å¼€å‘è€…åäº«å…¶æˆï¼Œå›½é™…åŒ–éƒ¨ç½²ï¼Œä¸€è§¦å³å‘ã€‚ å®ç°æ­¥éª¤1.å®‰è£…ä¸é…ç½®ï¼šé€šè¿‡npmæˆ–yarnå®‰è£…webpack-in-loaderï¼Œå¹¶æŒ‰ç…§è¯´æ˜é…ç½®Loaderè§„åˆ™ï¼ŒæŒ‡å®šè¯­è¨€æ–‡ä»¶è·¯å¾„ã€‚ 123npm i webpack-in-loader --save-devyarn add webpack-in-loader --dev 2.ä¸­æ–‡å­—ç¬¦ä¸²æå–ï¼šä½¿ç”¨CLIå‘½ä»¤npx i18n generateä»æºä»£ç ä¸­æå–ä¸­æ–‡å­—ç¬¦ä¸²å¹¶ç”Ÿæˆåˆå§‹çš„zh.jsèµ„æºæ–‡ä»¶ã€‚ 123npx i18n generate [src]#å¯¹srcç›®å½•ä¸‹çš„vue/js/ts/tsx/jsxæ–‡ä»¶è¿›è¡Œä¸­æ–‡æå–å¹¶ç”Ÿæˆå›½é™…åŒ–èµ„æºæ–‡ä»¶#é»˜è®¤srcç›®å½• src é»˜è®¤å€¼ä¸ºsrc 3.ç¿»è¯‘ç®¡ç†ï¼šé€šè¿‡npx i18n initåˆå§‹åŒ–ç¿»è¯‘é…ç½®ï¼Œé€‰æ‹©ç¿»è¯‘æ¨¡å¼ï¼ˆå¦‚ç™¾åº¦ç¿»è¯‘æˆ–ChatGPTï¼‰ï¼Œå¹¶é…ç½®ç›¸åº”çš„APIå¯†é’¥ã€‚æ‰§è¡Œnpx i18n translateå¯åŠ¨ç¿»è¯‘æµç¨‹ã€‚ 12345npx i18n init #åˆå§‹åŒ–ç¿»è¯‘é…ç½®é¡¹ï¼ˆå¦‚å·²æœ‰é…ç½®é¡¹ï¼Œä¸è¦é‡å¤æ‰§è¡Œï¼Œä¸ç„¶ä¼šè¦†ç›–ï¼‰npx i18n translate#å¼€å§‹ç¿»è¯‘æ–‡ä»¶ åˆå§‹åŒ–é¡¹ç›®ï¼Œç”Ÿæˆçš„é…ç½®æ–‡ä»¶ i18n-config.json 1234567891011module.exports = { dir: &quot;./src/locale/&quot;, // ç›®æ ‡ç›®å½• file: 'zh.js', // ç¿»è¯‘çš„æ–‡ä»¶ distLangs: ['en'], // è¦ç¿»è¯‘çš„è¯­è¨€ï¼Œå¿…é¡»ä¸ºç™¾åº¦ç¿»è¯‘æ–‡æ¡£ä¸Šçš„codeå€¼ open: true, // leaderæ˜¯å¦å¯ç”¨ é»˜è®¤true mode:'Baidu', //ç¿»è¯‘æ–¹å¼: 1.Baidu:ç™¾åº¦ç¿»è¯‘ 2:chatGPT:openaiç¿»è¯‘ appId:'', // ç™¾åº¦ç¿»è¯‘appid secret:'', // ç™¾åº¦ç¿»è¯‘å¯†é’¥ openAiKey: '', // chatGPT key singleNum: 3000, //ç™¾åº¦ç¿»è¯‘å•æ¬¡è¯·æ±‚æœ€é•¿æ¬¡æ•° å¯é…ç½®èŒƒå›´ï¼ˆ3900 - 600ï¼‰ä¸å¡«åˆ™ä¸ºé»˜è®¤å€¼ 1500ï¼ˆç™¾åº¦è´¦å·ä¸åŒç­‰çº§æœ€é•¿æ¬¡æ•°ä¸åŒï¼‰}; 4.äººå·¥æ ¡éªŒä¸è°ƒæ•´ï¼šæä¾›å‘½ä»¤npx i18n transformä»¥æ‰‹åŠ¨æ ¡æ­£ç¿»è¯‘é”™è¯¯ï¼Œç¡®ä¿ç¿»è¯‘è´¨é‡ã€‚5.å›½é™…åŒ–é…ç½®æ•´åˆï¼šåœ¨Vueé¡¹ç›®ä¸­æ­£ç¡®é…ç½®Vue-i18nï¼Œç¡®ä¿è¯­è¨€åŒ…èƒ½å¤Ÿè¢«æ­£ç¡®è½½å…¥ï¼Œå¹¶åœ¨åº”ç”¨å¯åŠ¨æ—¶ç”Ÿæ•ˆã€‚ æ³¨ï¼šç›®å‰ï¼Œè¯¥æ’ä»¶ç¨³å®šç‰ˆå·²ç»åœ¨å…¬å¸çš„ç ”å‘ååŒå¹³å°ä¸­æ¥å…¥ï¼Œå¾—åˆ°å„éƒ¨é—¨åŒäº‹çš„è®¤å¯ï¼Œå¯æ”¾å¿ƒä½¿ç”¨ã€‚ ä¼˜åŠ¿ä¸äº®ç‚¹ è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜ï¼šæ˜¾è‘—å‡å°‘æ‰‹åŠ¨ç¼–å†™ä¸ç»´æŠ¤è¯­è¨€åŒ…çš„å·¥ä½œé‡ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ çµæ´»æ€§å¼ºï¼šæ”¯æŒè‡ªåŠ¨ä¸æ‰‹åŠ¨ç¿»è¯‘æ¨¡å¼ï¼Œé€‚åº”ä¸åŒåœºæ™¯éœ€æ±‚ã€‚ æ˜“äºé›†æˆï¼šä½œä¸ºWebpack Loaderæ— ç¼èå…¥ç°æœ‰æ„å»ºæµç¨‹ï¼Œé™ä½æŠ€æœ¯é—¨æ§›ã€‚ è´¨é‡å¯æ§ï¼šç»“åˆè‡ªåŠ¨ç¿»è¯‘ä¸äººå·¥æ ¡å¯¹ï¼Œä¿è¯ç¿»è¯‘è´¨é‡ã€‚ ç»“è¯­é€šè¿‡ä½¿ç”¨è¯¥ä¸€é”®å¼å›½é™…åŒ–è§£å†³æ–¹æ¡ˆæ’ä»¶ï¼Œæˆ‘ä»¬å¤§å¤§ç®€åŒ–äº†é¡¹ç›®çš„å›½é™…åŒ–è¿‡ç¨‹ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚å¼€å‘äººå‘˜å¯ä»¥æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å®ç°ï¼Œè€Œæ— éœ€èŠ±è´¹å¤§é‡æ—¶é—´å’Œç²¾åŠ›åœ¨ç¿»è¯‘å’Œæ›¿æ¢ä¸Šã€‚è¿™ä¸€æ™ºèƒ½åŒ–çš„å›½é™…åŒ–æ–¹æ¡ˆä¸ºå¤šè¯­è¨€ç‰ˆæœ¬çš„å¼€å‘æä¾›äº†ä¾¿åˆ©ï¼Œä¹Ÿä¸ºé¡¹ç›®çš„å›½é™…åŒ–éœ€æ±‚æä¾›äº†æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚æœ‹å‹ä»¬ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™æ¬¾æ’ä»¶å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è®¿é—®æˆ‘çš„ GitHub é¡¹ç›®é¡µ:https://github.com/hujinbin/webpack-i18n-loaderæ‚¨å¯ä»¥åœ¨è¯¥åœ°å€æ‰¾åˆ°æ’ä»¶çš„è¯¦ç»†æ–‡æ¡£ã€ä½¿ç”¨ç¤ºä¾‹ä»¥åŠæºä»£ç ã€‚æˆ‘ä¼šæŒç»­è¿½åŠ æ–°ç‰¹æ€§å’Œæ”¹è¿›å·²æœ‰åŠŸèƒ½ï¼Œè®©æ’ä»¶å˜å¾—æ›´åŠ ä¼˜è´¨ã€‚ ä¸çŸ¥æ˜¯å¦æœ‰å…´è¶£å¸®æˆ‘ä»¬ç‚¹ä¸ª Star æ”¯æŒä¸€ä¸‹å‘¢ï¼Ÿ","link":"/2024/06/11/%E5%89%8D%E7%AB%AF%E5%9B%BD%E9%99%85%E5%8C%96%E5%85%A8%E6%B5%81%E7%A8%8B%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},{"title":"å¦‚ä½•åšç»„ä»¶åº“çš„å•å…ƒæµ‹è¯•","text":"å‰è¨€åœ¨æˆ‘ä»¬å¼€å‘å®Œä¸€ä¸ªç»„ä»¶åº“çš„åï¼Œåœ¨åšå•å…ƒæµ‹è¯•æ—¶ï¼Œä»£ç è¦†ç›–ç‡å¸¸å¸¸è¢«æ‹¿æ¥ä½œä¸ºè¡¡é‡æµ‹è¯•å¥½åçš„æŒ‡æ ‡ï¼Œç”šè‡³ï¼Œç”¨ä»£ç è¦†ç›–ç‡æ¥è€ƒæ ¸æµ‹è¯•ä»»åŠ¡å®Œæˆæƒ…å†µï¼Œæ¯”å¦‚ï¼Œä»£ç è¦†ç›–ç‡å¿…é¡»è¾¾åˆ°80ï¼…æˆ– 90ï¼…ã€‚äºæ˜¯ä¹ï¼Œæµ‹è¯•äººå‘˜è´¹å°½å¿ƒæ€è®¾è®¡æ¡ˆä¾‹è¦†ç›–ä»£ç ã€‚ç”¨ä»£ç è¦†ç›–ç‡æ¥è¡¡é‡ï¼Œæœ‰åˆ©ä¹Ÿæœ‰æœ‰å¼Šã€‚ é¦–å…ˆï¼Œè®©æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹æ‰€è°“çš„â€œä»£ç è¦†ç›–ç‡â€ã€‚æˆ‘æ‰¾æ¥äº†æ‰€è°“çš„å®šä¹‰ï¼š ä»£ç è¦†ç›–ç‡ ï¼ ä»£ç çš„è¦†ç›–ç¨‹åº¦ï¼Œä¸€ç§åº¦é‡æ–¹å¼ã€‚ å…³äºå¦‚ä½•å¼€å‘ç»„ä»¶åº“ï¼Œå¯çœ‹è¿™ç¯‡ï¼š å¦‚ä½•åŸºäºvueå¼€å‘uiç»„ä»¶åº“ï¼ˆheaven-uiï¼‰ å•å…ƒæµ‹è¯•è‹±æ–‡å« Unit Testingï¼Œåˆç§°ä¸ºæ¨¡å—æµ‹è¯•ï¼Œæ˜¯é’ˆå¯¹ç¨‹åºæ¨¡å—æ¥è¿›è¡Œæ­£ç¡®æ€§æ£€éªŒçš„æµ‹è¯•å·¥ä½œã€‚ç¨‹åºå•å…ƒæ˜¯åº”ç”¨çš„æœ€å°å¯æµ‹è¯•éƒ¨ä»¶ã€‚åœ¨è¿‡ç¨‹åŒ–ç¼–ç¨‹ä¸­ï¼Œä¸€ä¸ªå•å…ƒå°±æ˜¯å•ä¸ªç¨‹åºã€å‡½æ•°ã€è¿‡ç¨‹ç­‰ï¼›å¯¹äºé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œæœ€å°å•å…ƒå°±æ˜¯æ–¹æ³•ï¼ŒåŒ…æ‹¬åŸºç±»ï¼ˆè¶…ç±»ï¼‰ã€æŠ½è±¡ç±»ã€æˆ–è€…æ´¾ç”Ÿç±»ï¼ˆå­ç±»ï¼‰ä¸­çš„æ–¹æ³•ã€‚ éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š éœ€è¦è®¿é—®æ•°æ®åº“çš„æµ‹è¯•ä¸å«å•å…ƒæµ‹è¯•ï¼› éœ€è¦è®¿é—®ç½‘ç»œçš„æµ‹è¯•ä¸å«å•å…ƒæµ‹è¯•ï¼› éœ€è¦è®¿é—®æ–‡ä»¶ç³»ç»Ÿçš„æµ‹è¯•ä¸å«å•å…ƒæµ‹è¯•ã€‚ è™½ç„¶ç¼–å†™å•å…ƒæµ‹è¯•çš„è¿‡ç¨‹å¾ˆç¹çï¼Œä½†ä¸å¾—ä¸è¯´ï¼Œå®ƒå¯¹äºæˆ‘ä»¬çš„ç»„ä»¶çš„è¿­ä»£æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚ æ¯”å¦‚å†™å•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼Œç»å¸¸ä¼šå‘ç”Ÿè¾“å‡ºç»“æœä¸ç¬¦åˆä½ é¢„æœŸçš„ç»“æœï¼Œè¿™æ—¶ä½ å°±å¾—é‡æ–°å®¡è§†ä½ çš„ä»£ç äº†ã€‚ ç»„ä»¶åº“ä¸­æ¯ä¸€ä¸ªç»„ä»¶éƒ½å¯èƒ½ä¼šé‡æ„æˆ–è€…æ›´æ–°è¿­ä»£ï¼Œå¦‚æœå•å…ƒæµ‹è¯•è¦†ç›–ç‡é«˜çš„è¯ï¼Œä¿®æ”¹ä»£ç ä¹‹åå°±è¶Šå¯èƒ½ä¼šå‘ç°æ½œåœ¨çš„é—®é¢˜ã€‚æ¯”å¦‚æŸäº›åŠŸèƒ½ä»£ç ä¸å°å¿ƒåˆ æ‰äº†ã€‚è¿™æ ·ä¼šå¯¼è‡´ç”¨æˆ·æ›´æ–°æœ€æ–°ç‰ˆæœ¬æ—¶ï¼Œç¼ºå°‘äº†ä¹‹å‰ä½¿ç”¨è¿‡çš„åŠŸèƒ½ï¼Œäº§ç”Ÿä¸€äº›ç–‘æƒ‘ã€‚ æŠ€æœ¯é€‰å‹å•å…ƒæµ‹è¯•ç”¨åˆ°çš„å·¥å…·å¤§è‡´åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šåˆ†åˆ«ä¸ºç®¡ç†å·¥å…·ã€æµ‹è¯•æ¡†æ¶ã€æ–­è¨€åº“ã€‚ æµ‹è¯•æ¡†æ¶å¸‚é¢ä¸Šæœ‰å¾ˆå¤šç§ï¼Œå¸¸ç”¨çš„æµ‹è¯•æ¡†æ¶æœ‰ä»¥ä¸‹å‡ ç§ï¼š Jasmineï¼šBehavior-Drive development(BDD)é£æ ¼çš„æµ‹è¯•æ¡†æ¶ï¼Œåœ¨ä¸šå†…è¾ƒä¸ºæµè¡Œ,åŠŸèƒ½å¾ˆå…¨é¢ï¼Œè‡ªå¸¦ asssertã€mock åŠŸèƒ½ Qunitï¼šè¯¥æ¡†æ¶è¯ç”Ÿä¹‹åˆæ˜¯ä¸ºäº† jquery çš„å•å…ƒæµ‹è¯•ï¼Œåæ¥ç‹¬ç«‹å‡ºæ¥ä¸å†ä¾èµ–äº jquery æœ¬èº«ï¼Œä½†æ˜¯å…¶èº«ä¸Šè¿˜æ˜¯è„±ç¦»ä¸å¼€ jquery çš„å½±å­ Mochaï¼šMocha æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„å‰ç«¯æµ‹è¯•æ¡†æ¶ã€‚æ‰€è°“â€æµ‹è¯•æ¡†æ¶â€ï¼Œå°±æ˜¯è¿è¡Œæµ‹è¯•çš„å·¥å…·ã€‚é€šè¿‡å®ƒï¼Œå¯ä»¥ä¸º JavaScript åº”ç”¨æ·»åŠ æµ‹è¯•ç”¨ä¾‹ï¼Œä»è€Œä¿è¯ä»£ç çš„è´¨é‡ã€‚Mocha æ—¢å¯ä»¥åŸºäº Node.js ç¯å¢ƒè¿è¡Œä¹Ÿå¯ä»¥åœ¨æµè§ˆå™¨ç¯å¢ƒè¿è¡Œã€‚ Jestï¼šæ¥è‡ªäº facebook å‡ºå“çš„é€šç”¨æµ‹è¯•æ¡†æ¶ï¼ŒJest æ˜¯ä¸€ä¸ªä»¤äººæ„‰å¿«çš„ JavaScript æµ‹è¯•æ¡†æ¶ï¼Œä¸“æ³¨äºç®€æ´æ˜å¿«ã€‚ä»–é€‚ç”¨ä½†ä¸å±€é™äºä½¿ç”¨ä»¥ä¸‹æŠ€æœ¯çš„é¡¹ç›®ï¼šBabel, TypeScript, Node, React, Angular, Vue è¿™é‡Œ æˆ‘é€‰ç”¨çš„æ˜¯Karmaã€Mocha å’Œ Chaiï¼Œæ¥ä¸‹æ¥ç®€å•ä»‹ç»ä¸€ä¸‹æˆ‘ä½¿ç”¨çš„ï¼ˆKarmaï¼‰ç®¡ç†å·¥å…·å’Œï¼ˆChaiï¼‰æ–­è¨€åº“ Karma æ˜¯ä¸€ä¸ªåŸºäº Node.js çš„ JavaScript æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹ç®¡ç†å·¥å…·ï¼Œåˆç§° Test Runnerã€‚å¸¸ç”¨çš„ç®¡ç†å·¥å…·è¿˜æœ‰ Jest ç­‰ã€‚ Chai æ˜¯ä¸€ä¸ªæ–­è¨€åº“ï¼Œç±»ä¼¼äº Node çš„å†…ç½®æ–­è¨€ã€‚é€šè¿‡æä¾›è®¸å¤šå¯ä»¥é’ˆå¯¹ä»£ç è¿è¡Œçš„æ–­è¨€ï¼Œå®ƒä½¿æµ‹è¯•å˜å¾—æ›´åŠ å®¹æ˜“ã€‚ Karma æ˜¯ä¸€ä¸ªåŸºäº Node.js çš„ JavaScript æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹ç®¡ç†å·¥å…·ï¼Œåˆç§° Test Runnerã€‚å¸¸ç”¨çš„ç®¡ç†å·¥å…·è¿˜æœ‰ Jest ç­‰ã€‚ Chai æ˜¯ä¸€ä¸ªæ–­è¨€åº“ï¼Œç±»ä¼¼äº Node çš„å†…ç½®æ–­è¨€ã€‚é€šè¿‡æä¾›è®¸å¤šå¯ä»¥é’ˆå¯¹ä»£ç è¿è¡Œçš„æ–­è¨€ï¼Œå®ƒä½¿æµ‹è¯•å˜å¾—æ›´åŠ å®¹æ˜“ã€‚ ç¼–å†™æµ‹è¯•ç”¨ä¾‹ç»„ä»¶åº“å¼€å‘è°ƒè¯•å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™æ¯ä¸ªç»„ä»¶å¯¹åº”çš„å•å…ƒæµ‹è¯•ï¼Œä»¥è¾¾åˆ°100%çš„è¦†ç›–ç‡ä¸ºâ½¬æ ‡ã€‚ æˆ‘åœ¨ç»„ä»¶åº“ä¸­é€‰æ‹©çš„æ˜¯karma,ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š specç›®å½•å°±æ˜¯å¯¹åº”ç»„ä»¶çš„å•å…ƒæµ‹è¯•ç”¨ä¾‹äº† ä»¥buttonä¸ºä¾‹ï¼š test/specs/Button.spec.js 1234567891011121314import Vue from 'vue'import Button from '@/components/button'describe('button.vue', () =&gt; { it('buttonæ˜¯å¦å­˜åœ¨',()=&gt;{ expect(Button).to.be.ok; }) it('æµ‹è¯•nameæ˜¯å¦ç”Ÿæ•ˆ', () =&gt; { const Constructor = Vue.extend(Button) const vm = new Constructor().$mount() expect(vm.$el.querySelector('.hello h1').textContent) .to.equal('Welcome to Your Vue.js App') })}) æ‰§è¡Œä¸Šè¿°çš„å•å…ƒæµ‹è¯•ä»£ç ï¼Œå°±èƒ½è¯æ˜è¿™æ®µä»£ç çš„è¡Œä¸ºè¾“å‡ºçš„ç»“æœï¼Œæ˜¯å¦å’Œæˆ‘ä»¬æœŸæœ›çš„ä¸€è‡´ã€‚ ä¸ºä»€ä¹ˆè¦åšå•å…ƒæµ‹è¯•ä¸ºè¾¾åˆ°100%çš„è¦†ç›–ç‡ï¼Œæˆ‘ä»¬å¿…é¡»å°½å¿«èƒ½çš„è¦†ç›–æ‰€æœ‰åœºæ™¯ã€‚ä¸å¾—ä¸è¯´ï¼Œç¼–å†™æµ‹è¯•ç”¨ä¾‹æ¯”è¾ƒç¹çï¼Œä½†æˆ‘ä»¬åˆä¸ºä»€ä¹ˆè¦åšè¿™ç¹ççš„å·¥ä½œå‘¢ï¼Ÿ å› ä¸ºå•å…ƒæµ‹è¯•åŒ…å«ä»¥ä¸‹ä¼˜ç‚¹ï¼š å¯èƒ½ä¼šæµ‹å‡ºåŠŸèƒ½çš„éšè—bug ä¿è¯ä»£ç é‡æ„çš„å®‰å…¨æ€§ã€‚ ç»„ä»¶åº“ä¸­æ¯â¼€ä¸ªç»„ä»¶éƒ½å¯èƒ½ä¼šé‡æ„æˆ–è€…æ›´æ–°è¿­ä»£ï¼Œå¦‚æœå•å…ƒæµ‹è¯•è¦†ç›–ç‡â¾¼çš„è¯ï¼Œä¿®æ”¹ä»£ç ä¹‹åå°±è¶Šå¯èƒ½ä¼šå‘ç°æ½œåœ¨çš„é—®é¢˜ã€‚â½å¦‚ç‰ˆæœ¬å‡çº§åï¼Œå¯¼è‡´æŸéƒ¨åˆ†åŠŸèƒ½çš„ç¼ºå¤±ã€‚ è‡ªåŠ¨æ£€æµ‹ï¼Œå¯ä»¥åšåˆ°ä¸€æ¬¡ç¼–å†™ï¼Œå¤šæ¬¡è¿è¡Œï¼ŒèŠ‚çœé‡å¤æµ‹è¯•çš„æ—¶é—´ æ‰€ä»¥å¯¹äºç°åœ¨çš„ç»„ä»¶åº“é¡¹ç›®é¡¹ç›®ï¼Œèƒ½å¤Ÿè¢«åç»­çš„å¼€å‘è€…ç†è§£å¹¶ä¸”å‚ç…§ç€ç»§ç»­ç»´æŠ¤ä¸‹å»ï¼Œé‚£ä¹ˆå•å…ƒæµ‹è¯•æ˜¯éå¸¸å¿…è¦çš„ã€‚","link":"/2022/04/26/%E5%A6%82%E4%BD%95%E5%81%9A%E7%BB%84%E4%BB%B6%E5%BA%93%E7%9A%84%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"},{"title":"å‡çº§webpack 5å®æˆ˜","text":"å‡çº§webpack 5å®æˆ˜ ä¸€ã€èƒŒæ™¯æœ¬æ¬¡å¯¹å…¬å¸é¡¹ç›®è¿›è¡Œwebpackçš„å‡çº§ ï¼Œ åŸæœ‰ç‰ˆæœ¬æ˜¯webpack4.42.1ï¼Œ æœ¬æ¬¡å‡çº§ç›®æ ‡æ˜¯webpack5.28.0ï¼Œå·²ç»æ˜¯å¾ˆæ–°çš„ç‰ˆæœ¬äº†ã€‚ç›®æ ‡ï¼Œå‡çº§Webpack5ï¼Œåº”ç”¨é•¿æ•ˆç¼“å­˜ï¼Œæå‡æ„å»ºé€Ÿåº¦ã€‚ äºŒã€æ­¥éª¤æŒ‰ç…§å®˜ç½‘å‡çº§æ–‡æ¡£ â€œvue-loaderâ€: â€œ^15.9.6â€, â€œterser-webpack-pluginâ€: â€œ^5.1.1â€, â€œstyle-loaderâ€: â€œ^2.0.0â€, â€œmini-css-extract-pluginâ€: â€œ^1.4.0â€, â€œless-loaderâ€: â€œ^8.0.0â€, â€œhtml-webpack-pluginâ€: â€œ^5.3.1â€, â€œfile-loaderâ€: â€œ^6.2.0â€, â€œcss-loaderâ€: â€œ^5.2.0â€, â€œcompression-webpack-pluginâ€: â€œ^7.1.2â€, â€œbabel-loaderâ€: â€œ^8.2.2â€, â€œpostcss-loaderâ€: â€œ^5.2.0â€, åŸæœ‰è¿è¡Œå‘½ä»¤ â€œdevâ€: â€œwebpack-dev-server â€“inline â€“progress â€“config build/webpack.dev.conf.jsâ€, wbepack4Xç‰ˆæœ¬ä½¿ç”¨webpack-dev-serverï¼Œå¯åŠ¨æ–¹å¼ä¸ºï¼šwebpack-dev-serverã€‚ webpack5Xä¿®æ”¹ä¸ºï¼šwebpack server webpackã€webpack-cliã€webpack-dev-serveræ˜¯éœ€è¦ç‰ˆæœ¬åŒ¹é…çš„ åŸæœ‰åŒ¹é…ç‰ˆæœ¬ â€œwebpackâ€: â€œ^4.42.1â€, â€œwebpack-cliâ€: â€œ^3.3.11â€, â€œwebpack-dev-serverâ€: â€œ^3.10.3â€, å‡çº§ç‰ˆæœ¬ â€œwebpackâ€: â€œ^5.28.0â€, â€œwebpack-cliâ€: â€œ^4.6.0â€, â€œwebpack-dev-serverâ€: â€œ^3.11.2â€, è¿è¡ŒæŠ¥é”™ï¼šwebpack.NamedModulesPlugin is not a constructor åŸæœ‰é…ç½®æ–‡ä»¶ plugins: [ new webpack.NamedModulesPlugin(), ], æ”¹æˆç”¨é…ç½®çš„æ–¹å¼å³å¯ optimization: { namedModules: true }, æŸ¥çœ‹æ–‡æ¡£å‘å¸ƒ optimization.namedModules removed (NamedModulesPlugin too) å·²ç»è¢«ç§»é™¤äº†ã€‚ åŒæ—¶åœ¨ webpack4 ä¸Šæ˜¯é»˜è®¤è®¾ç½®ï¼Œæ‰€ä»¥ä¸éœ€è¦è®¾ç½®è¿™ä¸ªé€‰é¡¹å³å¯ã€‚ webpack.HashedModuleIdsPlugin is not a constructor æŠ¥é”™å»é™¤ ä¸å…¼å®¹ æŠ¥é”™å¼ƒç”¨ new webpack.NamedModulesPlugin() ä¸å…¼å®¹ æŠ¥é”™å¼ƒç”¨ new TerserPlugin(), new HtmlWebpackPlugin({ chunksSortMode: â€˜dependencyâ€™ }), æŠ¥é”™ï¼Œæ–°ç‰ˆåªæ”¯æŒ â€˜noneâ€™ | â€˜autoâ€™ | â€˜manualâ€™ æ”¹ä¸º new HtmlWebpackPlugin({ chunksSortMode: â€˜manualâ€™ }), webpack5å·²å†…ç½® TerserPluginå»é™¤ devServerå»é™¤äº†å¾ˆå¤šæ—§çš„é…ç½®é¡¹ç›® å®é™…ä¸Šå‡ºé”™ä¿¡æ¯å·²ç»è¯´æ˜äº†é—®é¢˜åŸå› ï¼š Invalid configuration object. Object has been initialized using a configuration object that does not match the API schema. è¿™ä¸€æ®µçš„æ„æ€æ˜¯webpack.config.jsé”™è¯¯ï¼ŒåŸå› æ˜¯è¿™ä¸ªé…ç½®æ–‡ä»¶çš„ç‰ˆæœ¬å’Œæˆ‘ä»¬å½“å‰å®‰è£…çš„webpackçš„ç‰ˆæœ¬ä¸åŒ¹é…ã€‚ - configuration has an unknown property â€˜disableHostCheckâ€™. ç„¶åé€æ­¥æ’æŸ¥ï¼Œå»æ‰å½“å‰å®‰è£…çš„webpackç‰ˆæœ¬å·²ç»å»æ‰çš„é…ç½®é¡¹ç›®ã€‚ mode: process.env.NODE_ENV || â€˜productionâ€™, å¿…é¡»é…ç½®mode webpack5ç§»é™¤äº†nodeç¯å¢ƒçš„polyfill éœ€è¦é…ç½®fallback resolve: { fallback: { crypto: false } }, configuration.nodeä¸å…¼å®¹ å»é™¤äº†nodeå±æ€§ node: {} å¢åŠ å±æ€§ optimization: { chunkIds: â€œdeterministicâ€, moduleIds: â€œdeterministicâ€, mangleExports: â€œdeterministicâ€ }, target: [â€˜webâ€™, â€˜es5â€™], // 5ç‰¹æœ‰çš„æ–‡ä»¶ç›‘å¬ watchOptions: { //é»˜è®¤ä¸ºç©ºï¼Œä¸ç›‘å¬çš„â½‚ä»¶æˆ–è€…â½¬å½•ï¼Œâ½€æŒæ­£åˆ™ ignored: /node_modules/, //ç›‘å¬åˆ°â½‚ä»¶å˜åŒ–åï¼Œç­‰300mså†å»æ‰§â¾ï¼Œé»˜è®¤300ms, aggregateTimeout: 300, poll: config.dev.poll, }, // 5æ–°å¢æ€§èƒ½ä¼˜åŒ– performance: { maxEntrypointSize: 4000000, // å…¥å£èµ·ç‚¹çš„æœ€å¤§ä½“ç§¯ï¼Œæ§åˆ¶ webpack ä½•æ—¶ç”Ÿæˆæ€§èƒ½æç¤º maxAssetSize: 1000000, //å•ä¸ªèµ„æºä½“ç§¯(å•ä½: bytes)ï¼Œæ§åˆ¶ webpack ä½•æ—¶ç”Ÿæˆæ€§èƒ½æç¤º }, file-loaderå’Œurl-loaderåˆ é™¤ url-loaderå¼ƒç”¨ï¼Œ ä½¿ç”¨ asset modules ä»£æ›¿ èµ„æºæ¨¡å—ç±»å‹(asset module type)ï¼Œé€šè¿‡æ·»åŠ  4 ç§æ–°çš„æ¨¡å—ç±»å‹ï¼Œæ¥æ›¿æ¢æ‰€æœ‰è¿™äº› loaderï¼š asset/resource å‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¹¶å¯¼å‡º URLã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ file-loader å®ç°ã€‚ asset/inline å¯¼å‡ºä¸€ä¸ªèµ„æºçš„ data URIã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ url-loader å®ç°ã€‚ asset/source å¯¼å‡ºèµ„æºçš„æºä»£ç ã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ raw-loader å®ç°ã€‚ asset åœ¨å¯¼å‡ºä¸€ä¸ª data URI å’Œå‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¹‹é—´è‡ªåŠ¨é€‰æ‹©ã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ url-loaderï¼Œå¹¶ä¸”é…ç½®èµ„æºä½“ç§¯é™åˆ¶å®ç°ã€‚ åœ¨é¡¹ç›®ä¸­url-loaderæ”¹ç”¨ type: â€˜asset/resourceâ€™çš„å½¢å¼ å½“ webpack é…ç½®ä¸­ä½¿ç”¨äº† [hash] å ä½ç¬¦æ—¶ï¼Œè¯·è€ƒè™‘å°†å®ƒæ”¹ä¸º [contenthash]ã€‚æ•ˆæœä¸€è‡´ï¼Œä½†äº‹å®è¯æ˜ä¼šæ›´ä¸ºæœ‰æ•ˆã€‚ ä¸‰ã€æ€»ç»“æœ¬æ¬¡å‡çº§å·²ç»å®Œæˆï¼Œåœ¨æ€§èƒ½ä¸Šï¼ŒWebpack5é™¤äº†æœªä¿®æ”¹é‡ç¼–è¯‘ï¼Œå…¶ä»–ä¸Šè¡¨ç°å¹¶ä¸å¦‚ä¹‹å‰V4çš„æ€§èƒ½å¥½ã€‚åœ¨æœªæ¥çš„å·¥ä½œä¸Šï¼Œæˆ‘ä¼šç»§ç»­å…³æ³¨è¿™é‡Œæ€§èƒ½ä¸ºä»€ä¹ˆä¸å¦‚V4ã€‚ ä¸‹é¢çš„è„šæ‰‹æ¶æ˜¯åŸºäº@vue/cli 4.5.8 ç‰ˆæœ¬æ„å»ºï¼Œå·²å°†webpack3.6.0å‡çº§åˆ°5.28.0ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½ä½¿ç”¨ã€‚ githubåœ°å€ å–œæ¬¢çš„ç»™ä¸ªstarå§","link":"/2021/04/11/%E5%8D%87%E7%BA%A7webpack-5%E5%AE%9E%E6%88%98/"},{"title":"å¦‚ä½•åŸºäºvueå¼€å‘uiç»„ä»¶åº“ï¼ˆheaven-ui)","text":"å‰â¾”Vueæ˜¯â¼€å¥—â½¤äºæ„å»ºâ½¤æˆ·ç•Œâ¾¯çš„æ¸è¿›å¼æ¡†æ¶,â½¬å‰æœ‰è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…åœ¨å­¦ä¹ å’Œä½¿â½¤ã€‚â½½ç»„ä»¶åº“èƒ½å¸®æˆ‘ä»¬èŠ‚çœå¼€å‘ç²¾â¼’ï¼Œâ½†éœ€æ‰€æœ‰ä¸œâ»„éƒ½ä»å¤´å¼€å§‹å»åšï¼Œé€šè¿‡â¼€ä¸ªä¸ªâ¼©ç»„ä»¶æ‹¼æ¥èµ·æ¥ï¼Œå°±å¾—åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„æœ€ç»ˆâ»šâ¾¯ã€‚åœ¨â½‡å¸¸å¼€å‘ä¸­å¦‚æœæ²¡æœ‰ç‰¹å®šçš„â¼€äº›ä¸šåŠ¡éœ€æ±‚ï¼Œä½¿â½¤ç»„ä»¶åº“è¿›â¾å¼€å‘â½†ç–‘æ˜¯æ›´ä¾¿æ·â¾¼æ•ˆï¼Œâ½½ä¸”è´¨é‡ä¹Ÿç›¸å¯¹æ›´â¾¼çš„â½…æ¡ˆã€‚ æœ¬â½‚é˜è¿°äº†å¦‚ä½•åŸºäºvueâ¼€æ­¥æ­¥å®Œæˆâ¼€ä¸ªUIç»„ä»¶åº“çš„æ‰“é€ ã€‚ ç»„ä»¶åº“å®˜â½¹ githubåœ°å€ npmåœ°å€ â¼€ã€æŠ€æœ¯æ ˆæˆ‘ä»¬å…ˆç®€å•äº†è§£â¼€ä¸‹è¦æ­å»ºâ¼€ä¸ª UI ç»„ä»¶åº“ï¼Œä¼šæ¶‰åŠåˆ°å“ªäº›æŠ€æœ¯æ ˆï¼Œä¸‹â¾¯æ˜¯æˆ‘é€‰â½¤çš„å†…å®¹ï¼š vue-cliï¼šå®˜â½…â½€æŒçš„ CLI è„šâ¼¿æ¶ï¼Œæä¾›â¼€ä¸ªé›¶é…ç½®çš„ç°ä»£æ„å»ºè®¾ç½®ï¼› Vue: æ¸è¿›å¼ JavaScript åº“ï¼› Jestï¼šJavaScript æµ‹è¯•æ¡†æ¶ï¼Œâ½¤äºç»„ä»¶åº“çš„å•å…ƒæµ‹è¯•ï¼› â¼†ã€ç»„ä»¶å¼€å‘é¡¹â½¬åˆå§‹åŒ– å¼€å§‹ï¼Œéœ€è¦åˆ›å»ºâ¼€ä¸ªç©ºçš„vueé¡¹â½¬ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæˆ‘ä»¬æ‰èƒ½å¼€å§‹æ¥ä¸‹æ¥çš„ç»„ä»¶åº“ç¼–å†™ï¼ 1234npm i -g vue-cli // yarn add global vue-clivue init webpack heaven-ui //(heaven-ui)å¯ä»¥éšæ„æ›´æ¢æˆä½ çš„åç§°cd heaven-uinpm run dev æˆ‘ä»¬å®‰è£…å®Œä¾èµ–å¹¶è¿›â¼Šé¡¹â½¬å¯åŠ¨æœåŠ¡åvue-cli3ä¼šâ¾ƒåŠ¨ç»™æˆ‘ä»¬å±•ç¤ºâ¼€ä¸ªé»˜è®¤â»šâ¾¯ï¼Œè¿™â¾¥æˆ‘ä½¿â½¤sassï¼Œâ½¤äºç¾åŒ–uiç»„ä»¶çš„æ ·å¼ã€‚ â½¬å½•ç»“æ„ è¿™æ˜¯æˆ‘çš„â½¬å½•ç»“æ„å’Œè§£é‡Š 123456789101112131415161718|- build/ # webpackæ‰“åŒ…é…ç½® |- lib/ # æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶æ”¾è¿™é‡Œ |- src/ # åœ¨è¿™é‡Œå†™ä»£ç  |- components/ # å„ä¸ªç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶æ˜¯ä¸€ä¸ªå­ç›®å½• |- mixins/ # å¤ç”¨çš„mixin |- utils # å·¥å…·ç›®å½• |- App.vue # æœ¬åœ°è¿è¡Œçš„å¼€å‘é¢„è§ˆ |- index.js # æ‰“åŒ…å…¥å£ï¼Œç»„ä»¶çš„å¯¼å‡º |- main.js # æœ¬åœ°è¿è¡Œçš„è¿è¡Œ|- static/ # å­˜æ”¾ä¸€äº›é¢å¤–çš„èµ„æºæ–‡ä»¶ï¼Œå›¾ç‰‡ä¹‹ç±»çš„ |- test/ # æµ‹è¯•æ–‡ä»¶å¤¹ |- specs/ # å­˜æ”¾æ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹ |- jest.conf.js/ # jestå•å…ƒæµ‹è¯•é…ç½® |- .npmignore |- .gitignore |- .babelrc |- README.md |- package.json ç»„ä»¶åº“ç»“æ„ æš´éœ²â¼€ä¸ªæ‰€æœ‰ç»„ä»¶çš„â¼Šâ¼ï¼Œç»„ä»¶è¯¦ç»†ä»£ç åªå±•ç¤ºbuttonéƒ¨åˆ† src/components/index.js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879import Alert from './components/alert/index.js'import Button from './components/button/index.js'import ButtonGroup from './components/button-group/index.js'import Checkbox from './components/checkbox/index.js'import CheckboxGroup from './components/checkbox-group/index.js'import DatePicker from './components/date-picker/index.js'import Form from './components/form/index.js'import FormItem from './components/form-item/index.js'import Icon from './components/icon/index.js'import Input from './components/input/index.js'import Option from './components/option/index.js'import Pagination from './components/pagination/index.js'import Radio from './components/radio/index.js'import RadioGroup from './components/radio-group/index.js'import Rate from './components/rate/index.js'import Select from './components/select/index.js'import Switch from './components/switch/index.js'import Table from './components/table/index.js'import HTableColumn from './components/table-column/index.js'import Tag from './components/tag/index.js'const components = [ Button, ButtonGroup, Checkbox, CheckboxGroup, DatePicker, Form, FormItem, Icon, Input, Option, Pagination, Radio, RadioGroup, Rate, Select, Switch, Table, HTableColumn, Tag, ] const install = function(Vue, opts = {}) { components.map(component =&gt; { Vue.component(component.name, component); }) Vue.prototype.$alert = Alert; }/* æ”¯æŒä½¿ç”¨æ ‡ç­¾çš„æ–¹å¼å¼•å…¥ */if (typeof window !== 'undefined' &amp;&amp; window.Vue) { install(window.Vue);}export default { install, Alert, Button, ButtonGroup, Checkbox, CheckboxGroup, DatePicker, Form, FormItem, Icon, Input, Option, Pagination, Radio, RadioGroup, Rate, Select, Switch, Table, HTableColumn, Tag,} src/components/button/index.js 1234567import HButton from './src/button';HButton.install = function(Vue) { Vue.component(HButton.name, HButton);};export default HButton; ç»„ä»¶éƒ¨åˆ†â¼¤æ¦‚æ˜¯è¿™æ ·â¼¦äº† æ‰“åŒ…é…ç½®â½¬å½•å»ºå¥½äº†ï¼Œé‚£å°±è¯¥å¡«å……â¾â¾äº†ï¼Œè¦æ‰“åŒ…â¼€ä¸ªç»„ä»¶åº“é¡¹â½¬ï¼Œè‚¯å®šæ˜¯è¦å…ˆé…ç½®å¥½æˆ‘ä»¬çš„webpackï¼Œä¸ç„¶å†™äº†æºç ä¹Ÿæ²¡æ³•è·‘èµ·æ¥ã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆå®šä½åˆ° buildâ½¬å½•ä¸‹ webpack.base.js ã€‚å­˜æ”¾åŸºæœ¬çš„â¼€äº›rulesé…ç½® webpack.prod.js ã€‚æ•´ä¸ªç»„ä»¶åº“çš„æ‰“åŒ…é…ç½® build/webpack.base.conf.js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485'use strict'const path = require('path')const utils = require('./utils')const config = require('../config')const vueLoaderConfig = require('./vue-loader.conf')function resolve (dir) { return path.join(__dirname, '..', dir)}module.exports = { context: path.resolve(__dirname, '../'), entry: { app: process.env.NODE_ENV === 'production' ? './src/index.js' : './src/main.js' }, output: { path: config.build.assetsRoot, filename: '[name].js', publicPath: process.env.NODE_ENV === 'production' ? config.build.assetsPublicPath : config.dev.assetsPublicPath }, resolve: { extensions: ['.js', '.vue', '.json'], alias: { 'vue$': 'vue/dist/vue.esm.js', '@': resolve('src'), 'untils': resolve('src/untils'), } }, module: { rules: [ { test: /\\.vue$/, loader: 'vue-loader', options: vueLoaderConfig }, { test: /\\.js$/, loader: 'babel-loader', include: [resolve('src'), resolve('test'), resolve('node_modules/webpack-dev-server/client')] }, { test: /\\.(png|jpe?g|gif|svg)(\\?.*)?$/, loader: 'url-loader', options: { limit: 10000, name: utils.assetsPath('img/[name].[hash:7].[ext]') } }, { test: /\\.(mp4|webm|ogg|mp3|wav|flac|aac)(\\?.*)?$/, loader: 'url-loader', options: { limit: 10000, name: utils.assetsPath('media/[name].[hash:7].[ext]') } }, { test: /\\.(woff2?|eot|ttf|otf)(\\?.*)?$/, loader: 'url-loader', options: { limit: 10000, name: utils.assetsPath('fonts/[name].[hash:7].[ext]') } }, { test: /\\.scss$/, loaders:['style','css','sass'] } ] }, node: { // prevent webpack from injecting useless setImmediate polyfill because Vue // source contains it (although only uses it if it's native). setImmediate: false, // prevent webpack from injecting mocks to Node native modules // that does not make sense for the client dgram: 'empty', fs: 'empty', net: 'empty', tls: 'empty', child_process: 'empty' }} build/webpack.prod.conf.js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576'use strict'const path = require('path')const utils = require('./utils')const webpack = require('webpack')const config = require('../config')const merge = require('webpack-merge')const baseWebpackConfig = require('./webpack.base.conf')const ExtractTextPlugin = require('extract-text-webpack-plugin')const OptimizeCSSPlugin = require('optimize-css-assets-webpack-plugin')const UglifyJsPlugin = require('uglifyjs-webpack-plugin')const env = require('../config/prod.env')const webpackConfig = merge(baseWebpackConfig, { module: { rules: utils.styleLoaders({ sourceMap: config.build.productionSourceMap, extract: true, usePostCSS: true }) }, devtool: config.build.productionSourceMap ? config.build.devtool : false, output: { path: config.build.assetsRoot, filename: 'heaven-ui.min.js', library: 'heaven-ui', libraryTarget: 'umd' }, plugins: [ // http://vuejs.github.io/vue-loader/en/workflow/production.html new webpack.DefinePlugin({ 'process.env': env }), new UglifyJsPlugin({ uglifyOptions: { compress: { warnings: false } }, sourceMap: config.build.productionSourceMap, parallel: true }), // extract css into its own file new ExtractTextPlugin({ filename: 'heaven-ui.min.css', }), // Compress extracted CSS. We are using this plugin so that possible // duplicated CSS from different components can be deduped. new OptimizeCSSPlugin() ]})if (config.build.productionGzip) { const CompressionWebpackPlugin = require('compression-webpack-plugin') webpackConfig.plugins.push( new CompressionWebpackPlugin({ asset: '[path].gz[query]', algorithm: 'gzip', test: new RegExp( '\\\\.(' + config.build.productionGzipExtensions.join('|') + ')$' ), threshold: 10240, minRatio: 0.8 }) )}if (config.build.bundleAnalyzerReport) { const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin webpackConfig.plugins.push(new BundleAnalyzerPlugin())}module.exports = webpackConfig è¿™â¾¥æˆ‘é…ç½®çš„è¾“å‡ºâ½¬å½•ä¸ºlibï¼Œæ‰“åŒ…åçš„ç»“æœå¦‚ä¸‹å›¾ï¼š ä¸‰ã€å•å…ƒæµ‹è¯•å•å…ƒæµ‹è¯•åŒ…å«ä»¥ä¸‹ä¼˜ç‚¹ï¼š \\1. å¯èƒ½ä¼šæµ‹å‡ºåŠŸèƒ½çš„éšè—bug \\2. ä¿è¯ä»£ç é‡æ„çš„å®‰å…¨æ€§ã€‚ ç»„ä»¶åº“ä¸­æ¯â¼€ä¸ªç»„ä»¶éƒ½å¯èƒ½ä¼šé‡æ„æˆ–è€…æ›´æ–°è¿­ä»£ï¼Œå¦‚æœå•å…ƒæµ‹è¯•è¦†ç›–ç‡â¾¼çš„è¯ï¼Œä¿®æ”¹ä»£ç ä¹‹åå°±è¶Šå¯èƒ½ä¼šå‘ç°æ½œåœ¨çš„é—®é¢˜ã€‚â½å¦‚ç‰ˆæœ¬å‡çº§åï¼Œå¯¼è‡´æŸéƒ¨åˆ†åŠŸèƒ½çš„ç¼ºå¤±ã€‚ ç»„ä»¶åº“å¼€å‘è°ƒè¯•å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™æ¯ä¸ªç»„ä»¶å¯¹åº”çš„å•å…ƒæµ‹è¯•ï¼Œä»¥è¾¾åˆ°100%çš„è¦†ç›–ç‡ä¸ºâ½¬æ ‡ã€‚ ä»¥buttonä¸ºä¾‹ï¼š test/specs/Button.spec.js 12345678import Vue from 'vue'import Button from '@/components/button'describe('button.vue', () =&gt; { it('buttonæ˜¯å¦å­˜åœ¨',()=&gt;{ expect(Button).to.be.ok; })}) è¿™â¾¥æˆ‘é…ç½®çš„è¾“å‡ºâ½¬å½•ä¸ºlib å››ã€å‘å¸ƒNPMå‘å¸ƒnpmä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»æŒ‰ç…§npmçš„å‘åŒ…è§„åˆ™æ¥ç¼–å†™æˆ‘ä»¬çš„package.json, æˆ‘ä»¬å…ˆæ¥è§£å†³ç»„ä»¶åº“æ‰“åŒ…çš„é—®é¢˜,â¾¸å…ˆæˆ‘ä»¬éœ€è¦è®©è„šâ¼¿æ¶ç¼–è¯‘æˆ‘ä»¬çš„ç»„ä»¶ä»£ç ,å¹¶è¾“å‡ºåˆ°æŒ‡å®šâ½¬å½•ä¸‹,æˆ‘ä»¬æŒ‰ç…§å‘åŒ…è§„èŒƒâ¼€èˆ¬ä¼šè¾“å‡ºåˆ°libâ½¬å½•ä¸‹ã€‚é¡¹â½¬æ‰“åŒ…å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™packageâ½‚ä»¶çš„description,keywordsç­‰,å…·ä½“ä»‹ç»å¦‚ä¸‹: description ç»„ä»¶åº“çš„æè¿°â½‚æœ¬ keywords ç»„ä»¶åº“çš„å…³é”®è¯ license è®¸å¯åè®® repository ç»„ä»¶åº“å…³è”çš„gitä»“åº“åœ°å€ homepage ç»„ä»¶åº“å±•ç¤ºçš„â¾¸â»šåœ°å€ main ç»„ä»¶åº“çš„ä¸»â¼Šâ¼åœ°å€(åœ¨ä½¿â½¤ç»„ä»¶æ—¶å¼•â¼Šçš„åœ°å€) private å£°æ˜ç»„ä»¶åº“çš„ç§æœ‰æ€§,å¦‚æœè¦å‘å¸ƒåˆ°npmå…¬â½¹ä¸Š,éœ€åˆ é™¤è¯¥å±æ€§æˆ–è€…è®¾ç½®ä¸ºfalse publishConfig â½¤æ¥è®¾ç½®npmå‘å¸ƒçš„åœ°å€,è¿™ä¸ªé…ç½®ä½œä¸ºå›¢é˜Ÿå†…éƒ¨çš„npmæœåŠ¡å™¨æ¥è¯´â¾®å¸¸å…³é”®,å¯ä»¥è®¾ç½®ä¸ºç§æœ‰çš„npmä»“åº“ å‘å¸ƒåˆ°npmçš„â½…æ³•ä¹Ÿå¾ˆç®€å•, â¾¸å…ˆæˆ‘ä»¬éœ€è¦å…ˆæ³¨å†Œå»npmå®˜â½¹æ³¨å†Œâ¼€ä¸ªè´¦å·, ç„¶åæ§åˆ¶å°ç™»å½•å³å¯,æœ€åæˆ‘ä»¬æ‰§â¾npm publishå³ å¯.å…·ä½“æµç¨‹å¦‚ä¸‹: 123456// ç™»å½•npm login// å‘å¸ƒnpm publish// å¦‚æœå‘å¸ƒå¤±è´¥æç¤ºæƒé™é—®é¢˜,è¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤npm publish --access public æ³¨æ„ï¼šæœ¬æ¬¡publish ç‰ˆæœ¬å·éƒ½éœ€è¦ä¿®æ”¹ç‰ˆæœ¬å· äº”ã€æ€»ç»“æˆ‘ä»¬å¯ä»¥â½¤vue-cli æˆ–å…¶ä»–â¼¯å…·å¦å¤–â½£æˆâ¼€ä¸ªdemoé¡¹â½¬ï¼Œâ½¤è¿™ä¸ªé¡¹â½¬å»å¼•â¼Šæˆ‘ä»¬çš„ç»„ä»¶åº“ã€‚å¦‚æœä½ çš„åŒ…è¿˜æ²¡æœ‰å‘å¸ƒå‡ºå»ï¼Œå¯ä»¥åœ¨ä½ çš„ ç»„ä»¶åº“é¡¹â½¬â½¬å½•ä¸‹ â½¤ npm link æˆ–è€… yarn linkçš„å‘½ä»¤åˆ›å»ºâ¼€ä¸ªlink ç„¶ååœ¨ä½ çš„demoâ½¬å½•ä¸‹ä½¿â½¤ npm link package_name æˆ–è€… yarn link package_name è¿™â¾¥çš„package_nameå°±æ˜¯ä½ çš„ç»„ä»¶åº“çš„ åŒ…åï¼Œç„¶ååœ¨ä½ çš„demoé¡¹â½¬çš„â¼Šâ¼â½‚ä»¶â¾¥ 123456import Vue from vueimport Heaven from 'heaven-ui'import 'heaven-ui/dist/heaven-ui.min.css'// å…¶ä»–ä»£ç  ...Vue.use(Heaven) è¿™æ ·è®¾ç½®å¥½ä¹‹åï¼Œæˆ‘ä»¬åˆ›å»ºçš„ç»„ä»¶å°±å¯ä»¥åœ¨è¿™ä¸ªé¡¹â½¬â¾¥ä½¿â½¤äº†","link":"/2021/05/22/%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8Evue%E5%BC%80%E5%8F%91ui%E7%BB%84%E4%BB%B6%E5%BA%93%EF%BC%88heaven-ui/"},{"title":"å¦‚ä½•æ­å»ºä¸€ä¸ªè‡ªå·±çš„è„šæ‰‹æ¶","text":"è„šæ‰‹æ¶ æ­å»ºè„šæ‰‹æ¶çš„ç›®çš„å°±æ˜¯å¿«é€Ÿçš„æ­å»ºé¡¹ç›®çš„åŸºæœ¬ç»“æ„å¹¶æä¾›é¡¹ç›®è§„èŒƒå’Œçº¦å®šã€‚ç›®å‰æ—¥å¸¸å·¥ä½œä¸­å¸¸ç”¨çš„è„šæ‰‹æ¶æœ‰ vue-cliã€create-react-appã€angular-cli ç­‰ç­‰ï¼Œéƒ½æ˜¯é€šè¿‡ç®€å•çš„åˆå§‹åŒ–å‘½ä»¤ï¼Œå®Œæˆå†…å®¹çš„å¿«é€Ÿæ„å»ºã€‚ å…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨git clone urlæ¥æ–°å»ºï¼ˆå¤åˆ¶ï¼‰é¡¹ç›®ï¼Œå† low ä¸€ç‚¹çš„æ–¹æ³•å°±æ˜¯å¤åˆ¶ç²˜è´´æ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸€æ ·ä¹Ÿèƒ½è¾¾åˆ°åˆå§‹åŒ–çš„ç›®çš„ã€‚ è„šæ‰‹æ¶çš„æœ¬è´¨ä¹Ÿæ˜¯ä»è¿œç¨‹ä¸‹è½½ä¸€ä¸ªæ¨¡æ¿æ¥è¿›è¡Œä¸€ä¸ªæ–°é¡¹ç›®ï¼Œä½†æ˜¯è„šæ‰‹æ¶å¯æ˜¯é«˜çº§ç‰ˆçš„å…‹éš†ï¼Œå®ƒä¸»è¦æ˜¯æä¾›äº†äº¤äº’å¼çš„å‘½ä»¤è®©æˆ‘ä»¬å¯ä»¥åŠ¨æ€çš„æ›´æ”¹æ¨¡æ¿ï¼Œç„¶åç”¨ä¸€å¥å‘½ä»¤å°±å¯ä»¥å®ç°å…¶ä»–å†…ç½®ä¾èµ–çš„åˆå§‹åŒ–,æ–¹ä¾¿äº†å¤šäººåä½œï¼Œä¸éœ€è¦å°†æ–‡ä»¶ä¼ æ¥ä¼ å»ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¼€å§‹å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆçš„è„šæ‰‹æ¶heaven-cliï¼ˆå¯è‡ªè¡Œå‘½åï¼‰ï¼Œç›®æ ‡æ˜¯å®ç°ä¸€ä¸ªheaven init template-name project-nameè¿™æ ·çš„å‘½ä»¤ï¼ŒåºŸè¯å°‘è¯´ï¼Œå¼€å§‹è¿›å…¥æ­£é¢˜å§ï¼ å‰ç½®çŸ¥è¯†äº†è§£ å…¶å®ä¸€ä¸ªç®€æ˜“ç‰ˆçš„ heaven-cliçš„ä»£ç é‡å¹¶ä¸å¤šï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å…ˆæ¥ä»‹ç»ä¸€ä¸‹å…¶ä¸­è¦ä½¿ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“ commander è¿™æ˜¯ç”¨æ¥ç¼–å†™æŒ‡ä»¤å’Œå¤„ç†å‘½ä»¤è¡Œçš„ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š 1234567891011const program = require(&quot;commander&quot;);// å®šä¹‰æŒ‡ä»¤program .version('0.0.1') .command('init', 'Generate a new project from a template') .action(() =&gt; { // å›è°ƒå‡½æ•° })// è§£æå‘½ä»¤è¡Œå‚æ•°program.parse(process.argv);å¤åˆ¶ä»£ç  inquirer è¿™æ˜¯ä¸ªå¼ºå¤§çš„äº¤äº’å¼å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š 123456789const inquirer = require('inquirer');inquirer .prompt([ // ä¸€äº›äº¤äº’å¼çš„é—®é¢˜ ]) .then(answers =&gt; { // å›è°ƒå‡½æ•°ï¼Œanswers å°±æ˜¯ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œæ˜¯ä¸ªå¯¹è±¡ });å¤åˆ¶ä»£ç  chalk è¿™æ˜¯ç”¨æ¥ä¿®æ”¹æ§åˆ¶å°è¾“å‡ºå†…å®¹æ ·å¼çš„ï¼Œèµ·åˆ°äº†ç¾åŒ–è¾“å‡ºå†…å®¹çš„ä½œç”¨ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š 1234const chalk = require('chalk');console.log(chalk.green('success'));console.log(chalk.red('error'));å¤åˆ¶ä»£ç  ora è¿™æ˜¯ä¸€ä¸ªå¥½çœ‹çš„åŠ è½½äº¤äº’ç»„ä»¶ï¼Œç”¨äºä¸‹è½½è¿‡ç¨‹ä¸­çš„loadingæ•ˆæœï¼Œç”¨æ³•å¦‚ä¸‹ï¼š 1234const ora = require('ora')let spinner = ora('downloading template ...')spinner.start()å¤åˆ¶ä»£ç  download-git-repo ç”¨äºä¸‹è½½è¿œç¨‹æ¨¡æ¿çš„ï¼Œæ”¯æŒ GitHubã€ GitLab å’Œ Bitbucket ç­‰ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š 123const download = require('download-git-repo')download(repository, destination, options, callback)å¤åˆ¶ä»£ç  å…¶ä¸­ repository æ˜¯è¿œç¨‹ä»“åº“åœ°å€ï¼›destination æ˜¯å­˜æ”¾ä¸‹è½½çš„æ–‡ä»¶è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™æ–‡ä»¶åï¼Œé»˜è®¤å°±æ˜¯å½“å‰ç›®å½•ï¼›options æ˜¯ä¸€äº›é€‰é¡¹ï¼Œæ¯”å¦‚{ cloneï¼šboolean }è¡¨ç¤ºç”¨ http download è¿˜æ˜¯ git clone çš„å½¢å¼ä¸‹è½½ã€‚ åˆå§‹åŒ–ç›®å½• é¦–å…ˆæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œå–å heaven-cliï¼› ç›®å½•ç»“æ„ 12345678910â”œâ”€â”€ bin //å¯æ‰§è¡Œæ–‡ä»¶â””â”€â”€ lib â”œâ”€â”€ init.js //init command â”œâ”€â”€ template â””â”€â”€ index.js //å†…ç½®çš„æ‰€æœ‰æ¨¡ç‰ˆ â””â”€â”€ utils â””â”€â”€ utils.js // å…¬å…±æ–¹æ³•â”œâ”€â”€ package.jsonâ”œâ”€â”€ README.mdå¤åˆ¶ä»£ç  åœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œnpm initå‘½ä»¤ï¼Œè¿›è¡Œåˆå§‹åŒ–ã€‚ å®‰è£…ä¾èµ– 12npm install chalk commander inquirer ora download-git-repoå¤åˆ¶ä»£ç  æˆ‘è¿™è¾¹çš„package.jsonçš„ä¾èµ–æ˜¯è¿™æ ·çš„ 12345678&quot;dependencies&quot;: { &quot;chalk&quot;: &quot;^4.1.2&quot;, &quot;commander&quot;: &quot;^8.3.0&quot;, &quot;download-git-repo&quot;: &quot;^3.0.2&quot;, &quot;inquirer&quot;: &quot;^8.1.2&quot;, &quot;ora&quot;: &quot;^5.4.1&quot;}å¤åˆ¶ä»£ç  node.js å†…ç½®äº†å¯¹å‘½ä»¤è¡Œæ“ä½œçš„æ”¯æŒï¼Œpackage.json ä¸­çš„ bin å­—æ®µå¯ä»¥å®šä¹‰å‘½ä»¤åå’Œå…³è”çš„æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨ package.json ä¸­æ·»åŠ  bin å­—æ®µ 1234&quot;bin&quot;: { &quot;heaven&quot;: &quot;bin/heaven.js&quot; },å¤åˆ¶ä»£ç  bin ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªheaven.jsï¼Œå¹¶åœ¨è¡Œé¦–åŠ å…¥ä¸€è¡Œ #!/usr/bin/env node æŒ‡å®šå½“å‰è„šæœ¬ç”±node.jsè¿›è¡Œè§£æ 123456789101112131415#!/usr/bin/env nodeconst program = require('commander')const init = require(&quot;../lib/init&quot;);program .command('init &lt;template&gt; &lt;app-name&gt;') .description('generate a project from a remote template (legacy API, requires @heaven-cli)') .action((template, name) =&gt; { init(template, name) }) // è§£æå‘½ä»¤è¡Œå‚æ•°program.parse(process.argv)å¤åˆ¶ä»£ç  è¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦ä½œç”¨å°±æ˜¯å®šä¹‰æŒ‡ä»¤ï¼Œæˆ‘ä»¬ç”¨node ./bin/heavenè¿è¡Œä¸€ä¸‹ï¼Œå°±èƒ½çœ‹åˆ°è¿è¡Œç»“æœäº†ï¼Œ å½“ç„¶ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œåœ¨å½“å‰çš„ heaven-cli ç›®å½•ä¸‹æ‰§è¡Œ npm linkï¼Œå°† heaven å‘½ä»¤é“¾æ¥åˆ°å…¨å±€ç¯å¢ƒï¼Œ è¿™æ ·æˆ‘ä»¬æ¯æ¬¡åªè¦è¾“å…¥heavenï¼Œå°±å¯ä»¥ç›´æ¥è¿è¡Œäº†ã€‚ åé¢å°±å¯ä»¥ç¼–å†™ /lib/init.jsçš„ä»£ç äº† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869// äº¤äº’å¼å‘½ä»¤è¡Œconst inquirer = require('inquirer')// ä¿®æ”¹æ§åˆ¶å°å­—ç¬¦ä¸²çš„æ ·å¼const chalk = require('chalk')// node å†…ç½®æ–‡ä»¶æ¨¡å—const fs = require('fs')// è¯»å–templateä¸‹å†…ç½®çš„æ¨¡ç‰ˆconst tplObj = require(&quot;./template&quot;)// ä¸‹è½½const download = require(&quot;download-git-repo&quot;);// è‡ªå®šä¹‰äº¤äº’å¼å‘½ä»¤è¡Œçš„é—®é¢˜åŠç®€å•çš„æ ¡éªŒlet question = [ { name: &quot;name&quot;, type: 'input', message: &quot;Project name (&quot; + name + ')', validate (val) { if (val === '') { return 'Name is required!' } else { return true } } }, { name: &quot;description&quot;, type: 'input', message: &quot;Project description&quot; },]inquirer .prompt(question).then(answers =&gt; { // answers å°±æ˜¯ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œæ˜¯ä¸ªå¯¹è±¡ let { description } = answers; let projectName = answers.name // å‡ºç°åŠ è½½å›¾æ ‡ const spinner = ora(&quot;Downloading...&quot;); const url = tplObj.template[template] // æ‰§è¡Œä¸‹è½½æ–¹æ³•å¹¶ä¼ å…¥å‚æ•° download( url, projectName, err =&gt; { if (err) { spinner.fail(); console.log(chalk.red(`Generation failed. ${err}`)) return } // å°†ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œå†™å…¥package.jsonå†… const packageFile = path.join(process.cwd(), projectName + '/package.json'); const package = require(packageFile); package.description = description; package.name = projectName; fs.writeFileSync(file, `module.exports = ${JSON.stringify(package, null, '\\t')};`, 'utf8'); // ç»“æŸåŠ è½½å›¾æ ‡ spinner.succeed(); console.log(chalk.green('\\n Generation completed!')) console.log('\\n To get started') console.log(`\\n cd ${projectName} \\n`) } ) })å¤åˆ¶ä»£ç  è‡³æ­¤ï¼Œä¸€ä¸ªå°å°çš„è„šæ‰‹æ¶å°±åšå®Œäº†ã€‚ æ¥ä¸‹æ¥å°±æµ‹è¯•ä¸€ä¸‹heaven init vue my-projectå‘½ä»¤èƒ½å¦ç”Ÿæ•ˆ å¾ˆå¿«å°±å¯ä»¥çœ‹åˆ°å·²ç»æˆåŠŸåˆå§‹åŒ–äº†my-projectï¼Œæ­¤æ—¶å¯ä»¥çœ‹ä¸€ä¸‹my-projectæ–‡ä»¶å¤¹ä¸‹é¢ å‘å¸ƒåˆ° npm æ—¢ç„¶ä»¥ä¸Šå‘½ä»¤å¯ä»¥æ‰§è¡ŒæˆåŠŸäº†ï¼Œé‚£æ¥ä¸‹æ¥æˆ‘ä»¬å°±æŠŠå®ƒå‘å¸ƒåˆ° npm ä¸Šå§ï¼Œå…¶å®ƒç”¨æˆ·å°±å¯ä»¥é€šè¿‡ npm install heaven-cli-fe -g å…¨å±€å®‰è£…ã€‚ å³å¯ä½¿ç”¨ heaven å‘½ä»¤ã€‚ æºç åœ°å€ï¼šgithub.com/hujinbin/heâ€¦ å¯ä½¿ç”¨ template åŒ…å«å¦‚ä¸‹ vue vue-seo koa-react koa-vue microservice vue vue-cliï¼Œwebpack5.28ç‰ˆæœ¬ vue-seo ï¼ˆå¼€å‘ä¸­ï¼‰ åŸºäºvue-cliæ­å»ºçš„ä¼ªssrè„šæ‰‹æ¶ï¼Œwebpack5.28ç‰ˆæœ¬ï¼Œæ‰“åŒ…ç”Ÿæˆå¯¹åº”çš„é™æ€htmlï¼Œå¹¶è·³è½¬åˆ°çœŸå®ç½‘å€ï¼Œç”¨äºseoæœç´¢ã€‚ koa-react koa+react å·¥ç¨‹é¡¹ç›®éª¨æ¶ï¼Œssræ¨¡å¼ï¼Œæ”¯æŒmysqlå’Œmongodbæ•°æ®åº“ koa-vue koa+vue å·¥ç¨‹é¡¹ç›®éª¨æ¶ mvcç»“æ„ï¼Œ å‰ç«¯vueå•é¡µé¢åº”ç”¨ microservice ï¼ˆå¼€å‘ä¸­ï¼‰ åŸºäºviteæ­å»ºå¾®å‰ç«¯è„šæ‰‹æ¶","link":"/2022/02/05/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6/"},{"title":"å®ç”¨çš„è·¨åŸŸæ–¹æ³•","text":"åŒæºç­–ç•¥åŒæºç­–ç•¥/SOPï¼ˆSame origin policyï¼‰æ˜¯ä¸€ç§çº¦å®šï¼Œç”± Netscape å…¬å¸ 1995 å¹´å¼•å…¥æµè§ˆå™¨ï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼Œå¦‚æœç¼ºå°‘äº†åŒæºç­–ç•¥ï¼Œæµè§ˆå™¨å¾ˆå®¹æ˜“å—åˆ° XSSã€CSRF ç­‰æ”»å‡»ã€‚æ‰€è°“åŒæºæ˜¯æŒ‡ â€œåè®® + åŸŸå + ç«¯å£â€ ä¸‰è€…ç›¸åŒï¼Œå³ä¾¿ä¸¤ä¸ªä¸åŒçš„åŸŸåæŒ‡å‘åŒä¸€ä¸ª ip åœ°å€ï¼Œä¹ŸéåŒæºã€‚ ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿå½“åè®®ã€åŸŸåã€ç«¯å£å·ï¼Œæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªä¸åŒæ—¶ï¼Œæœ‰å¸Œæœ›å¯ä»¥è®¿é—®å¹¶è·å–æ•°æ®çš„ç°è±¡ç§°ä¸ºè·¨åŸŸè®¿é—®ï¼ŒåŒæºç­–ç•¥é™åˆ¶ä¸‹ cookieã€localStorageã€domã€ajaxã€IndexDB éƒ½æ˜¯ä¸æ”¯æŒè·¨åŸŸçš„ã€‚ å‡è®¾ cookie æ”¯æŒäº†è·¨åŸŸï¼Œhttp åè®®æ— çŠ¶æ€ï¼Œå½“ç”¨æˆ·è®¿é—®äº†ä¸€ä¸ªé“¶è¡Œç½‘ç«™ç™»å½•åï¼Œé“¶è¡Œç½‘ç«™çš„æœåŠ¡å™¨ç»™è¿”å›äº†ä¸€ä¸ª sessionIdï¼Œå½“é€šè¿‡å½“å‰æµè§ˆå™¨å†è®¿é—®ä¸€ä¸ªæ¶æ„ç½‘ç«™ï¼Œå¦‚æœ cookie æ”¯æŒè·¨åŸŸï¼Œæ¶æ„ç½‘ç«™å°†è·å– sessionId å¹¶è®¿é—®é“¶è¡Œç½‘ç«™ï¼Œå‡ºç°å®‰å…¨æ€§é—®é¢˜ï¼›IndexDBã€localStorage ç­‰æ•°æ®å­˜å‚¨åœ¨ä¸åŒåŸŸçš„é¡µé¢åˆ‡æ¢æ—¶æ˜¯è·å–ä¸åˆ°çš„ï¼›å‡è®¾ dom å…ƒç´ å¯ä»¥è·¨åŸŸï¼Œåœ¨è‡ªå·±çš„é¡µé¢å†™å…¥ä¸€ä¸ª iframe å†…éƒ¨åµŒå…¥çš„åœ°å€æ˜¯ www.baidu.comï¼Œ å½“åœ¨ç™¾åº¦é¡µé¢ç™»å½•è´¦å·å¯†ç æ—¶å°±å¯ä»¥åœ¨è‡ªå·±çš„é¡µé¢è·å–ç™¾åº¦çš„æ•°æ®ä¿¡æ¯ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ cookieã€localStorageã€domã€ajaxã€IndexDB ä¼šå—åˆ°åŒæºç­–ç•¥ä¼šé™åˆ¶ï¼Œä¸‹é¢è¿˜æœ‰ä¸€ç‚¹å¯¹è·¨åŸŸç†è§£çš„è¯¯åŒºï¼š è¯¯åŒºï¼šåŒæºç­–ç•¥é™åˆ¶ä¸‹ï¼Œè®¿é—®ä¸åˆ°åå°æœåŠ¡å™¨çš„æ•°æ®ï¼Œæˆ–è®¿é—®åˆ°åå°æœåŠ¡å™¨çš„æ•°æ®åæ²¡æœ‰è¿”å›ï¼› æ­£ç¡®ï¼šåŒæºç­–ç•¥é™åˆ¶ä¸‹ï¼Œå¯ä»¥è®¿é—®åˆ°åå°æœåŠ¡å™¨çš„æ•°æ®ï¼Œåå°æœåŠ¡å™¨ä¼šæ­£å¸¸è¿”å›æ•°æ®ï¼Œè€Œè¢«æµè§ˆå™¨ç»™æ‹¦æˆªäº†ã€‚ å®ç°è·¨åŸŸçš„æ–¹å¼ ä¸€ã€ä½¿ç”¨ jsonp è·¨åŸŸä½¿ç”¨åœºæ™¯ï¼šå½“è‡ªå·±çš„é¡¹ç›®å‰ç«¯èµ„æºå’Œåç«¯éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨åœ°å€ä¸Šï¼Œæˆ–è€…å…¶ä»–çš„å…¬å¸éœ€è¦è®¿é—®è‡ªå·±å¯¹å¤–å…¬å¼€çš„æ¥å£ï¼Œéœ€è¦å®ç°è·¨åŸŸè·å–æ•°æ®ï¼Œå¦‚ç™¾åº¦æœç´¢ã€‚ 123456789101112131415161718192021222324252627282930313233// å°è£… jsonp è·¨åŸŸè¯·æ±‚çš„æ–¹æ³•function jsonp({ url, params, cb }) { return new Promise((resolve, reject) =&gt; { // åˆ›å»ºä¸€ä¸ª script æ ‡ç­¾å¸®åŠ©æˆ‘ä»¬å‘é€è¯·æ±‚ let script = document.createElement(&quot;script&quot;); let arr = []; params = { ...params, cb }; // å¾ªç¯æ„å»ºé”®å€¼å¯¹å½¢å¼çš„å‚æ•° for (let key in params) { arr.push(`${key}=${params[key]}`); } // åˆ›å»ºå…¨å±€å‡½æ•° window[cb] = function(data) { resolve(data); // åœ¨è·¨åŸŸæ‹¿åˆ°æ•°æ®ä»¥åå°† script æ ‡ç­¾é”€æ¯ document.body.removeChild(script); }; // æ‹¼æ¥å‘é€è¯·æ±‚çš„å‚æ•°å¹¶èµ‹å€¼åˆ° src å±æ€§ script.src = `${url}?${arr.join(&quot;&amp;&quot;)}`; document.body.appendChild(script); });}// è°ƒç”¨æ–¹æ³•è·¨åŸŸè¯·æ±‚ç™¾åº¦æœç´¢çš„æ¥å£json({ url: &quot;https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su&quot;, params: { wd: &quot;jsonp&quot; }, cb: &quot;show&quot;}).then(data =&gt; { // æ‰“å°è¯·æ±‚å›çš„æ•°æ® console.log(data);}); ç¼ºç‚¹ï¼š åªèƒ½å‘é€ get è¯·æ±‚ ä¸æ”¯æŒ postã€putã€deleteï¼›ä¸å®‰å…¨ï¼Œå®¹æ˜“å¼•å‘ xss æ”»å‡»ï¼Œåˆ«äººåœ¨è¿”å›çš„ç»“æœä¸­è¿”å›äº†ä¸‹é¢ä»£ç ã€‚ 123let script = document.createElement('script');script.src = &quot;http://192.168.0.57:8080/xss.js&quot;;document.body.appendChild(script);`; ä¼šæŠŠåˆ«äººçš„è„šæœ¬å¼•å…¥åˆ°è‡ªå·±çš„é¡µé¢ä¸­æ‰§è¡Œï¼Œå¦‚ï¼šå¼¹çª—ã€å¹¿å‘Šç­‰ï¼Œç”šè‡³æ›´å±é™©çš„è„šæœ¬ç¨‹åºã€‚ äºŒã€ä½¿ç”¨ CORS è·¨åŸŸè·¨æºèµ„æºå…±äº«/CORSï¼ˆCross-Origin Resource Sharingï¼‰æ˜¯ W3C çš„ä¸€ä¸ªå·¥ä½œè‰æ¡ˆï¼Œå®šä¹‰äº†åœ¨å¿…é¡»è®¿é—®è·¨æºèµ„æºæ—¶ï¼Œæµè§ˆå™¨ä¸æœåŠ¡å™¨åº”è¯¥å¦‚ä½•æ²Ÿé€šã€‚CORS èƒŒåçš„åŸºæœ¬æ€æƒ³ï¼Œå°±æ˜¯ä½¿ç”¨è‡ªå®šä¹‰çš„ HTTP å¤´éƒ¨è®©æµè§ˆå™¨ä¸æœåŠ¡å™¨è¿›è¡Œæ²Ÿé€šï¼Œä»è€Œå†³å®šè¯·æ±‚æˆ–å“åº”æ˜¯åº”è¯¥æˆåŠŸï¼Œè¿˜æ˜¯åº”è¯¥å¤±è´¥ã€‚ ä½¿ç”¨åœºæ™¯ï¼šå¤šç”¨äºå¼€å‘æ—¶ï¼Œå‰ç«¯ä¸åå°åœ¨ä¸åŒçš„ ip åœ°å€ä¸‹è¿›è¡Œæ•°æ®è®¿é—®ã€‚ ç°åœ¨å¯åŠ¨ä¸¤ä¸ªç«¯å£å·ä¸åŒçš„æœåŠ¡å™¨ï¼Œåˆ›å»ºè·¨åŸŸæ¡ä»¶ï¼ŒæœåŠ¡å™¨ï¼ˆNodeJSï¼‰ä»£ç å¦‚ä¸‹ï¼š 12345678910111213// æœåŠ¡å™¨1const express = require(express);let app = express();app.use(express.static(__dirname));app.listen(3000);// æœåŠ¡å™¨2const express = require(&quot;express&quot;);let app = express();app.get(&quot;/getDate&quot;, function(req, res) { res.end(&quot;I love you&quot;);});app.use(express.static(__dirname));app.listen(4000); ç”±äºæˆ‘ä»¬çš„ NodeJS æœåŠ¡å™¨ä½¿ç”¨ express æ¡†æ¶ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„å‘½ä»¤è¡Œä¸­è¾“å…¥ä¸‹é¢ä»£ç è¿›è¡Œå®‰è£…ï¼š npm install express â€“save é€šè¿‡è®¿é—® http://localhost:3000/index.html è·å– index.html æ–‡ä»¶å¹¶æ‰§è¡Œå…¶ä¸­çš„ Ajax è¯·æ±‚ http://localhost:4000/getDate æ¥å£å»è·å–æ•°æ®ï¼Œindex.html æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132&lt;!-- æ–‡ä»¶ï¼šindex.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;CORS è·¨åŸŸ&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;script&gt; let xhr = new XMLHttpRequest(); // æ­£å¸¸ cookie æ˜¯ä¸å…è®¸è·¨åŸŸçš„ document.cookie = 'name=hello'; // cookie æƒ³è¦å®ç°è·¨åŸŸå¿…é¡»æºå¸¦å‡­è¯ xhr.withCredentials = true; // xhr.open('GET', 'http://localhost:4000/getDate', true); xhr.open('PUT', 'http://localhost:4000/getDate', true); // è®¾ç½®åä¸º name çš„è‡ªå®šä¹‰è¯·æ±‚å¤´ xhr.setRequestHeader('name', 'hello'); xhr.onreadystatechange = function () { if(xhr.readyState === 4) { if(xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300 || xhr.status === 304) { // æ‰“å°è¿”å›çš„æ•°æ® console.log(xhr.response); // æ‰“å°åå°è®¾ç½®çš„è‡ªå®šä¹‰å¤´ä¿¡æ¯ console.log(xhr.getResponseHeader('name')); } } } xhr.send(); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ä¸Šé¢ index.html ä»£ç ä¸­å‘é€è¯·æ±‚è®¿é—®ä¸åœ¨åŒæºçš„æœåŠ¡å™¨ 2ï¼Œæ­¤æ—¶ä¼šåœ¨æ§åˆ¶å°ç»™å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå‘Šè¯‰æˆ‘ä»¬ç¼ºå°‘äº†å“ªäº›å“åº”å¤´ï¼Œæˆ‘ä»¬å¯¹åº”æŠ¥é”™ä¿¡æ¯å»ä¿®æ”¹è®¿é—®çš„æœåŠ¡å™¨ 2 çš„ä»£ç ï¼Œæ·»åŠ å¯¹åº”çš„å“åº”å¤´ï¼Œå®ç° CORS è·¨åŸŸã€‚ 123456789101112131415161718192021222324252627282930313233343536// æœåŠ¡å™¨2const express = require(&quot;express&quot;);let app = express();// å…è®¸è®¿é—®åŸŸçš„ç™½åå•let whiteList = [&quot;http://localhost:3000&quot;];app.use(function(req, res, next) { let origin = req.header.origin; if (whiteList.includes(origin)) { // è®¾ç½®é‚£ä¸ªæºå¯ä»¥è®¿é—®æˆ‘ï¼Œå‚æ•°ä¸º * æ—¶ï¼Œå…è®¸ä»»ä½•äººè®¿é—®ï¼Œä½†æ˜¯ä¸å¯ä»¥å’Œ cookie å‡­è¯çš„å“åº”å¤´å…±åŒä½¿ç”¨ res.setHeader(&quot;Access-Control-Allow-Origin&quot;, origin); // æƒ³è¦è·å– ajax çš„å¤´ä¿¡æ¯ï¼Œéœ€è®¾ç½®å“åº”å¤´ res.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;name&quot;); // å¤„ç†å¤æ‚è¯·æ±‚çš„å¤´ res.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;PUT&quot;); // å…è®¸å‘é€ cookie å‡­è¯çš„å“åº”å¤´ res.setHeader(&quot;Access-Control-Allow-Credentials&quot;, true); // å…è®¸å‰ç«¯è·å–å“ªä¸ªå¤´ä¿¡æ¯ res.setHeader(&quot;Access-Control-Expose-Headers&quot;, &quot;name&quot;); // å¤„ç† OPTIONS é¢„æ£€çš„å­˜æ´»æ—¶é—´ï¼Œå•ä½ s res.setHeader(&quot;Access-Control-Max-Age&quot;, 5); // å‘é€ PUT è¯·æ±‚ä¼šåšä¸€ä¸ªè¯•æ¢æ€§çš„è¯·æ±‚ OPTIONSï¼Œå…¶å®æ˜¯è¯·æ±‚äº†ä¸¤æ¬¡ï¼Œå½“æ¥æ”¶çš„è¯·æ±‚ä¸º OPTIONS æ—¶ä¸åšä»»ä½•å¤„ç† if (req.method === &quot;OPTIONS&quot;) { res.end(); } } next();});app.put(&quot;/getDate&quot;, function(req, res) { // res.setHeader('name', 'nihao'); // è®¾ç½®è‡ªå®šä¹‰å“åº”å¤´ä¿¡æ¯ res.end(&quot;I love you&quot;);});app.get(&quot;/getDate&quot;, function(req, res) { res.end(&quot;I love you&quot;);});app.use(express.static(__dirname));app.listen(4000); ä¸‰ã€ä½¿ç”¨ postMessage å®ç°è·¨åŸŸpostMessage æ˜¯ H5 çš„æ–° APIï¼Œè·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€ï¼ˆcross-document messagingï¼‰ï¼Œæœ‰æ—¶å€™ç®€ç§°ä¸º XMDï¼ŒæŒ‡çš„æ˜¯åœ¨æ¥è‡ªä¸åŒåŸŸçš„é¡µé¢é—´ä¼ é€’æ¶ˆæ¯ã€‚ è°ƒç”¨æ–¹å¼ï¼šwindow.postMessage(message, targetOrigin) messageï¼šå‘é€çš„æ•°æ®targetOriginï¼šå‘é€çš„çª—å£çš„åŸŸåœ¨å¯¹åº”çš„é¡µé¢ä¸­ç”¨ message äº‹ä»¶æ¥æ”¶ï¼Œäº‹ä»¶å¯¹è±¡ä¸­æœ‰ dataã€originã€source ä¸‰ä¸ªé‡è¦ä¿¡æ¯ dataï¼šæ¥æ”¶åˆ°çš„æ•°æ®originï¼šæ¥æ”¶åˆ°æ•°æ®æºçš„åŸŸï¼ˆæ•°æ®æ¥è‡ªå“ªä¸ªåŸŸï¼‰sourceï¼šæ¥æ”¶åˆ°æ•°æ®æºçš„çª—å£å¯¹è±¡ï¼ˆæ•°æ®æ¥è‡ªå“ªä¸ªçª—å£å¯¹è±¡ï¼‰ä½¿ç”¨åœºæ™¯ï¼šä¸æ˜¯ä½¿ç”¨ Ajax çš„æ•°æ®é€šä¿¡ï¼Œæ›´å¤šæ˜¯åœ¨ä¸¤ä¸ªé¡µé¢ä¹‹é—´çš„é€šä¿¡ï¼Œåœ¨ A é¡µé¢ä¸­å¼•å…¥ B é¡µé¢ï¼Œåœ¨ Aã€B ä¸¤ä¸ªé¡µé¢ä¹‹é—´é€šä¿¡ã€‚ ä¸ä¸Šé¢ CORS ç±»ä¼¼ï¼Œæˆ‘ä»¬è¦åˆ›å»ºè·¨åŸŸåœºæ™¯ï¼Œæ­å»ºä¸¤ä¸ªç«¯å£å·ä¸åŒçš„ Nodejs æœåŠ¡å™¨ï¼Œåé¢ç›¸åŒæ–¹å¼å°±ä¸å¤šèµ˜è¿°äº†ã€‚ 12345678910// æœåŠ¡å™¨1const express = require(express);let app = express();app.use(express.static(__dirname));app.listen(3000);// æœåŠ¡å™¨2const express = require(express);let app = express();app.use(express.static(__dirname));app.listen(4000); é€šè¿‡è®¿é—® http://localhost:3000/a.htmlï¼Œåœ¨ a.html ä¸­ä½¿ç”¨ iframe æ ‡ç­¾å¼•å…¥ http://localhost:4000/b.htmlï¼Œåœ¨ä¸¤ä¸ªçª—å£é—´ä¼ é€’æ•°æ®ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738&lt;!-- æ–‡ä»¶ï¼ša.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é¡µé¢ A&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;iframe src=&quot;http://localhost:4000/b.html&quot; id=&quot;frame&quot; onload=&quot;load()&quot;&gt;&lt;/iframe&gt; &lt;script&gt; function load() { let frame = document.getElementById('frame'); frame.contentWindow.postMessage('I love you', 'http://localhost:4000'); window.onmessage = function (e) { console.log(e.data); } } &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;&lt;!-- æ–‡ä»¶ï¼šb.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é¡µé¢ B&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;script&gt; window.onmessage = function (e) { // æ‰“å°æ¥è‡ªé¡µé¢ A çš„æ¶ˆæ¯ console.log(e.data); // ç»™é¡µé¢ A å‘é€å›æ‰§ e.source.postMessage('I love you, too', e.origin); } &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; å››ã€ä½¿ç”¨ window.name å®ç°è·¨åŸŸåŒæ ·æ˜¯é¡µé¢ä¹‹é—´çš„é€šä¿¡ï¼Œéœ€è¦å€ŸåŠ© iframe æ ‡ç­¾ï¼ŒA é¡µé¢å’Œ B é¡µé¢æ˜¯åŒåŸŸçš„ http://localhost:3000ï¼ŒC é¡µé¢åœ¨ç‹¬ç«‹çš„åŸŸ http://localhost:4000ã€‚ 12345678910// æœåŠ¡å™¨1const express = require(express);let app = express();app.use(express.static(__dirname));app.listen(3000);// æœåŠ¡å™¨2const express = require(express);let app = express();app.use(express.static(__dirname));app.listen(4000); å®ç°æ€è·¯ï¼šåœ¨ A é¡µé¢ä¸­å°† iframe çš„ src æŒ‡å‘ C é¡µé¢ï¼Œåœ¨ C é¡µé¢ä¸­å°†å±æ€§å€¼å­˜å…¥ window.name ä¸­ï¼Œå†æŠŠ iframe çš„ src æ¢æˆåŒåŸŸçš„ B é¡µé¢ï¼Œåœ¨å½“å‰çš„ iframe çš„ window å¯¹è±¡ä¸­å–å‡º name çš„å€¼ï¼Œè®¿é—® http://localhost:3000/a.htmlã€‚ 12345678910111213141516171819202122232425262728293031323334353637&lt;!-- æ–‡ä»¶ï¼ša.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é¡µé¢ A&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;iframe src=&quot;http://localhost:4000/c.html&quot; id=&quot;frame&quot; onload=&quot;load()&quot;&gt;&lt;/iframe&gt; &lt;script&gt; // å¢åŠ ä¸€ä¸ªæ ‡è¯†ï¼Œç¬¬ä¸€æ¬¡è§¦å‘ load æ—¶æ›´æ”¹åœ°å€ï¼Œæ›´æ”¹åå†æ¬¡è§¦å‘ç›´æ¥å–å€¼ let isFirst = true; function load() { let frame = document.getElementById('frame'); if(isFirst) { frame.src = 'http://localhost:3000/b.html'; isFirst = false; } else { console.log(frame.contentWindow.name); } } &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;&lt;!-- æ–‡ä»¶ï¼šc.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é¡µé¢ C&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;script&gt; window.name = 'I love you'; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; äº”ã€ä½¿ç”¨ location.hash å®ç°è·¨åŸŸä¸ window.name è·¨åŸŸçš„æƒ…å†µç›¸åŒï¼Œæ˜¯ä¸åŒåŸŸçš„é¡µé¢é—´çš„å‚æ•°ä¼ é€’ï¼Œéœ€è¦å€ŸåŠ© iframe æ ‡ç­¾ï¼ŒA é¡µé¢å’Œ B é¡µé¢æ˜¯åŒåŸŸçš„ http://localhost:3000ï¼ŒC é¡µé¢æ˜¯ç‹¬ç«‹çš„åŸŸ http://localhost:4000ã€‚ 12345678910// æœåŠ¡å™¨1const express = require(express);let app = express();app.use(express.static(__dirname));app.listen(3000);// æœåŠ¡å™¨2const express = require(express);let app = express();app.use(express.static(__dirname));app.listen(4000); å®ç°æ€è·¯ï¼šA é¡µé¢é€šè¿‡ iframe å¼•å…¥ C é¡µé¢ï¼Œå¹¶ç»™ C é¡µé¢ä¼ ä¸€ä¸ª hash å€¼ï¼ŒC é¡µé¢æ”¶åˆ° hash å€¼ååˆ›å»º iframe å¼•å…¥ B é¡µé¢ï¼ŒæŠŠ hash å€¼ä¼ ç»™ B é¡µé¢ï¼ŒB é¡µé¢å°†è‡ªå·±çš„ hash å€¼æ”¾åœ¨ A é¡µé¢çš„ hash å€¼ä¸­ï¼Œè®¿é—® http://localhost:3000/a.htmlã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;!-- æ–‡ä»¶ï¼ša.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é¡µé¢ A&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;iframe src=&quot;http://localhost:4000/c.html#Iloveyou&quot; id=&quot;frame&quot;&gt;&lt;/iframe&gt; &lt;script&gt; // ä½¿ç”¨ hashchange äº‹ä»¶æ¥æ”¶æ¥è‡ª B é¡µé¢è®¾ç½®ç»™ A é¡µé¢çš„ hash å€¼ window.onhashchange = function () { console.log(location.hash); } &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;&lt;!-- æ–‡ä»¶ï¼šc.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é¡µé¢ C&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;script&gt; // æ‰“å° A é¡µé¢å¼•å…¥ C é¡µé¢è®¾ç½®çš„ hash å€¼ console.log(location.hash); let iframe = document.createElement('iframe'); iframe.src = 'http://localhost:3000/b.html#Iloveyoutoo'; document.body.appendChild(iframe); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;&lt;!-- æ–‡ä»¶ï¼šb.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é¡µé¢ B&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;script&gt; // å°† C é¡µé¢å¼•å…¥ B é¡µé¢è®¾ç½®çš„ hash å€¼è®¾ç½®ç»™ Aé¡µé¢ window.parent.parent.location.hash = location.hash; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; å…­ã€ä½¿ç”¨ document.domain å®ç°è·¨åŸŸä½¿ç”¨åœºæ™¯ï¼šä¸æ˜¯ä¸‡èƒ½çš„è·¨åŸŸæ–¹å¼ï¼Œå¤§å¤šä½¿ç”¨äºåŒä¸€å…¬å¸ä¸åŒäº§å“é—´è·å–æ•°æ®ï¼Œå¿…é¡»æ˜¯ä¸€çº§åŸŸåå’ŒäºŒçº§åŸŸåçš„å…³ç³»ï¼Œå¦‚ www.baidu.com ä¸ video.baidu.com ä¹‹é—´ã€‚ 1234const express = require(&quot;express&quot;);let app = express();app.use(express.static(__dirname));app.listen(3000); æƒ³è¦æ¨¡æ‹Ÿä½¿ç”¨ document.domain è·¨åŸŸçš„åœºæ™¯éœ€è¦åšäº›å°å°çš„å‡†å¤‡ï¼Œåˆ° C:Windows/System32/drivers/etc è¯¥è·¯å¾„ä¸‹æ‰¾åˆ° hosts æ–‡ä»¶ï¼Œåœ¨æœ€ä¸‹é¢åˆ›å»ºä¸€ä¸ªä¸€çº§åŸŸåå’Œä¸€ä¸ªäºŒçº§åŸŸåã€‚ 127.0.0.1 www.leheavengame.com 127.0.0.1 m.leheavengame.com å‘½åæ˜¯éšæ„çš„ï¼Œåªè¦æ˜¯ç¬¦åˆä¸€çº§åŸŸåä¸ äºŒçº§åŸŸåçš„å…³ç³»å³å¯ï¼Œç„¶åè®¿é—® http://www.leheavengame.com:3000/a.htmlã€‚ 1234567891011121314151617181920212223242526272829303132333435&lt;!-- æ–‡ä»¶ï¼ša.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é¡µé¢ A&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;p&gt;æˆ‘æ˜¯é¡µé¢ A çš„å†…å®¹&lt;/p&gt; &lt;iframe src=&quot;http://sucess.leheavengame.com:3000/b.html&quot; onload=&quot;load()&quot; id=&quot;frame&quot;&gt;&lt;/iframe&gt; &lt;script&gt; document.domain = 'leheavengame.com'; function load() { console.log(frame.contentWindow.message); } &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;&lt;!-- æ–‡ä»¶ï¼šb.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;é¡µé¢ B&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;p&gt;æˆ‘æ˜¯ B é¡µé¢çš„å†…å®¹&lt;/p&gt; &lt;script&gt; document.domain = 'leheavengame.com'; var message = 'Hello A'; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ä¸ƒã€ä½¿ç”¨ WebSocket å®ç°è·¨åŸŸWebSocket æ²¡æœ‰è·¨åŸŸé™åˆ¶ï¼Œé«˜çº§ APIï¼ˆä¸å…¼å®¹ï¼‰ï¼Œæƒ³è¦å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨ï¼Œå¯ä»¥ä½¿ç”¨ socket.io çš„åº“ï¼ŒWebSocket ä¸ HTTP å†…éƒ¨éƒ½æ˜¯åŸºäº TCP åè®®ï¼ŒåŒºåˆ«åœ¨äº HTTP æ˜¯å•å‘çš„ï¼ˆå•åŒå·¥ï¼‰ï¼ŒWebSocket æ˜¯åŒå‘çš„ï¼ˆå…¨åŒå·¥ï¼‰ï¼Œåè®®æ˜¯ ws:// å’Œ wss:// å¯¹åº” http:// å’Œ https://ï¼Œå› ä¸ºæ²¡æœ‰è·¨åŸŸé™åˆ¶ï¼Œæ‰€ä»¥ä½¿ç”¨ file:// åè®®ä¹Ÿå¯ä»¥è¿›è¡Œé€šä¿¡ã€‚ ç”±äºæˆ‘ä»¬åœ¨ NodeJS æœåŠ¡ä¸­ä½¿ç”¨äº† WebSocketï¼Œæ‰€ä»¥éœ€è¦å®‰è£…å¯¹åº”çš„ä¾èµ–ï¼š npm install ws â€“save 123456789101112131415161718192021222324252627282930313233343536373839&lt;!-- æ–‡ä»¶ï¼šindex.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é¡µé¢&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;script&gt; // åˆ›å»º webSocket let socket = new WebSocket('ws://localhost:3000'); // è¿æ¥ä¸Šè§¦å‘ socket.onopen = function () { socket.send('I love you'); } // æ”¶åˆ°æ¶ˆæ¯è§¦å‘ socket.onmessage = function (e) { // æ‰“å°æ”¶åˆ°çš„æ•°æ® console.log(e.data); // I love you, too } &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;const express = require(&quot;express&quot;);let app = express();// å¼•å…¥ webSocketconst WebSocket = require(&quot;ws&quot;);// åˆ›å»ºè¿æ¥ï¼Œç«¯å£å·ä¸å‰ç«¯ç›¸å¯¹åº”let wss = new WebSocket.Server({ port: 3000 });// ç›‘å¬è¿æ¥wss.on(&quot;connection&quot;, function(ws) { // ç›‘å¬æ¶ˆæ¯ ws.on(&quot;message&quot;, function(data) { // æ‰“å°æ¶ˆæ¯ console.log(data); // I love you // å‘é€æ¶ˆæ¯ ws.send(&quot;I love you, too&quot;); });}); å…«ã€ä½¿ç”¨ nginx å®ç°è·¨åŸŸnginx æœ¬èº«å°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å» nginx å®˜ç½‘ä¸‹è½½æœåŠ¡ç¯å¢ƒ http://nginx.org/en/download....ã€‚ ä¸‹è½½åè§£å‹åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­åŒå‡» nginx.exe å¯åŠ¨ï¼ˆæ­¤æ—¶å¯ä»¥é€šè¿‡ http://localhost è®¿é—® nginx æœåŠ¡ï¼‰åœ¨ç›®å½•æ–°å»º json æ–‡ä»¶å¤¹è¿›å…¥ json æ–‡ä»¶å¤¹æ–°å»º data.json æ–‡ä»¶å¹¶å†™å…¥å†…å®¹å›åˆ° nginx æ ¹ç›®å½•è¿›å…¥ conf æ–‡ä»¶å¤¹ä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€ nginx.conf è¿›è¡Œé…ç½®data.json æ–‡ä»¶ï¼š 123{ &quot;name&quot;: &quot;nginx&quot;} nginx.conf æ–‡ä»¶ï¼š 123456789101112server { . . . location ~.*.json { root json; add_header &quot;Access-Control-Allow-Origin&quot; &quot;*&quot;; } . . .} å«ä¹‰ï¼š ~..jsonï¼šä»£è¡¨å¿½ç•¥å¤§å°å†™ï¼Œåç¼€åä¸º json çš„æ–‡ä»¶ï¼›root jsonï¼šä»£è¡¨ json æ–‡ä»¶å¤¹ï¼›add_headerï¼šä»£è¡¨åŠ å…¥è·¨åŸŸçš„å“åº”å¤´åŠå…è®¸è®¿é—®çš„åŸŸï¼Œ ä¸ºå…è®¸ä»»ä½•è®¿é—®ã€‚åœ¨ nginx æ ¹ç›®å½•å¯åŠ¨ cmd å‘½ä»¤è¡Œï¼ˆwindows ç³»ç»Ÿå¿…é¡»ä½¿ç”¨ cmd å‘½ä»¤è¡Œï¼‰æ‰§è¡Œä¸‹é¢ä»£ç é‡å¯ nginxã€‚ nginx -s reload ä¸è·¨åŸŸè®¿é—®ï¼šhttp://localhost/data.json è·¨åŸŸè®¿é—®æ—¶éœ€è¦åˆ›å»ºè·¨åŸŸæ¡ä»¶ä»£ç å¦‚ä¸‹ï¼š 12345// æœåŠ¡å™¨const express = require(&quot;express&quot;);let app = express();app.use(express.static(__dirname));app.listen(3000); è·¨åŸŸè®¿é—®ï¼šhttp://localhost:3000/index.html 12345678910111213141516171819202122&lt;!-- æ–‡ä»¶ï¼šindex.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;nginxè·¨åŸŸ&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;script&gt; let xhr = new XMLHttpRequest(); xhr.open('GET', 'http://localhost/data.json', true); xhr.onreadystatechange = function () { if(xhr.readyState === 4) { if(xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300 || xhr.status === 304) { console.log(xhr.response); } } } xhr.send(); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ä¹ã€ä½¿ç”¨ http-proxy-middleware å®ç°è·¨åŸŸNodeJS ä¸­é—´ä»¶ http-proxy-middleware å®ç°è·¨åŸŸä»£ç†ï¼ŒåŸç†å¤§è‡´ä¸ nginx ç›¸åŒï¼Œéƒ½æ˜¯é€šè¿‡å¯ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œå®ç°æ•°æ®çš„è½¬å‘ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½® cookieDomainRewrite å‚æ•°ä¿®æ”¹å“åº”å¤´ä¸­ cookie ä¸­çš„åŸŸåï¼Œå®ç°å½“å‰åŸŸçš„ cookie å†™å…¥ï¼Œæ–¹ä¾¿æ¥å£ç™»å½•è®¤è¯ã€‚ 1ã€é vue æ¡†æ¶çš„è·¨åŸŸï¼ˆ2 æ¬¡è·¨åŸŸï¼‰ 123456789101112131415161718&lt;!-- æ–‡ä»¶ï¼šindex.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;proxy è·¨åŸŸ&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;script&gt; var xhr = new XMLHttpRequest(); // å‰ç«¯å¼€å…³ï¼šæµè§ˆå™¨æ˜¯å¦è¯»å†™ cookie xhr.withCredentials = true; // è®¿é—® http-proxy-middleware ä»£ç†æœåŠ¡å™¨ xhr.open('get', 'http://www.proxy1.com:3000/login?user=admin', true); xhr.send(); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ä¸­é—´ä»£ç†æœåŠ¡ä¸­ä½¿ç”¨äº† http-proxy-middleware ä¸­é—´ä»¶ï¼Œå› æ­¤éœ€è¦æå‰ä¸‹è½½ï¼š npm install http-proxy-middleware â€“save-dev 12345678910111213141516171819202122232425262728293031323334// ä¸­é—´ä»£ç†æœåŠ¡å™¨const express = require(&quot;express&quot;);let proxy = require(&quot;http-proxy-middleware&quot;);let app = express();app.use( &quot;/&quot;, proxy({ // ä»£ç†è·¨åŸŸç›®æ ‡æ¥å£ target: &quot;http://www.proxy2.com:8080&quot;, changeOrigin: true, // ä¿®æ”¹å“åº”å¤´ä¿¡æ¯ï¼Œå®ç°è·¨åŸŸå¹¶å…è®¸å¸¦ cookie onProxyRes: function(proxyRes, req, res) { res.header(&quot;Access-Control-Allow-Origin&quot;, &quot;http://www.proxy1.com&quot;); res.header(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;); }, // ä¿®æ”¹å“åº”ä¿¡æ¯ä¸­çš„ cookie åŸŸå cookieDomainRewrite: &quot;www.proxy1.com&quot; // å¯ä»¥ä¸º falseï¼Œè¡¨ç¤ºä¸ä¿®æ”¹ }));app.listen(3000);// æœåŠ¡å™¨const http = require(&quot;http&quot;);const qs = require(&quot;querystring&quot;);const server = http.createServer();server.on(&quot;request&quot;, function(req, res) { let params = qs.parse(req.url.substring(2)); // å‘å‰å°å†™ cookie res.writeHead(200, { &quot;Set-Cookie&quot;: &quot;l=a123456;Path=/;Domain=www.proxy2.com;HttpOnly&quot; // HttpOnlyï¼šè„šæœ¬æ— æ³•è¯»å– }); res.write(JSON.stringify(params)); res.end();});server.listen(&quot;8080&quot;); vue æ¡†æ¶çš„è·¨åŸŸï¼ˆ1 æ¬¡è·¨åŸŸï¼‰ åˆ©ç”¨ node + webpack + webpack-dev-server ä»£ç†æ¥å£è·¨åŸŸã€‚åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œç”±äº Vue æ¸²æŸ“æœåŠ¡å’Œæ¥å£ä»£ç†æœåŠ¡éƒ½æ˜¯ webpack-dev-serverï¼Œæ‰€ä»¥é¡µé¢ä¸ä»£ç†æ¥å£ä¹‹é—´ä¸å†è·¨åŸŸï¼Œæ— é¡»è®¾ç½® Headers è·¨åŸŸä¿¡æ¯äº†ã€‚ 1234567891011121314151617// å¯¼å‡ºæœåŠ¡å™¨é…ç½®module.exports = { entry: {}, module: {}, ... devServer: { historyApiFallback: true, proxy: [{ context: '/login', target: 'http://www.proxy2.com:8080', // ä»£ç†è·¨åŸŸç›®æ ‡æ¥å£ changeOrigin: true, secure: false, // å½“ä»£ç†æŸäº› https æœåŠ¡æŠ¥é”™æ—¶ç”¨ cookieDomainRewrite: 'www.leheavengame.com' // å¯ä»¥ä¸º falseï¼Œè¡¨ç¤ºä¸ä¿®æ”¹ }], noInfo: true }}","link":"/2018/11/19/%E5%AE%9E%E7%94%A8%E7%9A%84%E8%B7%A8%E5%9F%9F%E6%96%B9%E6%B3%95/"},{"title":"å¯¹äºvuexçš„ä½¿ç”¨","text":"vuexæ˜¯ä»€ä¹ˆï¼Ÿå®˜ç½‘çš„è§£é‡ŠVuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚Vuex ä¹Ÿé›†æˆåˆ° Vue çš„å®˜æ–¹è°ƒè¯•å·¥å…· devtoolsï¼Œextensionï¼Œæä¾›äº†è¯¸å¦‚é›¶é…ç½®çš„ time-travel è°ƒè¯•ã€çŠ¶æ€å¿«ç…§å¯¼å…¥å¯¼å‡ºç­‰é«˜çº§è°ƒè¯•åŠŸèƒ½ã€‚ vuex åœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨ã€é€šè¿‡vue-cli è„šæ‰‹æ¶æ­å»ºçš„é¡¹ç›®ä¸­ã€‘å®‰è£…1npm install vuex --save åœ¨main.jsä¸­ å¼•å…¥1234567891011121314151617181920212223242526//main.jsimport Vuex from 'vuex';Vue.use(Vuex);//åˆ›å»ºä¸€ä¸ªstoreä»¥ä¾¿äºåœ¨æ‰€æœ‰ç»„ä»¶éƒ½èƒ½æŸ¥è¯¢åˆ°vuexçš„æ•°æ®const store = new Vuex.Store({ state: { count: 0 }, mutations: { increment (state) { state.count++ } }});//ç®€å•æµ‹è¯•//store.commit('increment')//console.log(store.state.count);//åœ¨vueå®ä¾‹ä¸­å¼•ç”¨export default new Vue({ el: '#app', store, components: { App }, template: '&lt;App/&gt;'}); vuexæ ¸å¿ƒæ¦‚å¿µçš„ä½¿ç”¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051//main.jsconst store = new Vuex.Store({ //æ•°æ®å­˜å‚¨çš„å­—æ®µ state: { count: 0 }, //æ›´æ”¹ Vuex çš„ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯æäº¤ mutationã€‚ mutations: { increment (state,value) { state.count+=value } }, //å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåŠ¨ä½œï¼Œå®ƒæäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ã€‚ actions: { increment (context,value) { context.commit('increment',value) } }, //å°†æ•°æ®è¿”å›å‡ºå»ï¼Œä»¥ä¾¿äºç»„ä»¶ä¸­æ‹¿åˆ°countå€¼ getters:{ getCounts:state =&gt;state.count }});//æ–°å»ºä¸€ä¸ªç»„ä»¶ï¼Œå‡è®¾å‘½åä¸ºdemo.vue&lt;template&gt; &lt;div&gt; {{counts}} &lt;/div&gt;&lt;/template&gt; &lt;script&gt; export default { name: 'demo', data () { return { } }, computed:{ //é€šè¿‡è®¡ç®—å±æ€§ç›‘å¬vuexé‡Œé¢ countçš„å€¼ counts(){ return this.$store.getters.getCounts; } }, created(){ setTimeout(()=&gt;{ //action æ–¹æ³•æäº¤ this.$store.dispatch('increment',10) },2000) } } &lt;/script&gt; éšåï¼Œå¯ä»¥å°†storeåœ¨main.jsä¸­å¤„ç†å‡ºæ¥ï¼Œsrcç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å‘½åä¸ºstore,æ–°å»ºindex.js,actions.js,getters.js,mutation-types.js,mutations.js\\ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667//index.jsimport Vue from 'vue';import Vuex from 'vuex';import mutations from './mutations';import actions from './actions';import getters from './getters';Vue.use(Vuex);export const store = new Vuex.Store({ state: { count: 1, }, mutations, actions, getters});// mutation-types.jsexport const INCREMENT=&quot;INCREMENT&quot;;// action.jsimport { INCREMENT} from './mutation-types';export default { [INCREMENT]({ commit, state },value) { commit(INCREMENT,value); },};// mutations.jsimport { INCREMENT} from './mutation-types';export default { [INCREMENT](state, value) { state.count += value; }};// getters.jsimport { INCREMENT} from './mutation-types';const getters = { [INCREMENT]: state =&gt; state.count,};export default getters;&lt;/pre&gt;&lt;p&gt;main.js&lt;/p&gt;&lt;pre&gt;//main.js// The Vue build version to load with the `import` command// (runtime-only or standalone) has been set in webpack.base.conf with an alias.import Vue from 'vue'import App from './App'import router from './router'import { store } from './store';Vue.config.productionTip = falsenew Vue({ el: '#app', router, store, components: { App }, template: '&lt;App/&gt;'}) demo.vue123456789101112131415161718192021222324252627&lt;template&gt; &lt;div&gt; {{counts}} &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { name: 'demo', data () { return { } }, computed:{ //é€šè¿‡è®¡ç®—å±æ€§ç›‘å¬vuexé‡Œé¢ countçš„å€¼ counts(){ return this.$store.getters['INCREMENT']; } }, created(){ setTimeout(()=&gt;{ //action æ–¹æ³•æäº¤ this.$store.dispatch('INCREMENT',10) },2000) } } &lt;/script&gt;","link":"/2018/04/15/%E5%AF%B9%E4%BA%8Evuex%E7%9A%84%E4%BD%BF%E7%94%A8/"},{"title":"å¾®ä¿¡å°ç¨‹åº navigatorè·³è½¬urlå‚æ•°ä¼ é€’","text":"ä½¿ç”¨æ–¹æ³•è¯´æ˜ä¼ å€¼:åœ¨navigatorçš„å±æ€§urlåæ‹¼æ¥?id(å‚æ•°åå­—)=è¦ä¼ é€’çš„å€¼ (å¦‚æœå¤šä¸ªå‚æ•°ç”¨&amp;åˆ†å¼€ &amp;name=value&amp;â€¦â€¦.)1234567891011121314151617181920&lt;view class=&quot;good-nav&quot;&gt; &lt;navigator class=&quot;good-nav-item&quot; url=&quot;/pages/index/good/good?type=1&quot;&gt; &lt;image src=&quot;http://www.leheavengame.com/wxImages/good-nav01.png&quot;&gt;&lt;/image&gt; æŠ¤è‚¤ç³»åˆ— &lt;/navigator&gt; &lt;navigator class=&quot;good-nav-item&quot; url=&quot;/pages/index/good/good?type=2&quot;&gt; &lt;image src=&quot;http://www.leheavengame.com/wxImages/good-nav02.png&quot;&gt;&lt;/image&gt; é¢è†œç³»åˆ— &lt;/navigator&gt; &lt;navigator class=&quot;good-nav-item&quot; url=&quot;/pages/index/good/good?type=3&quot;&gt; &lt;image src=&quot;http://www.leheavengame.com/wxImages/good-nav03.png&quot;&gt;&lt;/image&gt; å½©å¦†ç³»åˆ— &lt;/navigator&gt; &lt;navigator class=&quot;good-nav-item&quot; url=&quot;/pages/index/good/good?type=4&quot;&gt; &lt;image src=&quot;http://www.leheavengame.com/wxImages/good-nav04.png&quot;&gt;&lt;/image&gt; å°æ ·æ—…è¡Œè£…&lt;/navigator&gt; &lt;navigator class=&quot;good-nav-item&quot; url=&quot;/pages/index/good/good?type=5&quot;&gt; &lt;image src=&quot;http://www.leheavengame.com/wxImages/good-nav05.png&quot;&gt;&lt;/image&gt; èµ å“ä¸“åŒº&lt;/navigator&gt;&lt;/view&gt; å–å€¼ï¼šoptions æ˜¯åŒ…å«urlåœ°å€ä¸­å‚æ•°çš„å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥ ç‚¹+å‚æ•°å(.+name) è·å–ã€‚123456789101112131415161718192021onLoad: function (options) { var that=this; wx.showLoading({ title: 'åŠ è½½ä¸­', }) let goodType=options.type //urlåœ°å€ä¸­typeçš„å€¼ wx.request({ url: 'https://www.leheavengame.com/ywhx/play', method: 'POST', data: { type: goodType }, header: { //å‘api æ¨é€é€‰æ‹©çš„æ ¼å¼ 'content-type': ' application/x-www-form-urlencoded' }, success: function (res) { console.log(res) wx.hideLoading() })}","link":"/2017/10/15/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-navigator%E8%B7%B3%E8%BD%ACurl%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92/"},{"title":"å¯¹äºWebpackçš„ç®€å•ç†è§£","text":"å…³äºwebpack:webpackå¤§è€Œå…¨ï¼Œå’Œé™æ€èµ„æºç›¸å…³çš„æ‰€æœ‰å®ƒéƒ½èƒ½å¹²æ¶‰ï¼Œå½“ç„¶ï¼Œè¿˜èƒ½å¯åŠ¨serverï¼›webpackä¸»è¦ä»¥loaderså’Œpluginså¤„ç†å„ç§é™æ€èµ„æºï¼› loadersï¼šåœ¨Reacté‡Œä¼šç”¨åˆ°JSXã€ES6ã€jsï¼Œæˆ‘ç»Ÿä¸€å°†æ–‡ä»¶åç¼€ä½¿ç”¨.jsï¼Œä¾¿äºbabelçš„é…ç½®ï¼š npm install â€“save babel-loader 12345678{ test: /\\.js?$/, exclude: /node_modules/, loader: 'babel', query: { presets: ['es2015', 'react'] }} CSSã€scssã€iconfrontå­—ä½“æ–‡ä»¶ï¼šnpm install â€“save style-loader css-loader sass-loader url-loader file-loader 12345678910111213141516{ test:/\\.css$/, loader: ExtractTextPlugin.extract(&quot;style-loader&quot;, &quot;css-loader&quot;)},{ test: /\\.scss$/, loader: ExtractTextPlugin.extract(&quot;style-loader&quot;, &quot;css!sass&quot;)},{ test: /\\.(woff|woff2)/, loader: &quot;url?limit=10000&amp;minetype=application/font-woff&amp;name=./[name].[ext]&quot; },{ test: /\\.(ttf|eot|svg)/, loader: &quot;file?name=./[name].[ext]&quot;},{ test: /\\.otf/, loader: &quot;file?name=./[name].[ext]&amp;minetype=application/font-otf&quot;} æƒ³å°†cssç‹¬ç«‹å‡ºæ¥çš„è¯ï¼šnpm install â€“save extract-text-webpack-plugin 123var plugins=[];var ExtractTextPlugin = require('extract-text-webpack-plugin');plugins.push(new ExtractTextPlugin('./app-[hash].css?[hash]')); å¤„ç†å›¾ç‰‡ï¼šnpm install â€“save url-loader 1234{ test:/\\.(png|jpg|gif)$/, loader:'url-loader?limit=10&amp;name=[name].[ext]'} å¤šä¸ªloaderé€šè¿‡ï¼åŒºåˆ†ï¼ŒåŒæ—¶æ¥å—æŸ¥è¯¢å‚æ•°ä»¥ï¼Ÿè¿æ¥ï¼Œç±»ä¼¼äºç”¨ï¼åŒºåˆ†å¤šä¸ªurlï¼Œæ¯”å¦‚ï¼šloader1?name=[name]-[hash].[ext]&amp;limit=10000!loader2?xxx=xxï¼›å¯ä»¥ä½¿ç”¨requireè¯­å¥åŠ è½½loaderï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼æ¥ç»‘å®šloaderï¼› pluginsï¼šhtml-webpack-pluginä¼šç”±entryçš„é…ç½®å°†å…¥å£æ–‡ä»¶æ‰€å±çš„htmlæ–‡ä»¶ä½œä¸ºæ¨¡æ¿ï¼Œé‡æ–°ç”Ÿæˆä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œå…¶ä¸­çš„é™æ€èµ„æºéƒ½å·²æ ¹æ®é…ç½®æ‰“åŒ…å¥½ï¼Œè²Œä¼¼å¾ˆä¸é”™å“¦ï¼ä¸è¿‡æœ‰ä¸¤ä¸ªé—®é¢˜ï¼Œè¿˜æ²¡è§£å†³ï¼šï¼ˆ1ï¼‰ã€å¦‚æœé™æ€èµ„æºå’Œä¸»ç«™æ˜¯å„è‡ªç‹¬ç«‹çš„ç«™ç‚¹ï¼Œè€Œå°†htmlä½œä¸ºé™æ€èµ„æºå¯¹å¾…çš„è¯ï¼Œä¸»ç«™æœ‰è·¯ç”±ç›¸å…³é…ç½®çš„è¯ï¼Œå¥½åƒæœ‰ç‚¹æ‰¯ä¸å¼€äº†ï¼›è¦æ˜¯åªåœ¨æœ¬åœ°å¼€å‘è¿™æ ·é…ç½®ï¼Œå„è‡ªç‹¬ç«‹ä¸Šçº¿çš„è¯ï¼Œè·¨åŸŸæ—¶æœ¬åœ°ä¸ä¾¿äºæµ‹è¯•ï¼›ï¼ˆ2ï¼‰ã€é¡µé¢ä¸Šçš„å›¾ç‰‡è·¯å¾„æ²¡åšå¤„ç†ï¼Œå¯èƒ½è¦æ±‚æœ‰ç‚¹å¤šäº†ã€‚ã€‚ã€‚ï¼ˆ3ï¼‰ã€å°†htmlä½œä¸ºæ¨¡æ¿å¯¹å¾…äº†ï¼Œé‚£ä¹ˆå¦‚ä½•includeå…¶ä»–æ¨¡æ¿ï¼›ç”±äºè¿™ä¸‰ä¸ªåŸå› ï¼Œæš‚æ—¶ä¸æ•¢è¯´html-webpack-pluginå¾ˆé€‚ç”¨ï¼Œç‰¹åˆ«æ˜¯ç¬¬ä¸€ç‚¹ï¼›ç»§ç»­æ¢ç´¢ä¸­ã€‚ 123456789var plugins=[];var HtmlWebpackPlugin = require('html-webpack-plugin');plugins.push(new HtmlWebpackPlugin({ template: './files/es6.html', filename: 'es6.html', title:'hhhhhh', inject: true, chunks:['entry1']//å¯ä»¥newå¤šä¸ªhtmlç”±entryåŒºåˆ†})); ä½¿ç”¨webpackåï¼Œå¯¹æ–‡ä»¶çš„ç‰ˆæœ¬hashå°†å˜å¾—éå¸¸ç®€å•ï¼šå‡ºå£æ–‡ä»¶çš„nameåŠ ä¸Š[hash]å³å¯ï¼›å¯èƒ½ç°åœ¨æ¥è¯´ï¼Œæ¸…é™¤é™æ€èµ„æºç¼“å­˜æœ€å¥½çš„åšæ³•å°±æ˜¯æ–‡ä»¶åhashäº†ï¼Œæ³¨æ„ä¸æ˜¯åŠ ä¸ªåç¼€å¯ä»¥çš„ï¼›å¯¹äºæµé‡éå¸¸é«˜çš„ç«™ç‚¹ï¼Œå³ä½¿ç­‰åˆ°ä¸‰æ›´åŠå¤œä¸Šçº¿ï¼Œå¦‚æœä»…ä»…åŠ ä¸ªåç¼€æ¸…ç¼“å­˜çš„è¯ï¼Œä¹Ÿéš¾å…ä¼šå‡ºäº‹ï¼Œå› ä¸ºé¡µé¢å’Œé™æ€èµ„æºåŒæ­¥æ—¶ä¼šæœ‰æ—¶é—´å·®ï¼Œè€Œåœ¨è¿™ä¸ªé—´éš™æœ‰ç”¨æˆ·è®¿é—®çš„è¯ï¼Œé¡µé¢å‡ºé”™çš„å¯èƒ½æ€§å°±å¾ˆå¤§äº†ï¼›è€Œæ–‡ä»¶åhashçš„æ–¹å¼å°±èƒ½å¾ˆå¥½çš„é¿å…è¿™ä¸ªé—®é¢˜ï¼Œç”±äºæ¯æ¬¡æ”¹åŠ¨åç”Ÿæˆçš„æ–‡ä»¶åéƒ½ä¸ä¸€æ ·ï¼Œä¸Šçº¿å¹¶ä¸æ˜¯è¦†ç›–ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œå†ä¸Šé¡µé¢æ–‡ä»¶å³ä½¿åŒæ­¥æœ‰æ—¶é—´å·®ï¼Œè¦ä¹ˆè®¿é—®æ—§ç‰ˆé¡µé¢å’Œæ—§ç‰ˆèµ„æºï¼Œè¦ä¹ˆè®¿é—®æ–°ç‰ˆé¡µé¢æ–°ç‰ˆèµ„æºï¼Œå°±ä¸å­˜åœ¨å†²çªäº†ï¼Œè¿™æ ·æœåŠ¡å™¨å¯ä»¥å¤§èƒ†çš„å¯¹é™æ€èµ„æºå¼€å¯æ°¸ä¹…å¼ºç¼“å­˜ï¼Œå¹¶ä¸”æœ‰åˆ©äºå›æ»šï¼›è‡³äºé™æ€èµ„æºç”±æ­¤äº§ç”Ÿçš„ç§¯å‹ï¼Œäº¤ç»™è¿ç»´å¤„ç†å§ï¼ ä½¿ç”¨html-webpack-pluginèƒ½å¾ˆå¥½çš„é…åˆæ–‡ä»¶åhashï¼ŒåŸºäºä¸Šé¢çš„å°é—®é¢˜ã€‚ã€‚ã€‚ ç°åœ¨ç”Ÿæˆæ–‡ä»¶åhashå¾ˆç®€å•äº†ï¼Œæ€ä¹ˆå¯¹åº”é¡µé¢ä¸€èµ·æ”¹å‘¢ï¼Ÿ è‡ªå·±åŠ¨æ‰‹æ…¢æ…¢æ”¹å»å§ é¡µé¢ç”±å‰ç«¯è¾“å‡ºï¼šç”Ÿæˆmap.jsonï¼Œæ ¹æ®è¿™ä¸ªé…ç½®è¯»æ–‡ä»¶å¯¹åº”æ”¹èµ„æºå¼•ç”¨çš„è·¯å¾„ é¡µé¢ç”±åç«¯è¾“å‡ºï¼šç”Ÿæˆmap.jsonï¼Œåç«¯è¯»è¿™ä¸ªé…ç½®åŠ¨æ€åŠ è½½é¡µé¢å¼•ç”¨çš„èµ„æºè·¯å¾„ æ€»ä¹‹ï¼Œå°±æ˜¯è¦ç”Ÿæˆmap.jsonï¼Œè¿™é‡Œå°±ç®€åŒ–äº†å¾ˆå¤šï¼Œå› ä¸ºä¸ç”¨ç®¡æ–‡ä»¶ä¾èµ–äº†ï¼Œwebpackå·²å°†ä¾èµ–æ–‡ä»¶æ‰“åŒ…åˆ°ä¸»æ–‡ä»¶é‡Œäº†ï¼›æ¥ä¸‹æ¥å°±æ˜¯è¯»è¿™ä¸ªé…ç½®æ–‡ä»¶äº†ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œå†æ¢ï¼ã€‚ã€‚ã€‚ ç”±assets-webpack-pluginç”Ÿæˆmap.jsonï¼š 1234567var AssetsPlugin = require('assets-webpack-plugin');plugins.push(new AssetsPlugin({ filename: 'map.json', processOutput: function (assets) { return JSON.stringify(assets); }})); map.jsonå¤§æ¦‚è¿™æ ·ï¼š 123456{&quot;entry1&quot;: { &quot;js&quot;:&quot;app-ed03f4fe.js&quot;, &quot;css&quot;:&quot;app-6f7f3cda3d230d8fa897.css&quot; }}","link":"/2017/05/10/%E5%AF%B9%E4%BA%8EWebpack%E7%9A%84%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3/"},{"title":"æ¨¡å—åŒ–ç®€æ","text":"å…³äºæ¨¡å—åŒ–ï¼Œæœ€ç›´æ¥çš„è¡¨ç°å°±æ˜¯æˆ‘ä»¬å†™çš„ require å’Œ import å…³é”®å­—ï¼Œå¦‚æœæŸ¥é˜…ç›¸å…³èµ„æ–™ï¼Œå°±ä¸€å®šä¼šé‡åˆ° CommonJS ã€CMD AMD è¿™äº›åè¯ï¼Œä»¥åŠ RequireJSã€SeaJS ç­‰é™Œç”Ÿæ¡†æ¶ã€‚æ¯”å¦‚ SeaJS çš„å®˜ç½‘ è¿™æ ·æè¿°è‡ªå·±: â€œç®€å•å‹å¥½çš„æ¨¡å—å®šä¹‰è§„èŒƒï¼ŒSea.js éµå¾ª CMD è§„èŒƒã€‚è‡ªç„¶ç›´è§‚çš„ä»£ç ç»„ç»‡æ–¹å¼ï¼Œä¾èµ–çš„è‡ªåŠ¨åŠ è½½â€¦â€¦â€ JavaScript åŸºç¡€ åšå®¢æˆ·ç«¯çš„åŒå­¦å¯¹ OC çš„ #import â€œclassnameâ€ã€Swift çš„ Module ä»¥åŠæ–‡ä»¶ä¿®é¥°ç¬¦ å’Œ Java çš„ import package+class æ¨¡å¼åº”è¯¥éƒ½ä¸é™Œç”Ÿã€‚æˆ‘ä»¬ä¹ æƒ¯äº†å¼•ç”¨ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯å¼•ç”¨ä¸€ä¸ªç±»çš„æ¨¡å¼ã€‚ç„¶è€Œåœ¨ JavaScript è¿™ç§åŠ¨æ€è¯­è¨€ä¸­ï¼Œäº‹æƒ…åˆæœ‰ä¸€äº›å˜åŒ–ï¼Œä¸¾ä¸ªä¾‹å­è¯´æ˜: 123456789101112131415161718192021&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;p id=&quot;hello&quot;&gt; Hello Wrold &lt;/p&gt;&lt;input type=&quot;button&quot; onclick=&quot;onPress()&quot; value=&quot;Click me&quot; /&gt;&lt;/body&gt;&lt;/html&gt;// index.jsfunction onPress() {var p = document.getElementById('hello');p.innerHTML = 'Hello bestswifter';} HTML ä¸­çš„ &lt;/head&gt; &lt;body&gt; &lt;p id=&quot;hello&quot;&gt; Hello Wrold &lt;/p&gt; &lt;input type=&quot;button&quot; onclick=&quot;onPress()&quot; value=&quot;Click me&quot; /&gt; &lt;/body&gt; &lt;/html&gt;// index.jsfunction onPress() {var p = document.getElementById('hello');p.innerHTML = add(1, 2);} å¯ä»¥çœ‹åˆ°è¿™ç§å†™æ³•å¹¶ä¸ä¼˜é›…ï¼Œ index.js å¯¹åˆ«çš„ JS æ–‡ä»¶ä¸­çš„å†…å®¹å¹¶æ²¡æœ‰æ§åˆ¶æƒï¼Œèƒ½å¦è°ƒç”¨åˆ° add æ–¹æ³•å®Œå…¨å–å†³äºä½¿ç”¨è‡ªå·±çš„ HTML æ–‡ä»¶æœ‰æ²¡æœ‰æ­£ç¡®å¼•ç”¨åˆ«çš„ JS æ–‡ä»¶ã€‚ åˆæ­¥æ¨¡å—åŒ– åˆšåˆšæ‰€è¯´çš„ç—›ç‚¹å…¶å®å¯ä»¥åˆ†ä¸ºä¸¤ç§:ï¼ˆ1ï¼‰ index.js æ— æ³• importï¼Œä¾èµ–äº HTML çš„å¼•ç”¨;ï¼ˆ2ï¼‰index.js ä¸­æ— æ³•å¯¹ add æ–¹æ³•çš„æ¥æºåšåŒºåˆ†ï¼Œç¼ºå°‘å‘½åç©ºé—´çš„æ¦‚å¿µã€‚ ç¬¬ä¸€ä¸ªé—®é¢˜ç•™åœ¨åé¢è§£ç­”ï¼Œæˆ‘ä»¬å…ˆç€æ‰‹è§£å†³ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ¯”å¦‚å…ˆæŠŠå‡½æ•°æ”¾åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æš´éœ²ä¸€ä¸ªå¯¹è±¡ï¼Œè®©ä½¿ç”¨è€…è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„å¤šä¸ªæ–¹æ³•: 123456789101112//index.jsfunction onPress() {var p = document.getElementById('hello');p.innerHTML = math.add(1, 2);}//math.jsvar math = {base: 0,add: function(a, b) {return a + b + base;},}; å¯ä»¥çœ‹åˆ°åœ¨ index.js ä¸­å·²ç»å¯ä»¥æŒ‡å®šä¸€ä¸ªç®€æ˜“ç‰ˆçš„å‘½åç©ºé—´äº†(ä¹Ÿå°±æ˜¯ math)ã€‚ä½†ç›®å‰è¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œæ¯”å¦‚ base è¿™ä¸ªå±æ€§ä¼šè¢«æš´éœ²ç»™å¤–ç•Œï¼Œä¹Ÿå¯ä»¥è¢«ä¿®æ”¹ã€‚æ‰€ä»¥æ›´å¥½çš„æ–¹å¼æ˜¯å°† math å®šä¹‰åœ¨ä¸€ä¸ªé—­åŒ…é‡Œï¼Œä»è€Œéšè—å†…éƒ¨å±æ€§: 123456789// math.jsvar math = (function() {var base = 0;return {add: function(a, b) {return a + b + base;},};})(); åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å®ç°äº†æ¨¡å—çš„å®šä¹‰å’Œä½¿ç”¨ã€‚ä¸è¿‡æ¨¡å—åŒ–çš„ä¸€å¤§ç²¾é«“åœ¨äºå‘½åç©ºé—´ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¸Œæœ›è‡ªå·±çš„ math æ¨¡å—ä¸æ˜¯å…¨å±€çš„ï¼Œè€Œæ˜¯æŒ‰éœ€å¯¼å…¥ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å¤šä¸ªæ–‡ä»¶æš´éœ²åŒåå¯¹è±¡ä¹Ÿä¸ä¼šå‡ºé—®é¢˜ã€‚å°±åƒ node.js ä¸­é‚£æ ·ï¼Œéœ€è¦æš´éœ²çš„æ¨¡å—å®šä¹‰è‡ªå·±çš„ export å†…å®¹ï¼Œç„¶åè°ƒç”¨æ–¹ä½¿ç”¨ require æ–¹æ³•ã€‚ å…¶å®å¯ä»¥ç®€å•æ¨¡æ‹Ÿä¸€ä¸‹ node.js çš„å·¥ä½œæ–¹å¼ï¼Œé€šè¿‡å¢åŠ ä¸€ä¸ªä¸­é—´å±‚æ¥è§£å†³: é¦–å…ˆå®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡: 123456789101112131415161718192021// global.jsvar module = {exports: {}, // ç”¨æ¥å­˜å‚¨æ‰€æœ‰æš´éœ²çš„å†…å®¹}; //ç„¶ååœ¨ math.js ä¸­æš´éœ²å¯¹è±¡:var math = (function() {var base = 0;return {add: function(a, b) {return a + b + base;},};})();module.exports.math = math; //ä½¿ç”¨è€… index.js ç°åœ¨åº”è¯¥æ˜¯:var math = module.exports.math;function onPress() {var p = document.getElementById('hello');// mathp.innerHTML = math.add(1, 2);} ç°æœ‰æ¨¡å—åŒ–æ–¹æ¡ˆ ä¸Šè¿°ç®€å•çš„æ¨¡å—åŒ–æ–¹å¼æœ‰ä¸€äº›å°é—®é¢˜ã€‚é¦–å…ˆï¼Œindex.js å¿…é¡»ä¸¥æ ¼ä¾èµ–äº math.js æ‰§è¡Œï¼Œå› ä¸ºåªæœ‰ math.js æ‰§è¡Œå®Œæ‰ä¼šå‘å…¨å±€çš„ module.export ä¸­æ³¨å†Œè‡ªå·±ã€‚è¿™å°±è¦æ±‚å¼€å‘è€…å¿…é¡»æ‰‹åŠ¨ç®¡ç† js æ–‡ä»¶çš„åŠ è½½é¡ºåºã€‚éšç€é¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼Œä¾èµ–çš„ç»´æŠ¤ä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚ å…¶æ¬¡ï¼Œç”±äºåŠ è½½ JS æ–‡ä»¶æ—¶ï¼Œæµè§ˆå™¨ä¼šåœæ­¢æ¸²æŸ“ç½‘é¡µï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ JS æ–‡ä»¶çš„å¼‚æ­¥æŒ‰éœ€åŠ è½½ã€‚ æœ€åä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œä¹‹å‰ç»™å‡ºçš„ç®€åŒ–ç‰ˆæ¨¡å—åŒ–æ–¹æ¡ˆå¹¶æ²¡æœ‰è§£å†³æ¨¡å—çš„å‘½åç©ºé—´ï¼Œç›¸åŒçš„å¯¼å‡ºä¾æ—§ä¼šæ›¿æ¢æ‰ä¹‹å‰çš„å†…å®¹ï¼Œè€Œè§£å†³æ–¹æ¡ˆåˆ™æ˜¯ç»´æŠ¤ä¸€ä¸ª â€œæ–‡ä»¶è·¯å¾„ &lt;â€“&gt; å¯¼å‡ºå†…å®¹â€ çš„è¡¨ï¼Œå¹¶ä¸”æ ¹æ®æ–‡ä»¶è·¯å¾„åŠ è½½ã€‚ åŸºäºä¸Šè¿°éœ€æ±‚ï¼Œå¸‚åœºä¸Šå‡ºç°äº†å¾ˆå¤šå¥—æ¨¡å—åŒ–æ–¹æ¡ˆã€‚ä¸ºå•¥ä¼šæœ‰å¤šå¥—æ ‡å‡†å‘¢ï¼Œå®é™…ä¸Šè¿˜æ˜¯ç”±å‰ç«¯çš„ç‰¹æ€§å¯¼è‡´çš„ã€‚ç”±äºç¼ºä¹ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†ï¼Œæ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹å¤§å®¶åšäº‹çš„æ—¶å€™éƒ½æ˜¯é çº¦å®šï¼Œå°±æ¯”å¦‚ä¸Šè¿°çš„ export å’Œ requireã€‚å¦‚æœä»£ç çš„æä¾›è€…æŠŠå¯¼å‡ºå†…å®¹å­˜å‚¨åœ¨ module.exports é‡Œï¼Œè€Œä½¿ç”¨è€…è¯»å–çš„æ˜¯ module.exportï¼Œé‚£è‡ªç„¶æ˜¯å¾’åŠ³çš„ã€‚ä¸ä»…å¦‚æ­¤ï¼Œå„ä¸ªè§„èŒƒçš„å®ç°æ–¹å¼ã€ä½¿ç”¨åœºæ™¯ä¹Ÿä¸å°½ç›¸åŒã€‚ CommonJS æ¯”è¾ƒçŸ¥åçš„è§„èŒƒæœ‰ CommonJSã€AMD å’Œ CMDã€‚è€ŒçŸ¥åæ¡†æ¶ Node.jsã€RequireJS å’Œ Seajs åˆ†åˆ«å®ç°äº†ä¸Šè¿°è§„èŒƒã€‚ æœ€æ—©çš„è§„èŒƒæ˜¯ CommonJSï¼ŒNode.js ä½¿ç”¨äº†è¿™ä¸€è§„èŒƒã€‚è¿™ä¸€è§„èŒƒå’Œæˆ‘ä»¬ä¹‹å‰çš„åšæ³•æ¯”è¾ƒç±»ä¼¼ï¼Œæ˜¯åŒæ­¥åŠ è½½ JS è„šæœ¬ã€‚è¿™ä¹ˆåšåœ¨æœåŠ¡ç«¯æ¯«æ— é—®é¢˜ï¼Œå› ä¸ºæ–‡ä»¶éƒ½å­˜åœ¨ç£ç›˜ä¸Šï¼Œç„¶è€Œæµè§ˆå™¨çš„ç‰¹æ€§å†³å®šäº† JS è„šæœ¬éœ€è¦å¼‚æ­¥åŠ è½½ï¼Œå¦åˆ™å°±ä¼šå¤±å»å“åº”ï¼Œå› æ­¤ CommonJS è§„èŒƒæ— æ³•ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚ AMD æµè§ˆå™¨ç«¯è‘—åçš„æ¨¡å—ç®¡ç†å·¥å…· Require.js çš„åšæ³•æ˜¯å¼‚æ­¥åŠ è½½ï¼Œé€šè¿‡ Webworker çš„ importScripts(url); å‡½æ•°åŠ è½½ JS è„šæœ¬ï¼Œç„¶åæ‰§è¡Œå½“åˆæ³¨å†Œçš„å›è°ƒã€‚Require.js çš„å†™æ³•æ˜¯: 12345require(['myModule1', 'myModule2'], function (m1, m2){// ä¸»å›è°ƒé€»è¾‘m1.printName();m2.printName();}); ç”±äºè¿™ä¸¤ä¸ªæ¨¡å—æ˜¯å¼‚æ­¥ä¸‹è½½ï¼Œå› æ­¤å“ªä¸ªæ¨¡å—å…ˆè¢«ä¸‹è½½ã€æ‰§è¡Œå¹¶ä¸ç¡®å®šï¼Œä½†å¯ä»¥è‚¯å®šçš„æ˜¯ä¸»å›è°ƒä¸€å®šåœ¨æ‰€æœ‰ä¾èµ–éƒ½è¢«åŠ è½½å®Œæˆåæ‰æ‰§è¡Œã€‚ Require.js çš„è¿™ç§å†™æ³•ä¹Ÿè¢«ç§°ä¸ºå‰ç½®åŠ è½½ï¼Œåœ¨å†™ä¸»é€»è¾‘ä¹‹å‰å¿…é¡»æŒ‡å®šæ‰€æœ‰çš„ä¾èµ–ï¼ŒåŒæ—¶è¿™äº›ä¾èµ–ä¹Ÿä¼šç«‹åˆ»è¢«å¼‚æ­¥åŠ è½½ã€‚ ç”± Require.js å¼•ç”³å‡ºæ¥çš„è§„èŒƒè¢«ç§°ä¸º AMD(Asynchronous Module Definition)ã€‚ CMD å¦ä¸€ç§ä¼˜ç§€çš„æ¨¡å—ç®¡ç†å·¥å…·æ˜¯ Sea.jsï¼Œå®ƒçš„å†™æ³•æ˜¯: 12345678define(function(require, exports, module) {var foo = require('foo'); // åŒæ­¥foo.add(1, 2);...require.async('math', function(math) { // å¼‚æ­¥math.add(1, 2);});}); Sea.js ä¹Ÿè¢«ç§°ä¸ºå°±è¿‘åŠ è½½ï¼Œä»å®ƒçš„å†™æ³•ä¸Šå¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹åˆ°å’Œ Require.js çš„ä¸åŒã€‚æˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦ç”¨åˆ°ä¾èµ–çš„æ—¶å€™æ‰ç”³æ˜ã€‚ Sea.js é‡åˆ°ä¾èµ–ååªä¼šå»ä¸‹è½½ JS æ–‡ä»¶ï¼Œå¹¶ä¸ä¼šæ‰§è¡Œï¼Œè€Œæ˜¯ç­‰åˆ°æ‰€æœ‰è¢«ä¾èµ–çš„ JS è„šæœ¬éƒ½ä¸‹è½½å®Œä»¥åï¼Œæ‰ä»å¤´å¼€å§‹æ‰§è¡Œä¸»é€»è¾‘ã€‚å› æ­¤è¢«ä¾èµ–æ¨¡å—çš„æ‰§è¡Œé¡ºåºå’Œä¹¦å†™é¡ºåºå®Œå…¨ä¸€è‡´ã€‚ ç”± Sea.js å¼•ç”³å‡ºæ¥çš„è§„èŒƒè¢«ç§°ä¸º CMD(Common Module Definition)ã€‚ ES6 æ¨¡å—åŒ– åœ¨ ES6 ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ export å…³é”®å­—æ¥å¯¼å‡ºæ¨¡å—ï¼Œä½¿ç”¨ import å…³é”®å­—å¼•ç”¨æ¨¡å—ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒES 6 çš„è¿™å¥—æ ‡å‡†å’Œç›®å‰çš„æ ‡å‡†æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œç›®å‰ä¹Ÿå¾ˆå°‘æœ‰ JS å¼•æ“èƒ½ç›´æ¥æ”¯æŒã€‚å› æ­¤ Babel çš„åšæ³•å®é™…ä¸Šæ˜¯å°†ä¸è¢«æ”¯æŒçš„ import ç¿»è¯‘æˆç›®å‰å·²è¢«æ”¯æŒçš„ requireã€‚ å°½ç®¡ç›®å‰ä½¿ç”¨ import å’Œ require çš„åŒºåˆ«ä¸å¤§(æœ¬è´¨ä¸Šæ˜¯ä¸€å›äº‹)ï¼Œä½†ä¾ç„¶å¼ºçƒˆæ¨èä½¿ç”¨ import å…³é”®å­—ï¼Œå› ä¸ºä¸€æ—¦ JS å¼•æ“èƒ½å¤Ÿè§£æ ES 6 çš„ import å…³é”®å­—ï¼Œæ•´ä¸ªå®ç°æ–¹å¼å°±ä¼šå’Œç›®å‰å‘ç”Ÿæ¯”è¾ƒå¤§çš„å˜åŒ–ã€‚å¦‚æœç›®å‰å°±å¼€å§‹ä½¿ç”¨ import å…³é”®å­—ï¼Œå°†æ¥ä»£ç çš„æ”¹åŠ¨ä¼šéå¸¸å°ã€‚","link":"/2017/03/22/%E6%A8%A1%E5%9D%97%E5%8C%96%E7%AE%80%E6%9E%90/"},{"title":"æ¢³ç†cssä¸­displayçš„å†™æ³•","text":"ä»å¤§çš„åˆ†ç±»æ¥è®²ï¼Œ displayçš„å†™æ³•å¯ä»¥åˆ†ä¸º 6ä¸ªå¤§ç±»ï¼Œå†åŠ ä¸Š 1ä¸ªå…¨å±€ç±»ï¼Œä¸€å…±æ˜¯ 7å¤§ç±»ï¼š å¤–éƒ¨å€¼ å†…éƒ¨å€¼ åˆ—è¡¨å€¼ å±æ€§å€¼ æ˜¾ç¤ºå€¼ æ··åˆå€¼ å…¨å±€å€¼ å¤–éƒ¨å€¼æ‰€è°“å¤–éƒ¨å€¼ï¼Œå°±æ˜¯è¯´è¿™äº›å€¼åªä¼šç›´æ¥å½±å“ä¸€ä¸ªå…ƒç´ çš„å¤–éƒ¨è¡¨ç°ï¼Œè€Œä¸å½±å“å…ƒç´ é‡Œé¢çš„å„¿å­çº§å­™å­çº§å…ƒç´ çš„è¡¨ç°ã€‚ display: block;æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ ç¼ºçœå°±æ˜¯è¿™ä¸ªå€¼ï¼Œæœ€åŸºæœ¬çš„å—çº§å…ƒç´ ï¼Œå±äº csså…¥é—¨åˆå­¦è€…éƒ½çŸ¥é“çš„æ¦‚å¿µï¼Œåªè¦æ˜¯å®¹å™¨ç±»å‹çš„å…ƒç´ åŸºæœ¬éƒ½æ˜¯è¿™ä¸ªå€¼ã€‚ display: inline;è¡Œå†…å…ƒç´ ï¼Œåªè¦æ˜¯ä¸ªè¡Œå†…å…ƒç´ éƒ½æ˜¯è¿™ä¸ªå€¼ã€‚ display: run-in;è¿™ä¸ªå€¼æœ‰ç‚¹å¥‡æ€ªï¼Œé€šå¸¸æ²¡äººç”¨å®ƒï¼Œä½†ä½ å¯ä»¥çŸ¥é“å®ƒã€‚å› ä¸ºé™¤äº† IEå’Œ Operaæ”¯æŒå®ƒä»¥å¤–ï¼Œå…¶ä»–æ‰€æœ‰ä¸»æµæµè§ˆå™¨åŒ…æ‹¬ Chrome, Safari, Firefoxå…¨éƒ½å¯¹å®ƒç½®è‹¥ç½”é—»ã€‚è¿™ä¸œè¥¿è¯´ç™½äº†ä¹Ÿæ²¡ä»€ä¹ˆç¥ç§˜ï¼Œå®ƒçš„æ„æ€å°±æ˜¯è¯´å¦‚æœæˆ‘ä»¬å‘½ä»¤ä¸€ä¸ªå…ƒç´  run-inï¼Œä¸­æ–‡æ„æ€å°±æ˜¯ã€ é—¯å…¥ã€ï¼é‚£ä¹ˆè¿™ä¸ªå…ƒç´ å°±ç›´æ¥é—¯å…¥ä¸‹ä¸€è¡Œã€‚ å†™èµ·æ¥å¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼š 123456&lt;div class=&quot;a&quot;&gt;aaa&lt;/div&gt;&lt;div class=&quot;b&quot;&gt;bbb&lt;/div&gt;.a { font-size: 36px; display: run-in;} å†…éƒ¨å€¼å†…éƒ¨å€¼ä¸»è¦æ˜¯ç”¨æ¥ç®¡æŸè‡ªå·±ä¸‹å±çš„å„¿å­çº§å…ƒç´ çš„æ’å¸ƒçš„ï¼Œè§„å®šå®ƒä»¬æˆ–è€…æ’æˆ Så½¢ï¼Œæˆ–è€…æ’æˆ Bå½¢è¿™æ ·çš„ã€‚ display: flow;å«ä¹‰ä¸æ¸…ï¼Œå®éªŒå®¤é˜¶æ®µäº§å“ï¼Œ Chromeä¸æ”¯æŒã€‚å¦‚æœè¿˜ä¸å¤Ÿè¯´æœä½ æš‚æ—¶ä¸è¦ç¢°å®ƒçš„è¯ï¼Œè¯•ç€ç†è§£ä»¥ä¸‹è‹±æ–‡åŸæ–‡ï¼š If its outer display type is inline or run-in, and it is participating in a block or inline formatting context, then it generates an inline box. Otherwise it generates a block container box. display: flow-root;ä¸åŒäºåˆšæ‰è°ˆåˆ°çš„ flowï¼Œç°åœ¨ç”¨ flow-rootçš„æ¸æ¸å¤šèµ·æ¥äº†ï¼Œå› ä¸ºå®ƒå¯ä»¥æ’‘èµ·è¢«ä½  floatæ‰çš„å—çº§å…ƒç´ çš„é«˜åº¦ã€‚ display: table;è¿™ä¸€ä¸ªå±æ€§ï¼Œä»¥åŠä¸‹é¢çš„å¦å¤– 8ä¸ªä¸ tableç›¸å…³çš„å±æ€§ï¼Œéƒ½æ˜¯ç”¨æ¥æ§åˆ¶å¦‚ä½•æŠŠ divæ˜¾ç¤ºæˆ tableæ ·å¼çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å–œæ¬¢ è¿™ä¸ªæ ‡ç­¾å˜›ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³æŠŠæ‰€æœ‰çš„ æ ‡ç­¾éƒ½æ¢æˆ æ ‡ç­¾ã€‚ display: flex;display:flex;ä»¥åŠä¸å®ƒç›¸å…³è”çš„ä¸€ç³»åˆ—å±æ€§ï¼š flex-direction, flex-wrap, flex-flow, justify-content, align-items, align-contentï¼Œå¹¶ä¸”åŒ…æ‹¬æ‰€æœ‰è¿™äº›å±æ€§çš„å–å€¼ï¼Œéƒ½æ˜¯ä½ éœ€è¦åå¤ç ”ç£¨çš„ã€‚ 2009å¹´è¯ç”Ÿçš„è¿™ä¸ªå±æ€§å¯ä»¥è¯´æ˜¯ä¸äºšäº cssç•Œä¸€åœºè’¸æ±½æœºè¯ç”Ÿä¸€æ ·çš„å·¥ä¸šé©å‘½ï¼Œå®ƒçš„è¯ç”Ÿæ ‡å¿—ç€é©¬è½¦ä¸€æ ·çš„ floatè¢«å½»åº•æŠ›è¿›å†å²çš„åƒåœ¾å †ã€‚ display: grid gridå¸ƒå±€ï¼Œä¸­æ–‡ç¿»è¯‘ä¸º ç½‘æ ¼å¸ƒå±€ã€‚å­¦ä¹  gridå¸ƒå±€æœ‰ä¸¤ä¸ªé‡ç‚¹ï¼šä¸€ä¸ªé‡ç‚¹æ˜¯ gridå¸ƒå±€å¼•å…¥äº†ä¸€ä¸ªå…¨æ–°çš„å•ä½ï¼š frï¼Œå®ƒæ˜¯ fractionï¼ˆ åˆ†æ•°ï¼‰çš„ç¼©å†™ï¼Œæ‰€ä»¥ä»æ­¤ä»¥åï¼Œä½ çš„å…µå™¨åº“é‡Œé™¤äº† px, em, rem, ç™¾åˆ†æ¯”è¿™äº›å¸¸è§å…µå™¨ä»¥åŠ vw, vhè¿™äº›æ–°å¼æ­¦å™¨ä¹‹å¤–ï¼Œåˆå¤šäº†ä¸€æ ·æ—é—¨æš—å™¨ frï¼Œè¦æƒ³ç”¨å¥½ gridï¼Œå¿…é¡»å……åˆ†æŒæ¡ frã€‚å¦ä¸€ä¸ªé‡ç‚¹æ˜¯ æ–œæ æ“ä½œç¬¦ï¼Œè¿™å¯ä¸æ˜¯ åˆ†æ•°å“¦ã€‚å®ƒè¡¨ç¤ºçš„æ˜¯ èµ·å§‹ä½ç½®å’Œ ç»“æŸä½ç½®ã€‚æ¯”å¦‚è¯´ 3/4ï¼Œè¿™å¯ä¸æ˜¯ å››åˆ†ä¹‹ä¸‰çš„æ„æ€ï¼Œè¿™æ˜¯æŒ‡ä¸€ä¸ªå…ƒç´ ä»ç¬¬ 3è¡Œå¼€å§‹ï¼Œåˆ°ç¬¬ 4è¡Œç»“æŸï¼Œä½†åˆä¸åŒ…æ‹¬ç¬¬ 4è¡Œã€‚ display: ruby;rubyè¿™ä¸ªå–å€¼å¯¹äºæˆ‘ä»¬äºšæ´²äººæ¥è¯´å…¶å®æ˜¯éå¸¸æœ‰ç”¨çš„ä¸€ä¸ªä¸œè¥¿ï¼Œä½†æ˜¯ç›®å‰é™¤äº† Firefoxä»¥å¤–å…¶å®ƒæµè§ˆå™¨å¯¹å®ƒçš„æ”¯æŒéƒ½ä¸å¤ªå¥½ã€‚ç®€è€Œè¨€ä¹‹ï¼Œ display:ruby;çš„ä½œç”¨å°±æ˜¯å¯ä»¥åšå‡ºä¸‹é¢è¿™æ ·çš„ä¸œè¥¿ï¼š display: subgrid;subgridæ€»çš„æ€æƒ³æ˜¯è¯´å¤§ç½‘æ ¼é‡Œè¿˜å¯ä»¥å¥—å°ç½‘æ ¼ï¼Œäº’ç›¸ä¸å½±å“ã€‚ åˆ—è¡¨å€¼display: list-item;display:list-item;å’Œ display:table;ä¸€æ ·ã€‚ç”¨ ul lièƒ½å®ç°çš„æ•ˆæœï¼Œä»–å¯ä»¥ç”¨ divå®ç°å‡ºæ¥ï¼Œå°±æ˜¯è¿™ä¸ªä½œç”¨ã€‚ å±æ€§å€¼å±æ€§å€¼ä¸€èˆ¬æ˜¯é™„å±äºä¸»å€¼çš„ï¼Œæ¯”å¦‚ä¸»å€¼é‡Œè®¾ç½®äº† display:table;ï¼Œå°±å¯ä»¥åœ¨å­å…ƒç´ é‡Œä½¿ç”¨ display:table-row-group;ç­‰ç­‰å±æ€§ï¼Œä¸è¿‡å¹¶ä¸ç»å¯¹ã€‚å…³äºå®ƒä»¬çš„ä½œç”¨ï¼Œä¸»è¦å‚è€ƒä¸»å€¼å°±å¤Ÿäº†ã€‚ display: table-row-group;è¯¦æƒ…å‚è€ƒdisplay: tabl;ã€‚ display: table-header-group;è¯¦æƒ…å‚è€ƒdisplay: tableã€‚ display: table-footer-group;è¯¦æƒ…å‚è€ƒdisplay: tableã€‚ display: table-row;è¯¦æƒ…å‚è€ƒdisplay: tableã€‚ display: table-cell;è¯¦æƒ…å‚è€ƒdisplay: table;è¿™ä¸ªå±æ€§æœ‰å¿…è¦è¯¦ç»†è¯´è¯´ï¼Œå› ä¸ºå®ƒå®Œå…¨å¯ä»¥å•ç‹¬åº”ç”¨ï¼Œç”¨åœ¨é«˜åº¦ä¸å›ºå®šå…ƒç´ çš„å‚ç›´å±…ä¸­ä¸Šã€‚ display: table-column-group;è¯¦æƒ…å‚è€ƒdisplay: tableã€‚ display: table-column;è¯¦æƒ…å‚è€ƒdisplay: tableã€‚ display: table-caption;è¯¦æƒ…å‚è€ƒdisplay: tableã€‚ display: ruby-base;è¯¦æƒ…å‚è€ƒdisplay: rubyã€‚ display: ruby-text;è¯¦æƒ…å‚è€ƒdisplay: rubyã€‚ display: ruby-base-container;è¯¦æƒ…å‚è€ƒdisplay: rubyã€‚ display: ruby-text-container;è¯¦æƒ…å‚è€ƒdisplay: rubyã€‚ æ˜¾ç¤ºå€¼MDNé‡ŒæŠŠå®ƒå«åšã€Š display-box ã€‹ valuesï¼ˆ ç›’å­å€¼ï¼‰ï¼Œæˆ‘æŠŠå®ƒå«åš æ˜¾ç¤ºå€¼ï¼Œä¸»è¦æ˜¯ä¸ºäº†ä¾¿äºç†è§£ã€‚ display: contents;display:contentsçš„ä½œç”¨ï¼šå®ƒè®©å­å…ƒç´ æ‹¥æœ‰å’Œçˆ¶å…ƒç´ ä¸€æ ·çš„å¸ƒå±€æ–¹å¼ï¼Œä»…æ­¤è€Œå·²ã€‚ display: none;æ··åˆå€¼display: inline-block;display: inline-table;display: inline-flex;å…¨å±€å€¼è¿™äº›å€¼ä¸æ˜¯ displayå±æ€§çš„ä¸“åˆ©ï¼Œå‡ ä¹å…¶å®ƒä»»æ„å±æ€§éƒ½å¯ä»¥ç”¨ï¼Œåˆ—åœ¨è¿™é‡Œå‡‘ä¸ªæ•°ã€‚ display: inherit;ç»§æ‰¿çˆ¶å…ƒç´ çš„ displayå±æ€§ã€‚ display: initial;ä¸ç®¡çˆ¶å…ƒç´ æ€ä¹ˆè®¾å®šï¼Œæ¢å¤åˆ°æµè§ˆå™¨æœ€åˆå§‹æ—¶çš„ displayå±æ€§ã€‚ display: unset;unsetæ··åˆäº† inheritå’Œ initialã€‚å¦‚æœçˆ¶å…ƒç´ è®¾å€¼äº†ï¼Œå°±ç”¨çˆ¶å…ƒç´ çš„è®¾å®šï¼Œå¦‚æœçˆ¶å…ƒç´ æ²¡è®¾å€¼ï¼Œå°±ç”¨æµè§ˆå™¨çš„ç¼ºçœè®¾å®šã€‚","link":"/2018/03/26/%E6%A2%B3%E7%90%86css%E4%B8%ADdisplay%E7%9A%84%E5%86%99%E6%B3%95/"},{"title":"æ¢ç´¢å¾®å‰ç«¯æ¶æ„ï¼šå¤šç§å®ç°æ–¹å¼ä¸å®è·µæ€è€ƒ","text":"åœ¨å½“ä»Šçš„å‰ç«¯å¼€å‘é¢†åŸŸï¼Œå¾®å‰ç«¯æ¶æ„æ­£é€æ¸æˆä¸ºçƒ­é—¨è¯é¢˜ã€‚å®ƒå€Ÿé‰´äº†å¾®æœåŠ¡çš„ç†å¿µï¼Œå°†åŸæœ¬åºå¤§çš„å•ä½“å‰ç«¯åº”ç”¨æ‹†è§£ä¸ºå¤šä¸ªå°å‹å‰ç«¯åº”ç”¨ï¼Œå¹¶èƒ½è®©å®ƒä»¬ååŒå·¥ä½œï¼Œå°±å¦‚åŒä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ä¸€æ ·ã€‚ä»Šå¤©ï¼Œå’±ä»¬å°±ä¸€èµ·æ¥æ·±å…¥æ¢è®¨å¾®å‰ç«¯æ¶æ„çš„å‡ ç§å¸¸è§å®ç°æ–¹å¼ä»¥åŠåœ¨å®é™…åº”ç”¨ä¸­éœ€è¦è€ƒè™‘çš„æ–¹æ–¹é¢é¢ã€‚ ä¸€ã€å¾®å‰ç«¯æ¶æ„æ¦‚è¿°å¾®å‰ç«¯æ¶æ„çš„æ ¸å¿ƒæ€æƒ³ï¼Œå°±æ˜¯æŠŠ Web åº”ç”¨ä»å•ä¸€çš„å•ä½“åº”ç”¨è½¬å˜æˆå¤šä¸ªå°å‹å‰ç«¯åº”ç”¨èšåˆè€Œæˆçš„å½¢æ€ã€‚è¿™äº›å°å‹å‰ç«¯åº”ç”¨å…·å¤‡ç‹¬ç«‹è¿è¡Œã€ç‹¬ç«‹å¼€å‘ä»¥åŠç‹¬ç«‹éƒ¨ç½²çš„èƒ½åŠ›ï¼Œè€Œä¸”è¿˜èƒ½å…±äº«ç»„ä»¶ï¼Œå®ç°å¹¶è¡Œå¼€å‘ã€‚è¿™é‡Œæ‰€è¯´çš„å‰ç«¯åº”ç”¨æ˜¯åŸºäºå‰åç«¯åˆ†ç¦»çš„å•åº”ç”¨é¡µé¢ï¼Œè¿™æ˜¯è°ˆè®ºå¾®å‰ç«¯çš„åŸºç¡€å‰æã€‚ äºŒã€å¾®å‰ç«¯çš„å‡ ç§å®ç°æ–¹å¼ï¼ˆä¸€ï¼‰è·¯ç”±åˆ†å‘å¼å¾®å‰ç«¯é€šè¿‡è·¯ç”±å°†ä¸åŒçš„ä¸šåŠ¡åˆ†å‘åˆ°ä¸åŒçš„ã€ç‹¬ç«‹å‰ç«¯åº”ç”¨ä¸Šï¼Œè¿™å°±æ˜¯è·¯ç”±åˆ†å‘å¼å¾®å‰ç«¯ã€‚å®ç°å®ƒé€šå¸¸å¯ä»¥å€ŸåŠ© HTTP æœåŠ¡å™¨çš„åå‘ä»£ç†ï¼Œæˆ–è€…åˆ©ç”¨åº”ç”¨æ¡†æ¶è‡ªå¸¦çš„è·¯ç”±åŠŸèƒ½ã€‚ç›®å‰æ¥çœ‹ï¼Œè¿™ç§æ–¹å¼æ˜¯é‡‡ç”¨æœ€å¤šã€æœ€å®¹æ˜“ä¸Šæ‰‹çš„ â€œå¾®å‰ç«¯â€ æ–¹æ¡ˆã€‚ ä½†å®ƒä¹Ÿæœ‰ä¸ªå°ç¼ºç‚¹ï¼Œé‚£å°±æ˜¯çœ‹èµ·æ¥æ›´åƒæ˜¯æŠŠå¤šä¸ªå‰ç«¯åº”ç”¨ç®€å•æ‹¼å‡‘åœ¨ä¸€èµ·ï¼Œæ¯æ¬¡ç”¨æˆ·ä» A åº”ç”¨åˆ‡æ¢åˆ° B åº”ç”¨çš„æ—¶å€™ï¼Œå¾€å¾€éœ€è¦åˆ·æ–°ä¸€ä¸‹é¡µé¢ï¼Œç”¨æˆ·ä½“éªŒä¸Šç¨æ‰“æŠ˜æ‰£ã€‚ ç»™å¤§å®¶ä¸¾ä¸ªå®é™…é¡¹ç›®é‡Œçš„ä¾‹å­å§ï¼Œä¹‹å‰åœ¨è¿›è¡Œé—ç•™ç³»ç»Ÿé‡å†™çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åˆ¶å®šäº†è¿™æ ·çš„è¿ç§»è®¡åˆ’ï¼š 1.å…ˆç”¨é™æ€ç½‘ç«™ç”ŸæˆåŠ¨æ€ç”Ÿæˆé¦–é¡µã€‚ 2.æ¥ç€ä½¿ç”¨ React æŠ€æœ¯æ ˆé‡æ„è¯¦æƒ…é¡µã€‚ 3.æœ€åæ›¿æ¢æœç´¢ç»“æœé¡µã€‚ æ•´ä¸ªç³»ç»Ÿä¸æ˜¯ä¸€æ¬¡æ€§è¿ç§»å®Œæˆçš„ï¼Œæ¯å®Œæˆä¸€ä¸ªæ­¥éª¤å°±å¾—ä¸Šçº¿ç›¸åº”åŠŸèƒ½ï¼Œè¿™æ—¶å°±ç”¨åˆ°äº† Nginx æ¥è¿›è¡Œè·¯ç”±åˆ†å‘å•¦ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªåŸºäºè·¯ç”±åˆ†å‘çš„ Nginx é…ç½®ç¤ºä¾‹ä»£ç å“¦ï¼š 123456789101112131415161718http { server { listen 80; server_name www.phodal.com; location /api/ { proxy\\_pass http://http://172.31.25.15:8000/api; } location /web/admin { proxy_pass http://172.31.25.29/web/admin; } location /web/notifications { proxy_pass http://172.31.25.27/web/notifications; } location / { proxy_pass /; } }} åœ¨è¿™ä¸ªé…ç½®é‡Œï¼Œä¸åŒé¡µé¢çš„è¯·æ±‚å°±è¢«ç²¾å‡†åœ°åˆ†å‘åˆ°äº†ä¸åŒçš„æœåŠ¡å™¨ä¸Šå‘¢ã€‚ è¿™ç§è·¯ç”±åˆ†å‘å¼å¾®å‰ç«¯é€‚ç”¨äºä»¥ä¸‹å‡ ç§åœºæ™¯ï¼š ä¸åŒæŠ€æœ¯æ ˆä¹‹é—´å·®å¼‚æ¯”è¾ƒå¤§ï¼Œéš¾ä»¥å…¼å®¹ã€è¿ç§»ã€æ”¹é€ çš„æ—¶å€™ã€‚ é¡¹ç›®ä¸æƒ³èŠ±è´¹å¤§é‡æ—¶é—´åœ¨ç³»ç»Ÿæ”¹é€ ä¸Šã€‚ ç°æœ‰çš„ç³»ç»Ÿåœ¨æœªæ¥å°†ä¼šè¢«å–ä»£ã€‚ ç³»ç»ŸåŠŸèƒ½å·²ç»å¾ˆå®Œå–„ï¼ŒåŸºæœ¬ä¸ä¼šæœ‰æ–°éœ€æ±‚ã€‚ è¦æ˜¯æƒ³åœ¨è¿™ç§æƒ…å†µä¸‹æå‡ç”¨æˆ·ä½“éªŒï¼Œè¿˜å¯ä»¥è€ƒè™‘ç»“åˆ iframe çš„æ–¹å¼æ¥è§£å†³ã€‚ ï¼ˆäºŒï¼‰ä½¿ç”¨ iFrame åˆ›å»ºå®¹å™¨iFrame è™½ç„¶æ˜¯ä¸ªå¾ˆå¤è€ã€çœ‹ä¼¼æ™®é€šçš„æŠ€æœ¯ï¼Œä½†å®ƒä¸€ç›´éƒ½æŒºç®¡ç”¨çš„ã€‚&lt;iframe&gt;å…ƒç´ å¯ä»¥å°†å¦ä¸€ä¸ª HTML é¡µé¢åµŒå…¥åˆ°å½“å‰é¡µé¢ä¸­ï¼Œç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„ç‹¬ç«‹å®¿ä¸»ç¯å¢ƒï¼Œèƒ½è®©å‰ç«¯åº”ç”¨ä¹‹é—´ç›¸äº’ç‹¬ç«‹è¿è¡Œã€‚ ä¸è¿‡é‡‡ç”¨ iframe ä¹Ÿæ˜¯æœ‰å‰ææ¡ä»¶çš„ï¼Œè¦æ˜¯ç½‘ç«™ä¸éœ€è¦ SEO æ”¯æŒï¼Œå¹¶ä¸”æ‹¥æœ‰ç›¸åº”çš„åº”ç”¨ç®¡ç†æœºåˆ¶ï¼Œé‚£å®ƒå°±æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚æ¯”å¦‚è¯´åœ¨åšåº”ç”¨å¹³å°ï¼Œéœ€è¦é›†æˆç¬¬ä¸‰æ–¹ç³»ç»Ÿæˆ–è€…å¤šä¸ªä¸åŒéƒ¨é—¨å›¢é˜Ÿä¸‹çš„ç³»ç»Ÿæ—¶ï¼Œå°±å¾ˆé€‚ç”¨ã€‚ ä½†ä½¿ç”¨ iframe ä¹Ÿä¸æ˜¯å…‰æŠŠå®ƒåµŒå…¥å°±å®Œäº‹ï¼Œè¿˜å¾—è®¾è®¡ç®¡ç†åº”ç”¨æœºåˆ¶ã€åº”ç”¨é€šè®¯æœºåˆ¶ä»¥åŠåŠ è½½æœºåˆ¶ã€‚æ¯”å¦‚è¯´é€šè®¯æœºåˆ¶ï¼Œç›´æ¥åœ¨æ¯ä¸ªåº”ç”¨é‡Œåˆ›å»º postMessage äº‹ä»¶å¹¶ç›‘å¬ä¸å¤ªå‹å¥½ï¼Œå› ä¸ºå¯¹åº”ç”¨çš„ä¾µå…¥æ€§å¤ªå¼ºï¼Œæ›´å¥½çš„åšæ³•æ˜¯é€šè¿‡ iframeEl.contentWindow å»è·å– iFrame å…ƒç´ çš„ Window å¯¹è±¡ã€‚å®šä¹‰ä¸€å¥—é€šè®¯è§„èŒƒï¼Œå¦‚äº‹ä»¶åé‡‡ç”¨ä»€ä¹ˆæ ¼å¼ã€ä»€ä¹ˆæ—¶å€™å¼€å§‹ç›‘å¬äº‹ä»¶ç­‰ç­‰ã€‚ ï¼ˆä¸‰ï¼‰è‡ªåˆ¶æ¡†æ¶å…¼å®¹åº”ç”¨ç°æœ‰çš„å‰ç«¯æ¡†æ¶ä¸ç®¡æ˜¯åŸºäº Web Components çš„ Angularï¼Œè¿˜æ˜¯åŸºäº VirtualDOM çš„ React ç­‰ï¼Œéƒ½ç¦»ä¸å¼€åŸºæœ¬çš„ HTML å…ƒç´  DOMã€‚é‚£å°±æ˜¯åœ¨é¡µé¢åˆé€‚çš„åœ°æ–¹å¼•å…¥æˆ–è€…åˆ›å»º DOMï¼Œç„¶ååœ¨ç”¨æˆ·æ“ä½œæ—¶ï¼ŒåŠ è½½å¯¹åº”çš„åº”ç”¨ï¼ˆè§¦å‘åº”ç”¨çš„å¯åŠ¨ï¼‰ï¼Œå¹¶ä¸”èƒ½å¸è½½åº”ç”¨ã€‚ åœ¨å‰ç«¯å¼€å‘é¢†åŸŸï¼ŒDOM æ“ä½œçš„å¤æ‚æ€§ä¸å®¹å°è§‘ã€‚åˆ›å»º DOM æˆ–è®¸ç›¸å¯¹æ˜“äºå¤„ç†ï¼Œç„¶è€Œç§»é™¤ DOM åŠå…¶ç›¸å…³åº”ç”¨çš„ç›‘å¬äº‹ä»¶å´é¢‡å…·æŒ‘æˆ˜æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¶‰åŠå¤šç§æŠ€æœ¯æ ˆçš„æƒ…å†µä¸‹ï¼Œå¾€å¾€éœ€è¦ç²¾å¿ƒè®¾è®¡ä¸€å¥—ä¸“ç”¨é€»è¾‘ã€‚ä¾‹å¦‚ Single-SPAï¼Œå°½ç®¡å®ƒèƒ½å¤Ÿå¤„ç†åŒ…æ‹¬ Reactã€Angularã€Vue ç­‰å¤šæ•°æ¡†æ¶çš„å¯åŠ¨ä¸å¸è½½æµç¨‹ï¼Œä½†å°±ç”Ÿäº§ç¯å¢ƒè€Œè¨€ï¼Œå…¶ä»å­˜åœ¨å±€é™æ€§ã€‚æ­¤å‰ï¼Œåœ¨ä¾æ‰˜ Single-SPA å¹¶é’ˆå¯¹ Vue æ¡†æ¶å¼€å±•å¾®å‰ç«¯æ¶æ„åº”ç”¨æ­å»ºçš„å®è·µè¿›ç¨‹ä¸­ï¼Œå†ç»å…¨é¢ç»¼åˆçš„è€ƒé‡ä¸æƒè¡¡ï¼Œæˆ‘æœ€ç»ˆé€‰å®šäº†ä¸€æ¬¾åœ¨ç½‘ä¸Šå¼€æºä¸”åä¸º Mooa çš„æ¡†æ¶ã€‚å€Ÿå…¶ä¹‹åŠ›ï¼Œå¾—ä»¥æ›´ç²¾å‡†åœ°å¥‘åˆé¡¹ç›®çš„ç‰¹å®šéœ€æ±‚ï¼Œä¸ºé¡¹ç›®çš„é¡ºåˆ©æ¨è¿›æä¾›äº†æœ‰åŠ›æ”¯æ’‘ä¸ä¿éšœã€‚ä»¥æ›´å¥½åœ°æ»¡è¶³é¡¹ç›®éœ€æ±‚ã€‚ è¿™ç§æ–¹å¼ä¸Šæ‰‹éš¾åº¦ç›¸å¯¹é«˜äº›ï¼Œä¸è¿‡åæœŸè®¢åˆ¶å’Œå¯ç»´æŠ¤æ€§æ¯”è¾ƒæ–¹ä¾¿ã€‚å½“ç„¶å®ƒä¹Ÿæœ‰é£é™©ï¼Œæ¯”å¦‚å¯èƒ½ä¼šé‡åˆ°ç¬¬ä¸‰æ–¹åº“ä¸å…¼å®¹çš„é—®é¢˜ï¼Œè€Œä¸”å¯¹äºæµé‡å¤§çš„ toC åº”ç”¨æ¥è¯´ï¼Œé¦–æ¬¡åŠ è½½æ—¶ä¼šå¤šå‡ºå¤§é‡è¯·æ±‚ã€‚ ï¼ˆå››ï¼‰ç»„åˆå¼é›†æˆï¼šå°†åº”ç”¨å¾®ä»¶åŒ–ç»„åˆå¼é›†æˆå°±æ˜¯é€šè¿‡è½¯ä»¶å·¥ç¨‹çš„æ–¹å¼ï¼Œåœ¨æ„å»ºå‰ã€æ„å»ºæ—¶ã€æ„å»ºåç­‰æ­¥éª¤ä¸­å¯¹åº”ç”¨è¿›ä¸€æ­¥æ‹†åˆ†ï¼Œç„¶åå†é‡æ–°ç»„åˆã€‚å®ƒå…¶å®æ»¡è¶³äº†å¾®å‰ç«¯çš„ç‹¬ç«‹è¿è¡Œã€ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²è¿™ä¸‰ä¸ªè¦ç´ ï¼Œå†é…åˆå‰ç«¯æ¡†æ¶çš„ç»„ä»¶ Lazyload åŠŸèƒ½ï¼ˆä¹Ÿå°±æ˜¯éœ€è¦çš„æ—¶å€™æ‰åŠ è½½å¯¹åº”çš„ä¸šåŠ¡ç»„ä»¶æˆ–åº”ç”¨ï¼‰ï¼Œçœ‹ä¸Šå»å°±å¦¥å¦¥çš„æ˜¯ä¸ªå¾®å‰ç«¯åº”ç”¨ã€‚ å¸¸è§çš„ç»„åˆå¼é›†æˆæ–¹å¼æœ‰è¿™ä¹ˆå‡ ç§ï¼š 1.ç‹¬ç«‹æ„å»ºç»„ä»¶å’Œåº”ç”¨ï¼Œç”Ÿæˆ chunk æ–‡ä»¶ï¼Œæ„å»ºåå†å½’ç±»ç”Ÿæˆçš„ chunk æ–‡ä»¶ã€‚ä¸è¿‡è¿™ç§æ–¹å¼æˆæœ¬ç›¸å¯¹é«˜äº›ï¼Œæœ‰ç‚¹ç±»ä¼¼å¾®æœåŠ¡çš„åšæ³•ã€‚ 2.å¼€å‘æ—¶ç‹¬ç«‹å¼€å‘ç»„ä»¶æˆ–åº”ç”¨ï¼Œé›†æˆæ—¶åˆå¹¶ç»„ä»¶å’Œåº”ç”¨ï¼Œæœ€åç”Ÿæˆå•ä½“çš„åº”ç”¨ã€‚ 3.åœ¨è¿è¡Œæ—¶ï¼ŒåŠ è½½åº”ç”¨çš„ Runtimeï¼ŒéšååŠ è½½å¯¹åº”çš„åº”ç”¨ä»£ç å’Œæ¨¡æ¿ã€‚ ä½†æ˜¯è¿™ç§æ–¹å¼ä¹Ÿæœ‰ä¸€äº›é™åˆ¶ï¼š å¿…é¡»ä½¿ç”¨åŒä¸€ä¸ªæ¡†æ¶ï¼Œä¸è¿‡å¯¹äºå¤šæ•°å›¢é˜Ÿæ¥è¯´ï¼Œè¿™å€’ä¸ç®—å•¥å¤§é—®é¢˜ã€‚ è§„èŒƒè¦æ±‚ç‰¹åˆ«ä¸¥æ ¼ï¼æ¯”å¦‚è¦ç»Ÿä¸€ä¾èµ–ï¼Œç»Ÿä¸€ä¾èµ–çš„ç‰ˆæœ¬ï¼Œå¼•å…¥æ–°ä¾èµ–æ—¶å¾—ä¸€ä¸ªä¸ªåŠ è¿›å»ï¼›è¿˜è¦è§„èŒƒåº”ç”¨çš„ç»„ä»¶åŠè·¯ç”±ï¼Œé¿å…ä¸åŒåº”ç”¨ä¹‹é—´å› ä¸ºç»„ä»¶åç§°å•¥çš„å‘ç”Ÿå†²çªï¼›æ„å»ºè¿‡ç¨‹ä¹Ÿå¯èƒ½ä¼šå¤æ‚äº›ï¼Œæœ‰çš„æ–¹æ¡ˆé‡Œè¦ä¿®æ”¹æ„å»ºç³»ç»Ÿï¼Œæœ‰çš„åˆ™éœ€è¦å¤æ‚çš„æ¶æ„è„šæœ¬ï¼›å¦å¤–å…±äº«é€šç”¨ä»£ç ä¹Ÿæ˜¯ä¸ªå¾—ç»å¸¸é¢å¯¹çš„é—®é¢˜ï¼Œè¿˜å¾—åˆ¶å®šä»£ç è§„èŒƒã€‚ ï¼ˆäº”ï¼‰çº¯ Web Components æŠ€æœ¯æ„å»ºWeb Components æ˜¯ä¸€å¥—å¾ˆç‰¹åˆ«çš„æŠ€æœ¯ï¼Œå®ƒå…è®¸åˆ›å»ºå¯é‡ç”¨çš„å®šåˆ¶å…ƒç´ ï¼ŒåŠŸèƒ½å°è£…åœ¨ä»£ç ä¹‹å¤–ï¼Œè¿˜èƒ½åœ¨ Web åº”ç”¨é‡Œä½¿ç”¨å®ƒä»¬ã€‚å®ƒä¸»è¦ç”± Custom elementsï¼ˆèƒ½åˆ›å»ºè‡ªå®šä¹‰å…ƒç´ ï¼‰ã€Shadow DOMï¼ˆå½±å­ DOMï¼Œå¯é™„åŠ åˆ°ä¸»æ–‡æ¡£ DOM ä¸­å¹¶æ§åˆ¶å…³è”åŠŸèƒ½ï¼Œä¸”ä¸èƒ½ç›´æ¥è¢«ä¸»æ–‡æ¡£ DOM æ§åˆ¶ï¼‰ã€HTML templatesï¼ˆç”¨äºç¼–å†™ä¸åœ¨é¡µé¢ä¸­æ˜¾ç¤ºçš„æ ‡è®°æ¨¡æ¿ï¼‰ä»¥åŠ HTML Importsï¼ˆç”¨äºå¼•å…¥è‡ªå®šä¹‰ç»„ä»¶ï¼‰è¿™å››é¡¹æŠ€æœ¯ç»„ä»¶æ„æˆã€‚ ä½¿ç”¨çš„æ—¶å€™ï¼Œæ¯ä¸ªç»„ä»¶å¯ä»¥é€šè¿‡ æ ‡ç­¾å¼•å…¥ï¼Œåƒè¿™æ ·ï¼š 12&lt;link rel=&quot;import&quot; href=&quot;components/di-li.html&quot;&gt;&lt;link rel=&quot;import&quot; href=&quot;components/d-header.html&quot;&gt; ç„¶ååœ¨å„è‡ªçš„ HTML æ–‡ä»¶é‡Œåˆ›å»ºç›¸åº”çš„ç»„ä»¶å…ƒç´ ï¼Œç¼–å†™ç»„ä»¶é€»è¾‘ã€‚ä¸è¿‡ï¼Œç”¨çº¯ Web Components æ„å»ºå‰ç«¯åº”ç”¨ä¹Ÿæœ‰éš¾åº¦ï¼š å¾—é‡å†™ç°æœ‰çš„å‰ç«¯åº”ç”¨ï¼ŒæŠŠæ•´ä¸ªç³»ç»ŸåŠŸèƒ½ç”¨ Web Components æ¥å®ç°ã€‚ ä¸Šä¸‹æ¸¸ç”Ÿæ€ç³»ç»Ÿä¸å®Œå–„ï¼Œç¼ºä¹ä¸€äº›ç¬¬ä¸‰æ–¹æ§ä»¶æ”¯æŒï¼Œä¸åƒ jQuery é‚£æ ·æœ‰å¾ˆå¤šç°æˆå¥½ç”¨çš„æ§ä»¶ã€‚ ç³»ç»Ÿæ¶æ„å¤æ‚ï¼Œåº”ç”¨æ‹†åˆ†æˆä¸€ä¸ªä¸ªç»„ä»¶åï¼Œç»„ä»¶é—´çš„é€šè®¯å°±æˆäº†ä¸€ä¸ªéº»çƒ¦äº‹ã€‚ è€Œä¸”ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½èƒ½å®Œå…¨æ”¯æŒ Web Components ï¼Œè¿™ä¹Ÿæ˜¯ä¸ªç¼ºé™·ã€‚ ï¼ˆå…­ï¼‰ç»“åˆ Web Components æ„å»ºWeb Components è™½ç„¶ç›®å‰ç¦»æˆ‘ä»¬æœ‰ç‚¹è·ç¦»ï¼Œä½†ç»“åˆå®ƒæ¥æ„å»ºå‰ç«¯åº”ç”¨å¯æ˜¯ä¸€ç§é¢å‘æœªæ¥æ¼”è¿›çš„æ¶æ„ï¼Œç°åœ¨å·²ç»æœ‰æ¡†æ¶åœ¨æ¢ç´¢è¿™ç§å¯èƒ½æ€§ã€‚ ç›®å‰æœ‰ä¸¤ç§ç»“åˆçš„æ–¹å¼ï¼š 1.ä½¿ç”¨ Web Components æ„å»ºç‹¬ç«‹äºæ¡†æ¶çš„ç»„ä»¶ï¼Œéšååœ¨å¯¹åº”çš„æ¡†æ¶ä¸­å¼•å…¥è¿™äº›ç»„ä»¶ã€‚è¿™æ˜¯ä¸€ç§ç»„ä»¶å¼çš„åšæ³•ã€‚ 2.åœ¨ Web Components ä¸­å¼•å…¥ç°æœ‰çš„æ¡†æ¶ï¼Œæœ‰ç‚¹ç±»ä¼¼äº iframe çš„å½¢å¼ï¼Œæ„Ÿè§‰å°±åƒæ˜¯æŠŠ â€œé—ç•™ç³»ç»Ÿâ€ å¾€æœªæ¥æ¶æ„ä¸Šè¿ç§»ã€‚ æ¯”å¦‚è¯´ Angular æ”¯æŒçš„ createCustomElement å°±èƒ½å®ç°ä¸€ä¸ª Web Components å½¢å¼çš„ç»„ä»¶ 123456platformBrowser() .bootstrapModuleFactory(MyPopupModuleNgFactory) .then(({injector}) =&gt; { const MyPopupElement = createCustomElement(MyPopup, {injector}); customElements.define(â€˜my-popupâ€™, MyPopupElement); }); è¿˜æœ‰åƒ Stencil è¿™ç§å½¢å¼ï¼Œå¯ä»¥å°†ç»„ä»¶ç›´æ¥æ„å»ºæˆ Web Components å½¢å¼çš„ç»„ä»¶ï¼Œç„¶ååœ¨ React æˆ–è€… Angular ç­‰æ¡†æ¶é‡Œç›´æ¥å¼•ç”¨ï¼Œä¸‹é¢æ˜¯åœ¨ React ä¸­å¼•ç”¨ Stencil ç”Ÿæˆçš„ Web Components çš„ç¤ºä¾‹ä»£ç ï¼š 12345678910import React from 'react';import ReactDOM from 'react-dom';import './index.css';import App from './App';import registerServiceWorker from './registerServiceWorker';import 'test-components/testcomponents';ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));registerServiceWorker(); ä¸è¿‡è¦æ³¨æ„ï¼Œåƒ Stencil ç›®å‰ä¹Ÿåªæ˜¯æ”¯æŒéƒ¨åˆ†è¾ƒæ–°çš„æµè§ˆå™¨ï¼Œæ¯”å¦‚ Chromeã€Safariã€Firefoxã€Edge å’Œ IE11 ç­‰ã€‚ ä¸‰ã€å¤åˆå‹æ–¹æ¡ˆåœ¨å¾®å‰ç«¯çš„æŠ€æœ¯é¢†åŸŸä¸­ï¼Œå„ç±»å®ç°æ–¹å¼å‡å‘ˆç°å‡ºå…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿ä¸ä¸è¶³ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬å®Œå…¨å…·å¤‡è¿™æ ·çš„çµæ´»æ€§ï¼šæŒ‘é€‰è‹¥å¹²é€‚å®œçš„æ–¹å¼åŠ ä»¥ç»„åˆè¿ç”¨ï¼Œè¿›è€Œå½¢æˆå¤åˆå‹æ–¹æ¡ˆã€‚ä¾æ®ä¸åŒé¡¹ç›®çš„ç‰¹å®šéœ€æ±‚ä»¥åŠå¤šæ ·åŒ–çš„åº”ç”¨åœºæ™¯ï¼Œå·§å¦™ä¸”çµæ´»åœ°å¯¹è¿™äº›æ–¹å¼è¿›è¡Œæ­é…æ•´åˆã€‚å¦‚æ­¤ä¸€æ¥ï¼Œä¾¿ææœ‰å¯èƒ½æ„å»ºå‡ºä¸å®é™…çŠ¶å†µå¥‘åˆåº¦æ›´é«˜ã€åŠŸèƒ½æ›´ä¸ºå¼ºåŠ²çš„å¾®å‰ç«¯æ¶æ„åº”ç”¨ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œå¾®å‰ç«¯æ¶æ„æ— ç–‘ä¸ºå‰ç«¯åº”ç”¨çš„å¼€å‘ä¸ç»´æŠ¤å·¥ä½œå¼€è¾Ÿäº†æ›´ä¸ºå¹¿é˜”çš„å¯èƒ½æ€§ç©ºé—´ï¼Œå¹¶æä¾›äº†æ–°é¢–çš„æ€è·¯ä¸æ–¹æ³•ã€‚ç„¶è€Œï¼Œæ— è®ºé‡‡ç”¨ä½•ç§æ–¹å¼ï¼Œå‡è¦æ±‚æˆ‘ä»¬åŸºäºå…·ä½“çš„å®é™…æƒ…å†µï¼Œæ·±å…¥ç»†è‡´åœ°æƒè¡¡å…¶ä¸­çš„åˆ©å¼Šå¾—å¤±ï¼Œä»¥å®¡æ…ä¸¥è°¨çš„æ€åº¦ä½œå‡ºæŠ‰æ‹©ã€‚","link":"/2025/01/05/%E6%8E%A2%E7%B4%A2%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%EF%BC%9A%E5%A4%9A%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%E4%B8%8E%E5%AE%9E%E8%B7%B5%E6%80%9D%E8%80%83/"},{"title":"æ­å»ºç»„ä»¶åº“æ–‡æ¡£","text":"å‰è¨€åœ¨æˆ‘ä»¬å¼€å‘å®Œä¸€ä¸ªç»„ä»¶åº“çš„æ—¶å€™ï¼Œéœ€è¦æœ‰ä¸€ä¸ªç»„ä»¶è¯´æ˜æ–‡æ¡£ï¼Œæ–‡æ¡£é¡µé¢æ˜¯æœ€ç›´æ¥çš„è·å–ä¿¡æ¯çš„çª—å£ã€‚è€Œæ–‡æ¡£é¡µä¸€èˆ¬åŒ…å«äº†è¿™äº›ä¿¡æ¯ï¼š ç»„ä»¶çš„æè¿° ç»„ä»¶ Demo ç¤ºä¾‹çš„å±•ç¤ºã€æè¿°å’Œæºç  ç»„ä»¶çš„å‚æ•°æ–‡æ¡£ ç»„ä»¶è¯´æ˜æ–‡æ¡£æ˜¯è®©å…¶ä»–äººäº†è§£ç»„ä»¶åº“çš„å…³é”®ç¯èŠ‚ï¼ŒåŒ…æ‹¬ç»„ä»¶åº“çš„é€‚ç”¨èŒƒå›´ï¼ˆpcç«¯ï¼Œç§»åŠ¨ç«¯ï¼Œè½»é‡çº§è¿˜æ˜¯é‡é‡çº§ï¼‰ï¼Œå…¼å®¹æµè§ˆå™¨çš„ç‰ˆæœ¬ï¼Œè®¾è®¡åŸåˆ™å’ŒèƒŒæ™¯ï¼Œä»¥åŠç¤¾åŒºç”Ÿæ€ï¼Œä½¿ç”¨æ–¹æ³•ç­‰ã€‚ å…³äºå¦‚ä½•å¼€å‘ç»„ä»¶åº“ï¼Œå¯çœ‹è¿™ç¯‡ï¼š heaven-ui æ–‡æ¡£ç”Ÿæˆè¿™é‡Œæ¨è vuepress ï¼Œå¯ä»¥å¿«é€Ÿå¸®æˆ‘ä»¬å®Œæˆç»„ä»¶åº“æ–‡æ¡£çš„å»ºè®¾ã€‚(https://vuepress.vuejs.org/zh/guide/) vuepressæ˜¯ä¸€ä¸ªæ–‡æ¡£ç”Ÿæˆå·¥å…·ï¼Œé»˜è®¤çš„æ ·å¼å’Œvueå®˜æ–¹æ–‡æ¡£å‡ ä¹æ˜¯ä¸€è‡´çš„ï¼Œå› ä¸ºåˆ›é€ å®ƒçš„åˆè¡·å°±æ˜¯æƒ³ä¸ºvueå’Œç›¸å…³çš„å­é¡¹ç›®æä¾›æ–‡æ¡£æ”¯æŒã€‚å®ƒå†…ç½®äº† Markdownçš„æ‰©å±•ï¼Œå†™æ–‡æ¡£çš„æ—¶å€™å°±æ˜¯ç”¨ markdownæ¥å†™ï¼Œæœ€è®©äººçœå¿ƒçš„æ˜¯ä½ å¯ä»¥ç›´æ¥åœ¨ Markdown æ–‡ä»¶ä¸­ä½¿ç”¨Vueç»„ä»¶ï¼Œæ„å‘³ç€æˆ‘ä»¬çš„ç»„ä»¶åº“ä¸­å†™çš„ä¸€ä¸ªä¸ªç»„ä»¶ï¼Œå¯ä»¥ç›´æ¥æ”¾åˆ°æ–‡æ¡£é‡Œå»ç”¨ï¼Œå±•ç¤ºç»„ä»¶çš„å®é™…è¿è¡Œæ•ˆæœã€‚ æˆ‘çš„æ¡ˆä¾‹ç½‘ç«™ä¹Ÿå°±æ˜¯é€šè¿‡vuepressæ¥å†™çš„ï¼Œç”Ÿæˆé™æ€ç½‘ç«™åï¼Œç”¨ gh-pages ç›´æ¥éƒ¨ç½²åˆ°githubä¸Šï¼Œä¹Ÿå¯ä»¥ç›´æ¥éƒ¨ç½²åˆ°æˆ‘ä»¬è‡ªå·±çš„ç½‘ç«™ä¸Šã€‚ vuepressæ›´å¥½çš„ä¸€ç‚¹åœ¨äºä½ å¯ä»¥è‡ªå®šä¹‰å…¶webpacké…ç½®å’Œä¸»é¢˜ï¼Œæ„å‘³ç€ä½ å¯ä»¥è®©ä½ è‡ªå·±çš„æ–‡æ¡£ç«™ç‚¹åœ¨å¼€å‘é˜¶æ®µæœ‰æ›´å¤šçš„åŠŸèƒ½ç‰¹æ€§çš„æ”¯æŒï¼ŒåŒæ—¶å¯ä»¥æŠŠç«™ç‚¹é£æ ¼æ”¹æˆè‡ªå·±çš„ä¸€å¥—ä¸»é¢˜é£æ ¼ã€‚è¿™å°±æ— éœ€æˆ‘ä»¬é‡å¤´å¼€å§‹å»åšä¸€å¥—äº†ï¼Œå¯¹äºå’±ä»¬æƒ³è¦å¿«é€Ÿå®Œæˆç»„ä»¶åº“æ–‡æ¡£å»ºè®¾è¿™ä¸€éœ€æ±‚æ¥è¯´ï¼Œè¿˜æ˜¯æŒºæœ‰æ•ˆçš„ã€‚ VuePressæ­å»ºæ–‡æ¡£VuePress æ˜¯ Vue é©±åŠ¨çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ã€‚æ”¯æŒåœ¨ Markdown ä¸­ä½¿ç”¨ Vue ç»„ä»¶ï¼Œç®€æ´ï¼Œé«˜æ€§èƒ½ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„æ–‡æ¡£ç”Ÿæˆå™¨ï¼Œå¦‚ Doczã€Storybook ç­‰ã€‚ å¯ä»¥æ ¹æ®å®˜æ–¹æ–‡æ¡£å­¦ä¹ å¦‚ä½•ä½¿ç”¨ï¼šhttps://www.vuepress.cn/guide/getting-started.html é¡¹ç›®ç”ŸæˆåŠé…ç½®å®‰è£…å¯ä»¥å³é”®æ‰‹åŠ¨æ–°å»ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ mkdir å‘½ä»¤æ–°å»ºï¼š 1mkdir heavenUi &amp;&amp; cd heavenUi å…¨å±€å®‰è£…VuePress1npm install -g vuepress è¿›å…¥ vuepressBlogDemo æ–‡ä»¶å¤¹ï¼Œåˆå§‹åŒ–é¡¹ç›®ä½¿ç”¨ npm init æˆ– npm init -yï¼ˆé»˜è®¤yesï¼‰ 1npm init -y é…ç½®scriptspackage.json 1234{ &quot;docs:dev&quot;: &quot;vuepress dev docs&quot;, &quot;docs:build&quot;: &quot;vuepress build docs&quot; } åˆå§‹åŒ–docsåˆ›å»ºç›®å½•å’Œæ–‡ä»¶å¦‚ä¸‹å›¾æ‰€ç¤º VuePress éµå¾ª â€œçº¦å®šä¼˜äºé…ç½®â€ çš„åŸåˆ™ï¼Œæ¨èçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š 12345678910111213141516171819202122.â”œâ”€â”€ docsâ”‚ â”œâ”€â”€ .vuepress (å¯é€‰çš„)â”‚ â”‚ â”œâ”€â”€ components (å¯é€‰çš„)â”‚ â”‚ â”œâ”€â”€ theme (å¯é€‰çš„)â”‚ â”‚ â”‚ â””â”€â”€ Layout.vueâ”‚ â”‚ â”œâ”€â”€ public (å¯é€‰çš„)â”‚ â”‚ â”œâ”€â”€ styles (å¯é€‰çš„)â”‚ â”‚ â”‚ â”œâ”€â”€ index.stylâ”‚ â”‚ â”‚ â””â”€â”€ palette.stylâ”‚ â”‚ â”œâ”€â”€ templates (å¯é€‰çš„, è°¨æ…é…ç½®)â”‚ â”‚ â”‚ â”œâ”€â”€ dev.htmlâ”‚ â”‚ â”‚ â””â”€â”€ ssr.htmlâ”‚ â”‚ â”œâ”€â”€ config.js (å¯é€‰çš„)â”‚ â”‚ â””â”€â”€ enhanceApp.js (å¯é€‰çš„)â”‚ â”‚ â”‚ â”œâ”€â”€ README.mdâ”‚ â”œâ”€â”€ guideâ”‚ â”‚ â””â”€â”€ README.mdâ”‚ â””â”€â”€ config.mdâ”‚ â””â”€â”€ package.json æ³¨æ„ è¯·ç•™æ„ç›®å½•åçš„å¤§å†™ã€‚ docs/.vuepress: ç”¨äºå­˜æ”¾å…¨å±€çš„é…ç½®ã€ç»„ä»¶ã€é™æ€èµ„æºç­‰ã€‚ docs/.vuepress/components: è¯¥ç›®å½•ä¸­çš„ Vue ç»„ä»¶å°†ä¼šè¢«è‡ªåŠ¨æ³¨å†Œä¸ºå…¨å±€ç»„ä»¶ã€‚ docs/.vuepress/theme: ç”¨äºå­˜æ”¾æœ¬åœ°ä¸»é¢˜ã€‚ docs/.vuepress/styles: ç”¨äºå­˜æ”¾æ ·å¼ç›¸å…³çš„æ–‡ä»¶ã€‚ docs/.vuepress/styles/index.styl: å°†ä¼šè¢«è‡ªåŠ¨åº”ç”¨çš„å…¨å±€æ ·å¼æ–‡ä»¶ï¼Œä¼šç”Ÿæˆåœ¨æœ€ç»ˆçš„ CSS æ–‡ä»¶ç»“å°¾ï¼Œå…·æœ‰æ¯”é»˜è®¤æ ·å¼æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ docs/.vuepress/styles/palette.styl: ç”¨äºé‡å†™é»˜è®¤é¢œè‰²å¸¸é‡ï¼Œæˆ–è€…è®¾ç½®æ–°çš„ stylus é¢œè‰²å¸¸é‡ã€‚ docs/.vuepress/public: é™æ€èµ„æºç›®å½•ã€‚ docs/.vuepress/templates: å­˜å‚¨ HTML æ¨¡æ¿æ–‡ä»¶ã€‚ docs/.vuepress/templates/dev.html: ç”¨äºå¼€å‘ç¯å¢ƒçš„ HTML æ¨¡æ¿æ–‡ä»¶ã€‚ docs/.vuepress/templates/ssr.html: æ„å»ºæ—¶åŸºäº Vue SSR çš„ HTML æ¨¡æ¿æ–‡ä»¶ã€‚ docs/.vuepress/config.js: é…ç½®æ–‡ä»¶çš„å…¥å£æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ YML æˆ– tomlã€‚ docs/.vuepress/enhanceApp.js: å®¢æˆ·ç«¯åº”ç”¨çš„å¢å¼ºã€‚ é¦–é¡µä¿¡æ¯è®¾ç½®12345678910---home: trueactionText: å¼€å§‹ä½¿ç”¨# ç½‘ç«™å…¥å£ æ ¹æ®è‡ªå·±çš„é¦–é¡µé…ç½®è·¯å¾„actionLink: /component/installationfeatures:- title: heaven-UI details: ä¸€å¥—åŸºäº Vue.js çš„é«˜è´¨é‡UI ç»„ä»¶åº“footer: MIT Licensed | COPYRIGHT Â©--- é¦–é¡µæ•ˆæœå¦‚ä¸‹ é…ç½®å¯¼èˆª12345678910111213141516171819202122232425262728293031module.exports = { title: 'Heaven', // è®¾ç½®ç½‘ç«™æ ‡é¢˜ description: 'è½»é‡ã€å¯é çš„ Vue ç»„ä»¶åº“', // æè¿° dest: './dist', // è®¾ç½®è¾“å‡ºç›®å½• themeConfig: { // ä¸»é¢˜é…ç½® nav: [ // å¤´éƒ¨å¯¼èˆªæ¡ { text: 'ä¸»é¡µ', link: '/' }, { text: &quot;ç»„ä»¶&quot;, link: &quot;/component/installation&quot;, }, ], // ä¸ºä»¥ä¸‹è·¯ç”±æ·»åŠ ä¾§è¾¹æ  sidebar: { '/components/': [ { title: 'ç»„ä»¶', collapsable: false, children: [ 'button', // ... å…¶ä»–ç»„ä»¶ ] }, // å…¶ä»–è®¾ç½® ] } }} å®¢æˆ·ç«¯åº”ç”¨çš„å¢å¼ºæ–‡ä»¶enhanceApp.js è¿™ä¸ªæ–‡ä»¶ç”¨äºæ·»åŠ ç»„ä»¶Demoå±•ç¤ºçš„ä¼˜åŒ–çš„é…ç½® å®‰è£… 1npm install heaven-ui less less-loader --save å¦‚éœ€æœ¬åœ°è°ƒè¯•ï¼Œå¯linkå¼€å‘çš„ç»„ä»¶åº“ heaven-ui 1npm link heaven-ui .vuepress/enhanceApp.js 123456789101112131415/** * æ‰©å±• VuePress åº”ç”¨ */import Heaven from 'heaven-ui'import 'heaven-ui/lib/heaven-ui.min.css' export default ({ Vue, // VuePress æ­£åœ¨ä½¿ç”¨çš„ Vue æ„é€ å‡½æ•° options, // é™„åŠ åˆ°æ ¹å®ä¾‹çš„ä¸€äº›é€‰é¡¹ router, // å½“å‰åº”ç”¨çš„è·¯ç”±å®ä¾‹ siteData // ç«™ç‚¹å…ƒæ•°æ®}) =&gt; { // ...åšä¸€äº›å…¶ä»–çš„åº”ç”¨çº§åˆ«çš„ä¼˜åŒ– Vue.use(Heaven)} .vuepress/components/button.vueæ–‡ä»¶å¯ä»¥è¿›è¡Œbuttonç»„ä»¶çš„Demoå±•ç¤ºçš„æ ·å¼ åœ¨mdæ–‡ä»¶å†…å¢åŠ  å°±å¯ç›´æ¥æ¸²æŸ“button.vueçš„å†…å®¹ 123456789101112131415161718&lt;template&gt; &lt;div&gt; &lt;h-button&gt;é»˜è®¤æŒ‰é’®&lt;/h-button&gt; &lt;h-button type=&quot;primary&quot;&gt;ä¸»è¦æŒ‰é’®&lt;/h-button&gt; &lt;h-button type=&quot;success&quot;&gt;æˆåŠŸæŒ‰é’®&lt;/h-button&gt; &lt;h-button type=&quot;warning&quot;&gt;è­¦å‘ŠæŒ‰é’®&lt;/h-button&gt; &lt;h-button type=&quot;danger&quot;&gt;å±é™©æŒ‰é’®&lt;/h-button&gt; &lt;h-button type=&quot;info&quot;&gt;ä¿¡æ¯æŒ‰é’®&lt;/h-button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default {}&lt;/script&gt;&lt;style&gt;&lt;/style&gt; ç¼–å†™å¯¹åº”ç»„ä»¶çš„Markdownæ–‡ä»¶ 1234567891011121314151617#### Button æŒ‰é’®#### å¸¸ç”¨çš„æ“ä½œæŒ‰é’®ã€‚&lt;ClientOnly&gt;&lt;button&gt;&lt;/button&gt;&lt;/ClientOnly&gt;``` html&lt;template&gt; &lt;h-button&gt;é»˜è®¤æŒ‰é’®&lt;/h-button&gt; &lt;h-button type=&quot;primary&quot;&gt;ä¸»è¦æŒ‰é’®&lt;/h-button&gt; &lt;h-button type=&quot;success&quot;&gt;æˆåŠŸæŒ‰é’®&lt;/h-button&gt; &lt;h-button type=&quot;warning&quot;&gt;è­¦å‘ŠæŒ‰é’®&lt;/h-button&gt; &lt;h-button type=&quot;danger&quot;&gt;å±é™©æŒ‰é’®&lt;/h-button&gt; &lt;h-button type=&quot;info&quot;&gt;ä¿¡æ¯æŒ‰é’®&lt;/h-button&gt;&lt;/template&gt;``` æ•ˆæœå¦‚ä¸‹ è®¿é—® http://localhost:8080 å³å¯çœ‹åˆ°æ–‡æ¡£äº†ã€‚å½“ç„¶ï¼Œå¯ä»¥å°†æ–‡æ¡£éƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åˆ° Github pages ä¸Šã€‚ å°ç»“è‡³æ­¤ï¼Œç»„ä»¶åº“çš„è¯´æ˜æ–‡æ¡£å°±æ­å»ºå®Œæˆï¼Œåç»­è‡ªè¡Œè¡¥å……æ–‡æ¡£å³å¯ã€‚ ç»„ä»¶åº“åœ°å€ ä»“åº“åœ°å€ æ–‡æ¡£æ¼”ç¤ºåœ°å€","link":"/2021/08/21/%E6%90%AD%E5%BB%BA%E7%BB%84%E4%BB%B6%E5%BA%93%E6%96%87%E6%A1%A3/"},{"title":"å¯¹äºWebpackçš„ç®€å•ç†è§£","text":"èƒŒæ™¯è¯´åˆ°æ„å»ºå·¥å…·ï¼Œæˆ‘å¾€å¾€ä¼šåœ¨å‰é¢åŠ ã€Œè‡ªåŠ¨åŒ–ã€ä¸‰ä¸ªå­—ï¼Œå› ä¸ºæ„å»ºå·¥å…·å°±æ˜¯ç”¨æ¥è®©æˆ‘ä»¬ä¸å†åšæœºæ¢°é‡å¤çš„äº‹æƒ…ï¼Œè§£æ”¾æˆ‘ä»¬çš„åŒæ‰‹çš„ã€‚ ä»€ä¹ˆæ˜¯å‰ç«¯è‡ªåŠ¨åŒ–ï¼Ÿå‰ç«¯å·¥ç¨‹å¸ˆéœ€è¦ç»´æŠ¤çš„ä»£ç æä¸ºåºå¤§å’Œå¤æ‚ï¼Œä»£ç ç»´æŠ¤ã€æ‰“åŒ…ã€å‘å¸ƒç­‰æµç¨‹ä¹Ÿå˜å¾—æä¸ºç¹çï¼ŒåŒæ—¶æµªè´¹çš„æ—¶é—´å’Œç²¾åŠ›ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œå½“ç„¶äººä¸ºçš„é”™è¯¯ä¹Ÿéšç€æµç¨‹çš„å¢åŠ è€Œå¢åŠ äº†æ›´å¤šçš„å‡ºé”™ç‡ã€‚ è‡´ä½¿æ¯ä¸€ä¸ªå›¢é˜Ÿéƒ½å¸Œæœ›æœ‰ä¸€ç§å·¥å…·ï¼Œèƒ½å¸®åŠ©æ•´ä¸ªå›¢é˜Ÿåœ¨å¼€å‘ä¸­èƒ½ç²¾ç®€æµç¨‹ã€æé«˜æ•ˆç‡ã€å‡å°‘é”™è¯¯ç‡ã€‚éšä¹‹è®¨è®ºè‡ªåŠ¨åŒ–éƒ¨ç½²ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œå¹¶ä¸”å›½å†…å¾ˆå¤šå¤§å‹å›¢é˜Ÿä¹Ÿéƒ½æœ‰è‡ªå·±æˆç†Ÿçš„è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·ã€‚ å¸¸ç”¨çš„æ„å»ºå·¥å…· gulpï¼Œwebpackï¼Œparcelï¼Œrollupï¼Œvite ï¼Œfisï¼Œgruntç­‰ ç»è¿‡å¤šå¹´çš„å‘å±•ï¼ŒWebpack å·²ç»æˆä¸ºæ„å»ºå·¥å…·ä¸­çš„é¦–é€‰ï¼Œè¿™æ˜¯å› ä¸ºï¼š å¤§å¤šæ•°å›¢é˜Ÿåœ¨å¼€å‘æ–°é¡¹ç›®æ—¶ä¼šé‡‡ç”¨ç´§è·Ÿæ—¶ä»£çš„æŠ€æœ¯ï¼Œè¿™äº›æŠ€æœ¯å‡ ä¹éƒ½ä¼šé‡‡ç”¨â€œæ¨¡å—åŒ–+æ–°è¯­è¨€+æ–°æ¡†æ¶â€ï¼ŒWebpackå¯ä»¥ä¸ºè¿™äº›æ–°é¡¹ç›®æä¾›ä¸€ç«™å¼çš„è§£å†³æ–¹æ¡ˆï¼› Webpackæœ‰è‰¯å¥½çš„ç”Ÿæ€å’Œç»´æŠ¤å›¢é˜Ÿï¼Œèƒ½æä¾›è‰¯å¥½çš„å¼€å‘ä½“éªŒå¹¶ä¿è¯è´¨é‡ï¼› Webpack è¢«å…¨ä¸–ç•Œå¤§é‡çš„Webå¼€å‘è€…ä½¿ç”¨å’ŒéªŒè¯ï¼Œèƒ½æ‰¾åˆ°å„ä¸ªå±‚é¢æ‰€éœ€è¦çš„æ•™ç¨‹å’Œç»éªŒåˆ†äº«ã€‚ webpackçš„æ„æˆè¯´webpackæ˜¯æ„å»ºå·¥å…·å¹¶ä¸ç¡®åˆ‡ï¼Œæ›´ç¡®åˆ‡çš„è¯´æ³•åº”è¯¥æ˜¯é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpacké‡ŒåŒ…ï¼ˆbundleï¼‰çš„æ¦‚å¿µå¾ˆé‡è¦ï¼Œå¦ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µæ˜¯ä¾èµ–å…³ç³»å›¾ï¼Œè¿™ç»„æˆäº†è¿™ä¸ªæ‰“åŒ…å™¨çš„é‡è¦æ ¸å¿ƒã€‚ webpackæœ‰å››å¤§æ ¸å¿ƒè¦ç´ ï¼Œè¿™ä¹Ÿæ˜¯è·Ÿæˆ‘ä»¬ä½¿ç”¨é…ç½®webpackæ—¶ååˆ†å¯†åˆ‡çš„å››ä¸ªéƒ¨åˆ†ï¼š entryï¼š é…ç½®å…¥å£æ–‡ä»¶ï¼Œå³äº§ç”Ÿä¾èµ–å…³ç³»å›¾çš„å…¥å£ outputï¼šæ–‡ä»¶çš„äº§å‡ºä½ç½®é…ç½® loaderï¼šåŒ¹é…æ–‡ä»¶çš„ç¼–è¯‘è¿‡ç¨‹ pluginsï¼šé’ˆå¯¹æ•´ä¸ªæ„å»ºæ‰“åŒ…æµç¨‹çš„æ’ä»¶å¤„ç†ï¼ˆæ–‡ä»¶å‹ç¼©ï¼Œdevç¯å¢ƒçš„çƒ­åŠ è½½ï¼‰ å‡ºå…¥å£å†³å®šäº†æˆ‘ä»¬éœ€è¦å°†é‚£äº›æ–‡ä»¶æ‰“åŒ…åˆ°å“ªé‡Œå»ï¼Œè€Œloaderæ‰¿æ¥è¿™é‡Œçš„åŒ¹é…æ–‡ä»¶çš„ç¼–è¯‘å·¥ä½œï¼Œpluginsåˆ™æ˜¯é’ˆå¯¹æ•´ä¸ªæ„å»ºè¿‡ç¨‹çš„æ“ä½œï¼Œéœ€è¦ä»€ä¹ˆåŠŸèƒ½å¼•å…¥ä»€ä¹ˆæ’ä»¶ã€‚ webpackæ‰“åŒ…æ˜¯å¦‚ä½•è¿è¡Œçš„ä¹Ÿå¯ä»¥ç§°ä¸ºï¼Œwebpackæ˜¯å¦‚ä½•å®ç°æ¨¡å—åŒ–çš„ CommonJSæ˜¯åŒæ­¥åŠ è½½æ¨¡å—ï¼Œä¸€èˆ¬ç”¨äºnodeã€‚å› ä¸ºnodeåº”ç”¨ç¨‹åºè¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šï¼Œç¨‹åºé€šè¿‡æ–‡ä»¶ç³»ç»Ÿå¯ä»¥ç›´æ¥è¯»å–åˆ°å„ä¸ªæ¨¡å—çš„æ–‡ä»¶ï¼Œç‰¹ç‚¹æ˜¯å“åº”å¿«é€Ÿï¼Œä¸ä¼šå› ä¸ºåŒæ­¥è€Œé˜»å¡äº†ç¨‹åºçš„è¿è¡Œï¼› AMDæ˜¯å¼‚æ­¥åŠ è½½æ¨¡å—ï¼Œæ‰€ä»¥æ™®éç”¨äºå‰ç«¯ã€‚è€Œå‰ç«¯é¡¹ç›®è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œæ¯ä¸ªæ¨¡å—éƒ½è¦é€šè¿‡httpè¯·æ±‚åŠ è½½jsæ¨¡å—æ–‡ä»¶ï¼Œå—åˆ°ç½‘ç»œç­‰å› ç´ çš„å½±å“å¦‚æœåŒæ­¥çš„è¯å°±ä¼šä½¿æµè§ˆå™¨å‡ºç°â€œå‡æ­»â€ï¼ˆå¡æ­»ï¼‰çš„æƒ…å†µï¼Œå½±å“åˆ°äº†ç”¨æˆ·ä½“éªŒã€‚ ESModule æ—¨åœ¨å®ç°å‰åç«¯æ¨¡å—åŒ–çš„ç»Ÿä¸€ã€‚è€Œwebpackå°±æ˜¯æŠŠES6çš„æ¨¡å—åŒ–ä»£ç è½¬ç æˆCommonJSçš„å½¢å¼ï¼Œä»è€Œå…¼å®¹æµè§ˆå™¨çš„ã€‚ ä¸ºä»€ä¹ˆwebpackæ‰“åŒ…åçš„æ–‡ä»¶ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨ï¼šæ­¤æ—¶webpackä¼šå°†æ‰€æœ‰çš„jsæ¨¡å—æ‰“åŒ…åˆ°bundle.jsä¸­ï¼ˆå¼‚æ­¥åŠ è½½çš„æ¨¡å—é™¤å¤–ï¼Œå¼‚æ­¥æ¨¡å—åé¢ä¼šè®²ï¼‰ï¼Œè¯»å–åˆ°äº†å†…å­˜é‡Œï¼Œå°±ä¸ä¼šå†åˆ†æ¨¡å—åŠ è½½äº†ã€‚ webpackå¯¹CommonJSçš„æ¨¡å—åŒ–å¤„ç†ä¸¾ä¾‹ï¼š index.jsæ–‡ä»¶ï¼Œå¼•å…¥test.jsæ–‡ä»¶ 1234const test = require('./test');console.log(test);console.log('hello world'); test.jsæ–‡ä»¶ 1234module.exports = { name: 'startdt', age: '5',}; å½“æˆ‘ä»¬æ‰§è¡Œwebpackä¹‹åï¼Œæ‰“åŒ…å®Œæˆï¼Œå¯ä»¥çœ‹åˆ°bundle.jså†…çš„ä»£ç  // modules å³ä¸ºå­˜æ”¾æ‰€æœ‰æ¨¡å—çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå‡½æ•° 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465(function(modules) { // å®‰è£…è¿‡çš„æ¨¡å—éƒ½å­˜æ”¾åœ¨è¿™é‡Œé¢ // ä½œç”¨æ˜¯æŠŠå·²ç»åŠ è½½è¿‡çš„æ¨¡å—ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œæå‡æ€§èƒ½ var installedModules = {}; // å»æ•°ç»„ä¸­åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼ŒmoduleId ä¸ºè¦åŠ è½½æ¨¡å—åœ¨æ•°ç»„ä¸­çš„ index // __webpack_require__ä½œç”¨å’Œ Node.js ä¸­ require è¯­å¥ç›¸ä¼¼ function __webpack_require__(moduleId) { // require æ¨¡å—æ—¶å…ˆåˆ¤æ–­æ˜¯å¦å·²ç»ç¼“å­˜, å·²ç»ç¼“å­˜çš„æ¨¡å—ç›´æ¥è¿”å› if(installedModules[moduleId]) { return installedModules[moduleId].exports; } // å¦‚æœç¼“å­˜ä¸­ä¸å­˜åœ¨éœ€è¦åŠ è½½çš„æ¨¡å—ï¼Œå°±æ–°å»ºä¸€ä¸ªæ¨¡å—ï¼Œå¹¶æŠŠå®ƒå­˜åœ¨ç¼“å­˜ä¸­ var module = installedModules[moduleId] = { // æ¨¡å—åœ¨æ•°ç»„ä¸­çš„index i: moduleId, // è¯¥æ¨¡å—æ˜¯å¦å·²åŠ è½½å®Œæ¯• l: false, // è¯¥æ¨¡å—çš„å¯¼å‡ºå€¼ï¼Œä¹Ÿå«æ¨¡å—ä¸»ä½“å†…å®¹, ä¼šè¢«é‡å†™ exports: {} }; // ä» modules ä¸­è·å– index ä¸º moduleId çš„æ¨¡å—å¯¹åº”çš„å‡½æ•° // å†è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼ŒåŒæ—¶æŠŠå‡½æ•°éœ€è¦çš„å‚æ•°ä¼ å…¥ï¼ŒthisæŒ‡å‘æ¨¡å—çš„ä¸»ä½“å†…å®¹ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); // å°†æ¨¡å—æ ‡è®°ä¸ºå·²åŠ è½½ module.l = true; // è¿”å›æ¨¡å—çš„å¯¼å‡ºå€¼ï¼Œå³æ¨¡å—ä¸»ä½“å†…å®¹ return module.exports; } // å‘å¤–æš´éœ²æ‰€æœ‰çš„æ¨¡å— __webpack_require__.m = modules; // å‘å¤–æš´éœ²å·²ç¼“å­˜çš„æ¨¡å— __webpack_require__.c = installedModules; ... ... // Webpack é…ç½®ä¸­çš„ publicPathï¼Œç”¨äºåŠ è½½è¢«åˆ†å‰²å‡ºå»çš„å¼‚æ­¥ä»£ç ï¼Œè¿™ä¸ªæš‚æ—¶è¿˜æ²¡æœ‰ç”¨åˆ° __webpack_require__.p = &quot;&quot;; // Load entry module and return exports // å‡†å¤‡å·¥ä½œåšå®Œäº†, require ä¸€ä¸‹å…¥å£æ¨¡å—, è®©é¡¹ç›®è·‘èµ·æ¥ // ä½¿ç”¨ __webpack_require__ å»åŠ è½½ index ä¸º 0 çš„æ¨¡å—ï¼Œå¹¶ä¸”è¿”å›è¯¥æ¨¡å—å¯¼å‡ºçš„å†…å®¹ // index ä¸º 0 çš„æ¨¡å—å°±æ˜¯ index.jsæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œå…¥å£æ¨¡å— // __webpack_require__.s çš„å«ä¹‰æ˜¯å¯åŠ¨æ¨¡å—å¯¹åº”çš„ index return __webpack_require__(__webpack_require__.s = 0);})/***** åä¸½çš„åˆ†å‰²çº¿ ä¸Šè¾¹æ—¶ webpack åˆå§‹åŒ–ä»£ç , ä¸‹è¾¹æ˜¯æˆ‘ä»¬å†™çš„æ¨¡å—ä»£ç  *******/// æ‰€æœ‰çš„æ¨¡å—éƒ½å­˜æ”¾åœ¨äº†ä¸€ä¸ªæ•°ç»„é‡Œï¼Œæ ¹æ®æ¯ä¸ªæ¨¡å—åœ¨æ•°ç»„çš„ index æ¥åŒºåˆ†å’Œå®šä½æ¨¡å—([ /* æ¨¡å— 0 å¯¹åº” index.js */ (function(module, exports, __webpack_require__) { // é€šè¿‡ __webpack_require__ è§„èŒƒå¯¼å…¥ foo å‡½æ•°ï¼Œfoo.js å¯¹åº”çš„æ¨¡å— index ä¸º 1 const test = __webpack_require__(1); console.log(test); console.log('hello world'); }), /* æ¨¡å— 1 å¯¹åº” foo.js */ (function(module, exports) { // é€šè¿‡ CommonJS è§„èŒƒå¯¼å‡ºå¯¹è±¡ module.exports = { name: 'startdt', age: '5', }; })]); ä¸Šé¢æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œç®€å•ç‚¹å†™ï¼š 1234567891011(function(modules) { // æ¨¡æ‹Ÿ require è¯­å¥ function __webpack_require__(index) { return [/*å­˜æ”¾æ‰€æœ‰æ¨¡å—çš„æ•°ç»„ä¸­ï¼Œç¬¬indexä¸ªæ¨¡å—æš´éœ²çš„ä¸œè¥¿*/] } // æ‰§è¡Œå­˜æ”¾æ‰€æœ‰æ¨¡å—æ•°ç»„ä¸­çš„ç¬¬0ä¸ªæ¨¡å—ï¼Œå¹¶ä¸”è¿”å›è¯¥æ¨¡å—å¯¼å‡ºçš„å†…å®¹ return __webpack_require__(0);})([/*å­˜æ”¾æ‰€æœ‰æ¨¡å—çš„æ•°ç»„*/]) bundle.js èƒ½ç›´æ¥è¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„åŸå› åœ¨äºï¼š webpacké€šè¿‡ _webpack_require_ å‡½æ•°ï¼ˆè¯¥å‡½æ•°å®šä¹‰äº†ä¸€ä¸ªå¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œçš„åŠ è½½å‡½æ•°ï¼‰æ¨¡æ‹Ÿäº†æ¨¡å—çš„åŠ è½½ï¼ˆç±»ä¼¼äºNode.js ä¸­çš„ require è¯­å¥ï¼‰ï¼ŒæŠŠå®šä¹‰çš„æ¨¡å—å†…å®¹æŒ‚è½½åˆ°module.exportsä¸Šï¼› åŒæ—¶__webpack_require__å‡½æ•°ä¸­ä¹Ÿå¯¹æ¨¡å—ç¼“å­˜åšäº†ä¼˜åŒ–ï¼Œæ‰§è¡ŒåŠ è½½è¿‡çš„æ¨¡å—ä¸ä¼šå†æ‰§è¡Œç¬¬äºŒæ¬¡ï¼Œæ‰§è¡Œç»“æœä¼šç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œå½“æŸä¸ªæ¨¡å—ç¬¬äºŒæ¬¡è¢«è®¿é—®æ—¶ä¼šç›´æ¥å»å†…å­˜ä¸­è¯»å–è¢«ç¼“å­˜çš„è¿”å›å€¼ã€‚ åŸæ¥ä¸€ä¸ªä¸ªç‹¬ç«‹çš„æ¨¡å—æ–‡ä»¶è¢«åˆå¹¶åˆ°äº†ä¸€ä¸ªå•ç‹¬çš„ bundle.js çš„åŸå› åœ¨äºï¼Œæµè§ˆå™¨ä¸èƒ½åƒ Node.js é‚£æ ·å¿«é€Ÿåœ°å»æœ¬åœ°åŠ è½½ä¸€ä¸ªä¸ªæ¨¡å—æ–‡ä»¶ï¼Œè€Œå¿…é¡»é€šè¿‡ç½‘ç»œè¯·æ±‚å»åŠ è½½è¿˜æœªå¾—åˆ°çš„æ–‡ä»¶ã€‚ å¦‚æœæ¨¡å—æ•°é‡å¾ˆå¤šï¼ŒåŠ è½½æ—¶é—´ä¼šå¾ˆé•¿ï¼Œå› æ­¤æŠŠæ‰€æœ‰æ¨¡å—éƒ½å­˜æ”¾åœ¨äº†æ•°ç»„ä¸­ï¼Œæ‰§è¡Œä¸€æ¬¡ç½‘ç»œåŠ è½½ã€‚ è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘å†™ä¸€äº†ä¸€ä¸ªdemo æºç åœ°å€ webpackå¯¹es6 Moduleæ¨¡å—åŒ–çš„å¤„ç† ä¸¾ä¾‹ index.jsæ–‡ä»¶ï¼Œå¼•å…¥test.jsæ–‡ä»¶ 1234import test from './test';console.log(test);console.log('hello world'); test.jsæ–‡ä»¶ 1234export default { name: 'startdt', age: '5',}; æ‰“åŒ…å®Œåbundle.jsä»£ç å¦‚ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637(function(modules) { var installedModules = {}; function __webpack_require__(moduleId) { if(installedModules[moduleId]) { return installedModules[moduleId].exports; } var module = installedModules[moduleId] = { i: moduleId, l: false, exports: {} }; modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); module.l = true; return module.exports; } __webpack_require__.m = modules; __webpack_require__.c = installedModules; __webpack_require__.d = function(exports, name, getter) { if(!__webpack_require__.o(exports, name)) { Object.defineProperty(exports, name, { configurable: false, enumerable: true, get: getter }); } }; __webpack_require__.n = function(module) { var getter = module &amp;&amp; module.__esModule ? function getDefault() { return module['default']; } : function getModuleExports() { return module; }; __webpack_require__.d(getter, 'a', getter); return getter; }; __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); }; __webpack_require__.p = &quot;&quot;; return __webpack_require__(__webpack_require__.s = 0);})([ç›¸å…³æ¨¡å—]); æ‰“åŒ…å¥½çš„å†…å®¹å’Œcommonjsæ¨¡å—åŒ–æ–¹æ³•å·®ä¸å¤š 123456789101112131415function(module, __webpack_exports__, __webpack_require__) { &quot;use strict&quot;; // åœ¨__webpack_exports__ä¸Šå®šä¹‰__esModuleä¸ºtrueï¼Œè¡¨æ˜æ˜¯ä¸€ä¸ªæ¨¡å—å¯¹è±¡ Object.defineProperty(__webpack_exports__, &quot;__esModule&quot;, { value: true }); var __WEBPACK_IMPORTED_MODULE_0__foo__ = __webpack_require__(1); console.log(__WEBPACK_IMPORTED_MODULE_0__foo__[&quot;a&quot;]); console.log('hello world');},function(module, __webpack_exports__, __webpack_require__) { &quot;use strict&quot;; __webpack_exports__[&quot;a&quot;] = ({ name: 'startdt', age: '5', });} å’Œ commonjs ä¸åŒçš„åœ°æ–¹ é¦–å…ˆ, åŒ…è£…å‡½æ•°çš„å‚æ•°ä¹‹å‰çš„ module.exports å˜æˆäº†_webpack_exports_ å…¶æ¬¡, åœ¨ä½¿ç”¨äº† es6 æ¨¡å—å¯¼å…¥è¯­æ³•(import)çš„åœ°æ–¹, ç»™__webpack_exports__æ·»åŠ äº†å±æ€§__esModule å…¶ä½™çš„éƒ¨åˆ†å’Œ commonjs ç±»ä¼¼ webpackæ–‡ä»¶çš„æŒ‰éœ€åŠ è½½ä»¥ä¸ŠwebpackæŠŠæ‰€æœ‰æ¨¡å—æ‰“åŒ…åˆ°ä¸»æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥æ¨¡å—åŠ è½½æ–¹å¼éƒ½æ˜¯åŒæ­¥æ–¹å¼ã€‚ä½†åœ¨å¼€å‘åº”ç”¨è¿‡ç¨‹ä¸­ï¼ŒæŒ‰éœ€åŠ è½½ï¼ˆä¹Ÿå«æ‡’åŠ è½½ï¼‰ä¹Ÿæ˜¯ç»å¸¸ä½¿ç”¨çš„ä¼˜åŒ–æŠ€å·§ä¹‹ä¸€ã€‚ æŒ‰éœ€åŠ è½½ï¼Œé€šä¿—è®²å°±æ˜¯ä»£ç æ‰§è¡Œåˆ°å¼‚æ­¥æ¨¡å—ï¼ˆæ¨¡å—å†…å®¹åœ¨å¦å¤–ä¸€ä¸ªjsæ–‡ä»¶ä¸­ï¼‰ï¼Œé€šè¿‡ç½‘ç»œè¯·æ±‚å³æ—¶åŠ è½½å¯¹åº”çš„å¼‚æ­¥æ¨¡å—ä»£ç ï¼Œå†ç»§ç»­æ¥ä¸‹å»çš„æµç¨‹ã€‚ main.js æ–‡ä»¶ 123456window.document.getElementById('btn').addEventListener('click', function () { // å½“æŒ‰é’®è¢«ç‚¹å‡»åæ‰å»åŠ è½½ show.js æ–‡ä»¶ï¼Œæ–‡ä»¶åŠ è½½æˆåŠŸåæ‰§è¡Œæ–‡ä»¶å¯¼å‡ºçš„å‡½æ•° import(/* webpackChunkName: &quot;show&quot; */ './show').then((show) =&gt; { show('Webpack'); })}); show.js æ–‡ä»¶ 123module.exports = function (content) { window.alert('Hello ' + content);}; ä»£ç ä¸­æœ€å…³é”®çš„ä¸€å¥æ˜¯ import(/* webpackChunkName: â€œshowâ€ / â€˜./showâ€™)ï¼ŒWebpack å†…ç½®äº†å¯¹ import() è¯­å¥çš„æ”¯æŒï¼Œå½“ Webpack é‡åˆ°äº†ç±»ä¼¼çš„è¯­å¥æ—¶ä¼šè¿™æ ·å¤„ç†ï¼š ä»¥ ./show.js ä¸ºå…¥å£æ–°ç”Ÿæˆä¸€ä¸ª Chunkï¼› å½“ä»£ç æ‰§è¡Œåˆ° import æ‰€åœ¨è¯­å¥æ—¶æ‰ä¼šå»åŠ è½½ç”± Chunk å¯¹åº”ç”Ÿæˆçš„æ–‡ä»¶ã€‚ import è¿”å›ä¸€ä¸ª Promiseï¼Œå½“æ–‡ä»¶åŠ è½½æˆåŠŸæ—¶å¯ä»¥åœ¨ Promise çš„ then æ–¹æ³•ä¸­è·å–åˆ° show.js å¯¼å‡ºçš„å†…å®¹ã€‚ webpackæœ‰ä¸ªrequire.ensure apiè¯­æ³•æ¥æ ‡è®°ä¸ºå¼‚æ­¥åŠ è½½æ¨¡å—ï¼Œwebpack4æ¨èä½¿ç”¨æ–°çš„import() api(éœ€è¦é…åˆ@babel/plugin-syntax-dynamic-importæ’ä»¶)ã€‚ å› ä¸ºrequire.ensureæ˜¯é€šè¿‡å›è°ƒå‡½æ•°æ‰§è¡Œæ¥ä¸‹æ¥çš„æµç¨‹ï¼Œè€Œimport()è¿”å›promiseï¼Œè¿™æ„å‘³ç€å¯ä»¥ä½¿ç”¨ async/awaitè¯­æ³•ï¼Œä½¿å¾—å¯ä»¥åƒä¹¦å†™åŒæ­¥ä»£ç ä¸€æ ·ï¼Œæ‰§è¡Œå¼‚æ­¥æµç¨‹ã€‚ ä¸Šè¿°å†…å®¹æ‰“åŒ…åä¼šç”Ÿæˆä¸¤ä¸ªchunkæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ä¸»æ–‡ä»¶æ‰§è¡Œå…¥å£æ–‡ä»¶ bundle.js å’Œ å¼‚æ­¥åŠ è½½æ–‡ä»¶ 0.bundle.js ã€‚ // 0.bundle.js 123456789101112131415// å¼‚æ­¥æ¨¡å—// window[&quot;webpackJsonp&quot;]æ˜¯è¿æ¥å¤šä¸ªchunkæ–‡ä»¶çš„æ¡¥æ¢// window[&quot;webpackJsonp&quot;].push = ä¸»chunkæ–‡ä»¶.webpackJsonpCallback(window[&quot;webpackJsonp&quot;] = window[&quot;webpackJsonp&quot;] || []).push([ [0], // å¼‚æ­¥æ¨¡å—æ ‡è¯†chunkId,å¯åˆ¤æ–­å¼‚æ­¥ä»£ç æ˜¯å¦åŠ è½½æˆåŠŸ // è·ŸåŒæ­¥æ¨¡å—ä¸€æ ·ï¼Œå­˜æ”¾äº†{æ¨¡å—è·¯å¾„ï¼šæ¨¡å—å†…å®¹} { &quot;./src/async.js&quot;: (function(module, __webpack_exports__, __webpack_require__) { __webpack_require__.r(__webpack_exports__); __webpack_exports__[&quot;default&quot;] = (function () { return 'hello, aysnc module'; }); }) }]); å¼‚æ­¥æ¨¡å—æ‰“åŒ…åçš„æ–‡ä»¶ä¸­ä¿å­˜ç€å¼‚æ­¥æ¨¡å—æºä»£ç ï¼ŒåŒæ—¶ä¸ºäº†åŒºåˆ†ä¸åŒçš„å¼‚æ­¥æ¨¡å—ï¼Œè¿˜ä¿å­˜ç€è¯¥å¼‚æ­¥æ¨¡å—å¯¹åº”çš„æ ‡è¯†ï¼šchunkIdã€‚ä»¥ä¸Šä»£ç ä¸»åŠ¨è°ƒç”¨window[â€œwebpackJsonpâ€].pushå‡½æ•°ï¼Œè¯¥å‡½æ•°æ˜¯è¿æ¥å¼‚æ­¥æ¨¡å—ä¸ä¸»æ¨¡å—çš„å…³é”®å‡½æ•°ï¼Œè¯¥å‡½æ•°å®šä¹‰åœ¨ä¸»æ–‡ä»¶ä¸­ï¼Œå®é™…ä¸Šwindow[â€œwebpackJsonpâ€].push = webpackJsonpCallback webpackå¼‚æ­¥åŠ è½½æ¨¡å—å®ç°æµç¨‹è·ŸjsonpåŸºæœ¬ä¸€è‡´ã€‚ æ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº†æ‰“åŒ…çš„ç»“æœï¼Œé‚£webpackçš„æ˜¯æ€ä¹ˆè¿è¡Œçš„å‘¢ webpackçš„æ ¸å¿ƒå¯¹è±¡Tapableï¼šæ§åˆ¶é’©å­çš„å‘å¸ƒä¸è®¢é˜…ï¼ŒCompilerå’ŒCompilation å¯¹è±¡éƒ½ç»§æ‰¿äº Tapable CompilerCompiler ç»§æ‰¿ Tapable å¯¹è±¡ï¼Œå¯ä»¥å¹¿æ’­å’Œç›‘å¬ webpack äº‹ä»¶ã€‚ Compiler å¯¹è±¡æ˜¯ webpack çš„ç¼–è¯‘å™¨ï¼Œwebpack å‘¨æœŸä¸­åªå­˜åœ¨ä¸€ä¸ª Compiler å¯¹è±¡ã€‚ Compiler å¯¹è±¡åœ¨ webpack å¯åŠ¨æ—¶åˆ›å»ºå®ä¾‹ï¼Œcompiler å®ä¾‹ä¸­åŒ…å« webpack çš„å®Œæ•´é…ç½®ï¼ŒåŒ…æ‹¬ loaders, plugins ä¿¡æ¯ã€‚ CompilationCompilation ç»§æ‰¿ Tapable å¯¹è±¡ï¼Œå¯ä»¥å¹¿æ’­å’Œç›‘å¬ webpack äº‹ä»¶ã€‚ Compilation å®ä¾‹ä»…ä»£è¡¨ä¸€æ¬¡ webpack æ„å»ºå’Œç”Ÿæˆç¼–è¯‘èµ„æºçš„çš„è¿‡ç¨‹ã€‚ webpack å¼€å‘æ¨¡å¼å¼€å¯ watch é€‰é¡¹ï¼Œæ¯æ¬¡æ£€æµ‹åˆ°å…¥å£æ–‡ä»¶æ¨¡å—å˜åŒ–æ—¶ï¼Œä¼šåˆ›å»ºä¸€æ¬¡æ–°çš„ç¼–è¯‘: ç”Ÿæˆä¸€æ¬¡æ–°çš„ç¼–è¯‘èµ„æºå’Œæ–°çš„ compilation å¯¹è±¡ï¼Œè¿™ä¸ª compilation å¯¹è±¡åŒ…å«äº†å½“å‰ç¼–è¯‘çš„æ¨¡å—èµ„æº module, ç¼–è¯‘ç”Ÿæˆçš„èµ„æºï¼Œå˜åŒ–çš„æ–‡ä»¶, ä¾èµ–çš„çš„çŠ¶æ€ webpack çš„è¿è¡Œæµç¨‹æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è¿‡ç¨‹ï¼Œä»å¯åŠ¨åˆ°ç»“æŸä¼šä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š åˆå§‹åŒ–å‚æ•°ï¼šä»é…ç½®æ–‡ä»¶å’Œ Shell è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°; å¼€å§‹ç¼–è¯‘ï¼šç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– Compiler å¯¹è±¡ (å®ä¾‹åŒ–complierå¯¹è±¡)ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ‰§è¡Œå¯¹è±¡çš„ run æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘,ç”ŸæˆCompilationå¯¹è±¡ (å®ä¾‹åŒ–Compilationå¯¹è±¡)ï¼› ç¡®å®šå…¥å£ï¼šæ ¹æ®é…ç½®ä¸­çš„ entry ,è°ƒç”¨ASTå¼•æ“(acorn)å¤„ç†å…¥å£æ–‡ä»¶ï¼Œç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ASTï¼Œæ ¹æ®ASTæ„å»ºæ¨¡å—çš„æ‰€æœ‰ä¾èµ–ï¼› ç¼–è¯‘æ¨¡å—ï¼šä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„ Loader å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†ï¼› å®Œæˆæ¨¡å—ç¼–è¯‘ï¼šåœ¨ç»è¿‡ç¬¬4æ­¥ä½¿ç”¨ Loader ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼› è¾“å‡ºèµ„æºï¼šæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ Chunkï¼Œå†æŠŠæ¯ä¸ª Chunk è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼šï¼› è¾“å‡ºå®Œæˆï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹è¾“å‡ºåˆ°ç›®å½•ã€‚ ç¼–è¯‘å‰å‡†å¤‡æ­¤é˜¶æ®µæ¦‚è¿°ï¼šåœ¨ compiler çš„å„ç§ hook ä¸Šæ³¨å†Œé¡¹ç›®é…ç½®çš„ pluginsã€æ³¨å†Œ webpack é»˜è®¤æ’ä»¶ â¡ï¸ æ³¨å†Œ resolverFactory.hooks ä¸º Factory.createResolver æ–¹æ³•æä¾›å‚æ•°å¯¹è±¡ã€‚ webpack çš„äº‹ä»¶æœºåˆ¶æ˜¯åŸºäº tapable åº“åšçš„äº‹ä»¶æµæ§åˆ¶ï¼Œåœ¨æ•´ä¸ªç¼–è¯‘è¿‡ç¨‹ä¸­æš´éœ²å‡ºå„ç§hookï¼Œè€Œ plugin æ³¨å†Œç›‘å¬äº†æŸä¸ª/æŸäº› hookï¼Œåœ¨è¿™ä¸ª hook è§¦å‘æ—¶ï¼Œä¼šæ‰§è¡Œ plugin é‡Œç»‘å®šçš„æ–¹æ³•ã€‚ 123new NodeEnvironmentPlugin({ infrastructureLogging: options.infrastructureLogging}).apply(compiler); loaderé˜¶æ®µé€’å½’ç¼–è¯‘ç”Ÿæˆ module å®ä¾‹ resolve é˜¶æ®µï¼Œè§£æè¿”å›åŒ…å«å½“å‰æ¨¡å—æ‰€æœ‰ä¿¡æ¯çš„ä¸€ä¸ªå¯¹è±¡ æ­¤é˜¶æ®µæ¦‚è¿°ï¼šåˆ©ç”¨ enhanced-resolve åº“ï¼Œå¾—åˆ° resolve è§£ææ–¹æ³• â¡ï¸ è§£æ inline loader å’Œå®ƒå¯¹åº”èµ„æºçš„ resourceï¼Œè¿˜æœ‰é¡¹ç›®configçš„ loaderï¼Œç„¶åå¯¹æ‰€æœ‰ loader è¿›è¡Œåˆå¹¶ã€æ’åº â¡ï¸ å¾—åˆ° module å¯¹åº”çš„ parser å’Œ generatorï¼Œç”¨äºåé¢çš„ ast è§£æåŠæ¨¡æ¿ç”Ÿæˆ â¡ï¸ è¾“å‡ºä¸€ä¸ªåŒ…å«å½“å‰æ¨¡å—ä¸Šä¸‹æ–‡ã€loadersã€ç»å¯¹è·¯å¾„ã€ä¾èµ–ç­‰ module æ‰€æœ‰ä¿¡æ¯çš„ç»„åˆå¯¹è±¡ï¼Œæä¾›ç»™ afterResolve é’©å­è§¦å‘åçš„å›è°ƒã€‚è¿™ä¸ªå¯¹è±¡ä¸‹ä¸€æ­¥ä¼šè¢«ç”¨æ¥åˆå§‹åŒ–å½“å‰æ–‡ä»¶ çš„ module å®ä¾‹ã€‚ æ¯”å¦‚ 1import Styles from style-loader!css-loader?modules!./styles.css ä¼šè¢«è§£ææˆï¼š 123456789101112{ &quot;resource&quot;: &quot;./styles.css&quot;, &quot;elements&quot;: [ { &quot;loader&quot;: &quot;style-loader&quot; }, { &quot;loader&quot;: &quot;css-loader&quot;, &quot;options&quot;: &quot;modules&quot; } ]} ç„¶åå¹¶è¡Œå¤„ç†å‚æ•°æ•°ç»„å„ä¸ªä»»åŠ¡ï¼Œå®Œæˆä¹‹åéƒ½ä¼šè¿”å›ä¸€ä¸ª results åˆ—è¡¨ï¼Œåˆ—è¡¨é¡ºåºä¸ºå‚æ•°æ•°ç»„é¡ºåºï¼Œä¸æ‰§è¡Œé¡ºåºæ— å…³ã€‚ å¾—åˆ°çš„ resultsï¼š 123456789101112131415161718{ &quot;results&quot;: [ [ { &quot;loader&quot;: &quot;loaderçš„ç»å¯¹è·¯å¾„1&quot;, &quot;options&quot;: &quot;loaderå‚æ•°1&quot; }, { &quot;loader&quot;: &quot;loaderçš„ç»å¯¹è·¯å¾„2&quot;, &quot;options&quot;: &quot;loaderå‚æ•°2&quot; } ], { &quot;resource&quot;: &quot;æ¨¡å—ç»å¯¹è·¯å¾„&quot;, &quot;resourceResolveData&quot;: &quot;æ¨¡å—åŸºæœ¬ä¿¡æ¯ï¼ˆå³enhanced-resolveæ‰§è¡Œç»“æœï¼‰&quot; } ]} è§£æ config module rules é‡Œçš„ loaderï¼Œé€’å½’è¿‡æ»¤åŒ¹é…å‡ºå¯¹åº”çš„ loaderï¼š 1234567{ &quot;result&quot;: [ { &quot;type&quot;: &quot;type&quot;, &quot;value&quot;: &quot;javascript/auto&quot; }, { &quot;type&quot;: &quot;resolve&quot;, &quot;value&quot;: {} }, { &quot;type&quot;: &quot;use&quot;, &quot;value&quot;: { &quot;loader&quot;: &quot;babel-loader&quot; } } ]} å¯¹ loader è¿›è¡Œåˆå¹¶ã€æ’åºï¼š æ¥ç€å¤„ç†inline loaderå¸¦æœ‰å‰ç¼€!,!!,-!å’Œresulté¡¹å¸¦æœ‰enforceå‚æ•°çš„æƒ…å†µï¼Œç”¨æ¥å†³å®šæ€¼ loaderçš„ç¦ç”¨å’Œæ’åºã€‚ å¹¶è¡Œå¤„ç†ä¸Šä¸€æ­¥å¾—åˆ°çš„useLoadersPostã€useLoadersPreã€useLoadersï¼Œæ‹¿åˆ°å¯¹åº”çš„ resolve ç»“æœå³è·¯å¾„ä¿¡æ¯ï¼Œå†åœ¨å›è°ƒé‡Œæ’åºã€åˆå¹¶ï¼Œ å³ loaders é…ç½®é¡ºåºä¸º postLoaderï¼ŒinlineLoaderï¼Œloaderï¼ˆnormalï¼‰ï¼ŒpreLoaderï¼Œæ‰§è¡Œé¡ºåºåˆ™ç›¸åã€‚ æ‰§è¡Œ loader é˜¶æ®µï¼Œåˆå§‹åŒ–æ¨¡å— moduleï¼Œå¹¶ç”¨ loader å€’åºè½¬è¯‘ å¼€å¯æ„å»º module æµç¨‹ã€‚ new NormalModule(result)å¾—åˆ°åˆå§‹åŒ–çš„ module â¡ï¸ åœ¨ build è¿‡ç¨‹ä¸­æ‰§è¡Œ runLoaders å¤„ç†æºç ï¼Œå…ˆæ­£åºè¯»å–æ¯ä¸ª loader å¹¶æ‰§è¡Œå®ƒçš„ pitchï¼Œå†å€’åºæ‰§è¡Œæ¯ä¸ª loader çš„ normalï¼Œæœ€åå¾—åˆ°ä¸€ä¸ªç¼–è¯‘åçš„å­—ç¬¦ä¸²æˆ– Bufferã€‚ runLoaders æ–¹æ³•æ¥è‡ª loader-runnerï¼Œä½œç”¨æ˜¯æŒ‰è§„å®šæµç¨‹æ‰§è¡Œå„ç§ loaderï¼Œå°†æ¨¡å—æºç åå¤„ç†æˆä¸€ä¸ª String æˆ– Buffer æ ¼å¼çš„ JavaScript (å¯èƒ½è¿˜æœ‰ä¸ª SourceMap)ã€‚ parse é˜¶æ®µï¼Œæ”¶é›†ä¾èµ– è°ƒç”¨ parser å°†ä¸Šä¸€æ­¥ runLoaders çš„ç¼–è¯‘ç»“æœåˆ©ç”¨ acorn åº“è½¬æ¢ä¸º astã€‚ç”Ÿæˆçš„ AST åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šImportDeclarationã€FunctionDeclarationå’ŒVariablesDeclarationã€‚â¡ï¸ éå† astï¼Œæ ¹æ®å¯¼å…¥å¯¼å‡ºåŠå¼‚æ­¥çš„æƒ…å†µè§¦å‘ç›¸å…³é’©å­æ’ä»¶æ¥æ”¶é›†ä¾èµ–ï¼Œè¿™äº›ä¾èµ–ç”¨äºè§£æé€’å½’ä¾èµ–å’Œæ¨¡æ¿æ“ä½œ â¡ï¸ æ ¹æ®æ¯ä¸ª module çš„ç›¸å…³ä¿¡æ¯ç”Ÿæˆå„è‡ªå”¯ä¸€çš„ buildHashã€‚ é€’å½’å¤„ç†ä¾èµ–é˜¶æ®µ (é‡å¤ä»¥ä¸Šæ­¥éª¤) æ ¹æ® module é—´çš„ç›¸äº’ä¾èµ–å…³ç³»ï¼Œé€’å½’è§£ææ‰€æœ‰ä¾èµ– moduleã€‚å³ resolve â¡ï¸ æ‰§è¡Œ loader â¡ï¸ parse â¡ï¸ æ”¶é›†å¹¶å¤„ç†è¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ– (ç›´æ¥æˆ–é—´æ¥) çš„æ–‡ä»¶éƒ½ç»è¿‡äº†è¿™äº›æ­¥éª¤çš„å¤„ç†ã€‚æœ€ç»ˆè¿”å›ä¸€ä¸ªå…¥å£ moduleã€‚ loaderè¿‡ç¨‹å½’çº³å°±è¿™æ ·ï¼Œä»å…¥å£moduleå¼€å§‹ï¼Œæ ¹æ®moduleä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œé€’å½’å°†æ‰€æœ‰çš„moduleéƒ½è½¬æ¢ç¼–è¯‘ã€‚ ç›´åˆ°å±‚å±‚ä¾èµ–éƒ½è½¬æ¢å®Œæˆï¼Œæ‰§è¡Œreturn process.nextTick(callback);ï¼Œå°†åœ¨ä¸‹ä¸€æ¬¡äº‹ä»¶å¾ªç¯tickä¹‹å‰è°ƒç”¨ callbackï¼Œ æ­¤æ—¶è¿”å›ä¸€ä¸ªå…¥å£ moduleï¼š 123456789{ &quot;module&quot;: { //... //åŒæ­¥æ¨¡å— &quot;dependencies&quot;: [&quot;HarmonyImportSideEffectDependency&quot;, &quot;HarmonyImportSpecifierDependency&quot;], //å¼‚æ­¥æ¨¡å— &quot;blocks&quot;: [&quot;ImportDependenciesBlock&quot;] }} æ— æŠ›å‡ºé”™è¯¯åˆ™å†è§¦å‘ compilation.hooks:succeedEntryï¼Œåˆ°æ­¤ module ç”Ÿæˆç»“æŸã€‚ pluginsä¸€ä¸ªwebpackçš„æ’ä»¶ç”±ä»¥ä¸‹å‡ æ–¹é¢ç»„æˆï¼š ä¸€ä¸ªéåŒ¿åçš„jså‡½æ•° åœ¨å®ƒçš„åŸå‹å¯¹è±¡ä¸Šå®šä¹‰applyæ–¹æ³• æŒ‡æ˜æŒ‚è½½è‡ªèº«çš„webpacké’©å­äº‹ä»¶ æ“ä½œwebpackå†…éƒ¨æƒ…å†µçš„ç‰¹å®šæ•°æ® æ–¹æ³•å®Œæˆæ—¶å”¤èµ·webpackæä¾›çš„å›è°ƒ æ’ä»¶çš„åŸºæœ¬ç»“æ„ æ’ä»¶æ˜¯åœ¨åŸå‹ä¸­å¸¦æœ‰ä¸€ä¸ªapplyæ–¹æ³•çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œå½“å®‰è£…æ’ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªapplyæ–¹æ³•å°±ä¼šè¢«webpackè°ƒç”¨ä¸€æ¬¡ã€‚applyæ–¹æ³•æä¾›ä¸€ä¸ªæŒ‡å‘å½“å‰æ´»åŠ¨çš„webpack compilerçš„å¼•ç”¨ï¼Œè¯¥å¼•ç”¨å…è®¸è®¿é—®compilerçš„å›è°ƒ ç®€å•çš„Pluginæ¡ˆä¾‹ 1234567891011function HelloWorldPlugin() { //};HelloWorldPlugin.prototype.apply = function(compiler) { compiler.plugin('webpacksEventHook', function(compilation, callback) { console.log('Hello World!') callback(); });}; module.exports = HelloWorldPlugin; 123456789101112131415function HelloCompilationPlugin(options) {}HelloCompilationPlugin.prototype.apply = function(compiler) { // Setup callback for accessing a compilation: compiler.plugin(&quot;compilation&quot;, function(compilation) { // Now setup callbacks for accessing compilation steps: compilation.plugin(&quot;optimize&quot;, function() { console.log(&quot;Assets are being optimized.&quot;); }); });};module.exports = HelloCompilationPlugin; æ’ä»¶çš„ä½¿ç”¨ 12345678const HelloWorldPlugin = require('hello-world');const webpackConfig = { // ... config settings here ... plugins: [ new HelloWorldPlugin({options: true}) ]};","link":"/2017/05/10/%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90webpack/"},{"title":"æ¯”è¾ƒä¸‰ä¸ªCSSé¢„å¤„ç†å™¨ï¼ˆæ¡†æ¶ï¼‰:Sassã€LESSå’ŒStylus","text":"CSS é¢„å¤„ç†å™¨æŠ€æœ¯å·²ç»éå¸¸çš„æˆç†Ÿï¼Œè€Œä¸”ä¹Ÿæ¶Œç°å‡ºäº†è¶Šæ¥è¶Šå¤šçš„ CSS çš„é¢„å¤„ç†å™¨æ¡†æ¶ã€‚æœ¬æ–‡ä»‹ç»çš„æ˜¯ä½¿ç”¨æœ€ä¸ºæ™®éçš„ä¸‰æ¬¾ CSS é¢„å¤„ç†å™¨æ¡†æ¶ï¼Œåˆ†åˆ«æ˜¯ Sassã€Less CSSã€Stylusã€‚æ¥ç®€å•ä»‹ç»ä¸‹ä»€ä¹ˆæ˜¯ CSS é¢„å¤„ç†å™¨ï¼ŒCSS é¢„å¤„ç†å™¨æ˜¯ä¸€ç§è¯­è¨€ç”¨æ¥ä¸º CSS å¢åŠ ä¸€äº›ç¼–ç¨‹çš„çš„ç‰¹æ€§ï¼Œæ— éœ€è€ƒè™‘æµè§ˆå™¨çš„å…¼å®¹æ€§é—®é¢˜ï¼Œä¾‹å¦‚ä½ å¯ä»¥åœ¨ CSS ä¸­ä½¿ç”¨å˜é‡ã€ç®€å•çš„ç¨‹åºé€»è¾‘ã€å‡½æ•°ç­‰ç­‰åœ¨ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€äº›åŸºæœ¬æŠ€å·§ï¼Œå¯ä»¥è®© CSS æ›´è§ç®€æ´ï¼Œé€‚åº”æ€§æ›´å¼ºï¼Œä»£ç æ›´ç›´è§‚ç­‰è¯¸å¤šå¥½å¤„ã€‚æ¥ä¸‹æ¥å°†ä¼šä»è¯­æ³•ã€å˜é‡ã€åµŒå¥—ã€æ··å…¥(Mixin)ã€ç»§æ‰¿ã€å¯¼å…¥ã€å‡½æ•°å’Œæ“ä½œç¬¦ç­‰æ–¹é¢åˆ†åˆ«å¯¹è¿™ä¸‰ä¸ªæ¡†æ¶è¿›è¡Œæ¯”è¾ƒä»‹ç»ã€‚ è¯­æ³•åœ¨ä½¿ç”¨ CSS é¢„å¤„ç†å™¨ä¹‹å‰æœ€é‡è¦çš„æ˜¯ç†è§£è¯­æ³•ï¼Œå¹¸è¿çš„æ˜¯åŸºæœ¬ä¸Šå¤§å¤šæ•°é¢„å¤„ç†å™¨çš„è¯­æ³•è·Ÿ CSS éƒ½å·®ä¸å¤šã€‚é¦–å…ˆ Sass å’Œ Less éƒ½ä½¿ç”¨çš„æ˜¯æ ‡å‡†çš„ CSS è¯­æ³•ï¼Œå› æ­¤å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†å·²æœ‰çš„ CSS ä»£ç è½¬ä¸ºé¢„å¤„ç†å™¨ä»£ç ï¼Œé»˜è®¤ Sass ä½¿ç”¨ .sass æ‰©å±•åï¼Œè€Œ Less ä½¿ç”¨ .less æ‰©å±•åã€‚ ä¸‹é¢æ˜¯è¿™äºŒè€…çš„è¯­æ³•ï¼š 123h1 { color: #0982C1;} è¿™æ˜¯ä¸€ä¸ªå†æ™®é€šä¸è¿‡çš„ï¼Œä¸è¿‡ Sass åŒæ—¶ä¹Ÿæ”¯æŒè€çš„è¯­æ³•ï¼Œå°±æ˜¯ä¸åŒ…å«èŠ±æ‹¬å·å’Œåˆ†å·çš„æ–¹å¼ï¼š 12h1 color: #0982c1 è€Œ Stylus æ”¯æŒçš„è¯­æ³•è¦æ›´å¤šæ ·æ€§ä¸€ç‚¹ï¼Œå®ƒé»˜è®¤ä½¿ç”¨ .styl çš„æ–‡ä»¶æ‰©å±•åï¼Œä¸‹é¢æ˜¯ Stylus æ”¯æŒçš„è¯­æ³•ï¼š 1234567h1 { color: #0982C1;}h1 color: #0982C1;h1 color #0982C1 ä½ ä¹Ÿå¯ä»¥åœ¨åŒä¸€ä¸ªæ ·å¼å•ä¸­ä½¿ç”¨ä¸åŒçš„å˜é‡ï¼Œä¾‹å¦‚ä¸‹é¢çš„å†™æ³•ä¹Ÿä¸ä¼šæŠ¥é”™ï¼š 12345h1 { color #0982c1}h2 font-size: 1.2em å˜é‡ä½ å¯ä»¥åœ¨ CSS é¢„å¤„ç†å™¨ä¸­å£°æ˜å˜é‡ï¼Œå¹¶åœ¨æ•´ä¸ªæ ·å¼å•ä¸­ä½¿ç”¨ï¼Œæ”¯æŒä»»ä½•ç±»å‹çš„å˜é‡ï¼Œä¾‹å¦‚é¢œè‰²ã€æ•°å€¼ï¼ˆä¸ç®¡æ˜¯å¦åŒ…æ‹¬å•ä½ï¼‰ã€æ–‡æœ¬ã€‚ç„¶åä½ å¯ä»¥ä»»æ„å¼•ç”¨è¯¥å˜é‡ã€‚Sass çš„å˜é‡å¿…é¡»æ˜¯ $ å¼€å§‹ï¼Œç„¶åå˜é‡åå’Œå€¼ä½¿ç”¨å†’å·éš”å¼€ï¼Œè·Ÿ CSS çš„å±æ€§ä¸€è‡´ï¼š 12345678$mainColor: #0982c1;$siteWidth: 1024px;$borderStyle: dotted;body { color: $mainColor; border: 1px $borderStyle $mainColor; max-width: $siteWidth;} è€Œ Less çš„å˜é‡åä½¿ç”¨ @ ç¬¦å·å¼€å§‹ï¼š 12345678@mainColor: #0982c1;@siteWidth: 1024px;@borderStyle: dotted;body { color: @mainColor; border: 1px @borderStyle @mainColor; max-width: @siteWidth;} Stylus å¯¹å˜é‡åæ²¡æœ‰ä»»ä½•é™å®šï¼Œä½ å¯ä»¥æ˜¯ $ å¼€å§‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»»æ„çš„å­—ç¬¦ï¼Œè€Œä¸”ä¸å˜é‡å€¼ä¹‹é—´å¯ä»¥ç”¨å†’å·ã€ç©ºæ ¼éš”å¼€ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ Stylus (0.22.4) å°†ä¼šç¼–è¯‘ @ å¼€å§‹çš„å˜é‡ï¼Œä½†å…¶å¯¹åº”çš„å€¼å¹¶ä¸ä¼šèµ‹äºˆè¯¥å˜é‡ï¼Œæ¢å¥è¯è¯´ï¼Œåœ¨ Stylus çš„å˜é‡åä¸è¦ç”¨ @ å¼€å¤´ã€‚ 1234567mainColor = #0982c1siteWidth = 1024px$borderStyle = dottedbody color mainColor border 1px $borderStyle mainColor max-width siteWidth ä¸Šé¢çš„ä¸‰ç§ä¸åŒçš„ CSS é¢„å¤„ç†å™¨çš„å†™æ³•ï¼Œæœ€ç»ˆéƒ½å°†äº§ç”Ÿç›¸åŒçš„ç»“æœï¼š 12345body { color: #0982c1; border: 1px dotted #0982c1; max-width: 1024px;} å¯ä»¥æƒ³è±¡ï¼Œå‡å¦‚ CSS ä¸­ä½¿ç”¨äº†æŸä¸ªé¢œè‰²çš„åœ°æ–¹å¤šè¾¾æ•°åæ¬¡ï¼Œé‚£ä¹ˆè¦ä¿®æ”¹é¢œè‰²æ—¶ä½ å¿…é¡»æ‰¾åˆ°è¿™æ•°åæ¬¡çš„åœ°æ–¹å¹¶ä¸€ä¸€ä¿®æ”¹ï¼Œè€Œæœ‰äº† CSS é¢„å¤„ç†å™¨ï¼Œä¿®æ”¹ä¸€ä¸ªåœ°æ–¹å°±å¤Ÿäº†ï¼ åµŒå¥—å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨CSSä¸­ç›¸åŒçš„ parent å¼•ç”¨å¤šä¸ªå…ƒç´ ï¼Œè¿™å°†æ˜¯éå¸¸ä¹å‘³çš„ï¼Œä½ éœ€è¦ä¸€éåˆä¸€éåœ°å†™ parentã€‚ä¾‹å¦‚ï¼š 123456789101112section { margin: 10px;}section nav { height: 25px;}section nav a { color: #0982C1;}section nav a:hover { text-decoration: underline;} è€Œå¦‚æœç”¨ CSS é¢„å¤„ç†å™¨ï¼Œå°±å¯ä»¥å°‘äº›å¾ˆå¤šä»£ç ï¼Œè€Œä¸”çˆ¶å­èŠ‚ç‚¹å…³ç³»ä¸€ç›®äº†ç„¶ã€‚è¿™é‡Œæåˆ°çš„ä¸‰ä¸ª CSS æ¡†æ¶éƒ½æ˜¯å…è®¸åµŒå¥—è¯­æ³•ï¼š 123456789101112section { margin: 10px; nav { height: 25px; a { color: #0982C1; &amp;amp;:hover { text-decoration: underline; } } }} æœ€ç»ˆç”Ÿæˆçš„ CSS ç»“æœæ˜¯ï¼š 123456789101112section { margin: 10px;}section nav { height: 25px;}section nav a { color: #0982C1;}section nav a:hover { text-decoration: underline;} éå¸¸ä¹‹æ–¹ä¾¿ï¼ Mixins (æ··å…¥)Mixins æœ‰ç‚¹åƒæ˜¯å‡½æ•°æˆ–è€…æ˜¯å®ï¼Œå½“ä½ æŸæ®µ CSS ç»å¸¸éœ€è¦åœ¨å¤šä¸ªå…ƒç´ ä¸­ä½¿ç”¨æ—¶ï¼Œä½ å¯ä»¥ä¸ºè¿™äº›å…±ç”¨çš„ CSS å®šä¹‰ä¸€ä¸ª Mixinï¼Œç„¶åä½ åªéœ€è¦åœ¨éœ€è¦å¼•ç”¨è¿™äº› CSS åœ°æ–¹è°ƒç”¨è¯¥ Mixin å³å¯ã€‚Sass çš„æ··å…¥è¯­æ³•ï¼š 123456789101112131415@mixin error($borderWidth: 2px) { border: $borderWidth solid #F00; color: #F00;}.generic-error { padding: 20px; margin: 4px; @ include error();}.login-error { left: 12px; position: absolute; top: 20px; @ include error(5px);} Less CSS çš„æ··å…¥è¯­æ³•ï¼š 123456789101112131415.error(@borderWidth: 2px) { border: @borderWidth solid #F00; color: #F00;}.generic-error { padding: 20px; margin: 4px; .error();}.login-error { left: 12px; position: absolute; top: 20px; .error(5px);} Stylus çš„æ··å…¥è¯­æ³•ï¼š 123456789101112131415error(borderWidth= 2px) { border: borderWidth solid #F00; color: #F00;}.generic-error { padding: 20px; margin: 4px; error();}.login-error { left: 12px; position: absolute; top: 20px; error(5px);} æœ€ç»ˆå®ƒä»¬éƒ½å°†ç¼–è¯‘æˆå¦‚ä¸‹çš„ CSS æ ·å¼ï¼š 12345678910111213.generic-error { padding: 20px; margin: 4px; border: 2px solid #f00; color: #f00;}.login-error { left: 12px; position: absolute; top: 20px; border: 5px solid #f00; color: #f00;} ç»§æ‰¿å½“æˆ‘ä»¬éœ€è¦ä¸ºå¤šä¸ªå…ƒç´ å®šä¹‰ç›¸åŒæ ·å¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ç»§æ‰¿çš„åšæ³•ã€‚ä¾‹å¦‚æˆ‘ä»¬ç»å¸¸éœ€è¦ï¼š 123456p,ul,ol { margin: 10px 5px; padding: 2px;} åœ¨ Sass å’Œ Stylus æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š 12345678910111213.block { margin: 10px 5px; padding: 2px;}p { @extend .block; border: 1px solid #EEE;}ul, ol { @extend .block; color: #333; text-transform: uppercase;} åœ¨è¿™é‡Œé¦–å…ˆå®šä¹‰ .block å—ï¼Œç„¶åè®© p ã€ul å’Œ ol å…ƒç´ ç»§æ‰¿ .block ï¼Œæœ€ç»ˆç”Ÿæˆçš„ CSS å¦‚ä¸‹ï¼š 1234567891011.block, p, ul, ol { margin: 10px 5px; padding: 2px;}p { border: 1px solid #EEE;}ul, ol { color: #333; text-transform: uppercase;} åœ¨è¿™æ–¹é¢ Less è¡¨ç°çš„ç¨å¾®å¼±ä¸€äº›ï¼Œæ›´åƒæ˜¯æ··å…¥å†™æ³•ï¼š 12345678910111213.block { margin: 10px 5px; padding: 2px;}p { .block; border: 1px solid #EEE;}ul, ol { .block; color: #333; text-transform: uppercase;} ç”Ÿæˆçš„ CSS å¦‚ä¸‹ï¼š 12345678910111213141516.block { margin: 10px 5px; padding: 2px;}p { margin: 10px 5px; padding: 2px; border: 1px solid #EEE;}ul,ol { margin: 10px 5px; padding: 2px; color: #333; text-transform: uppercase;} ä½ æ‰€çœ‹åˆ°çš„ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ.block çš„æ ·å¼å°†ä¼šè¢«æ’å…¥åˆ°ç›¸åº”çš„ä½ æƒ³è¦ç»§æ‰¿çš„é€‰æ‹©å™¨ä¸­ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ä¼˜å…ˆçº§çš„é—®é¢˜ã€‚ å¯¼å…¥ (Import)å¾ˆå¤š CSS å¼€å‘è€…å¯¹å¯¼å…¥çš„åšæ³•éƒ½ä¸å¤ªæ„Ÿå†’ï¼Œå› ä¸ºå®ƒéœ€è¦å¤šæ¬¡çš„ HTTP è¯·æ±‚ã€‚ä½†æ˜¯åœ¨ CSS é¢„å¤„ç†å™¨ä¸­çš„å¯¼å…¥æ“ä½œåˆ™ä¸åŒï¼Œå®ƒåªæ˜¯åœ¨è¯­ä¹‰ä¸ŠåŒ…å«äº†ä¸åŒçš„æ–‡ä»¶ï¼Œä½†æœ€ç»ˆç»“æœæ˜¯ä¸€ä¸ªå•ä¸€çš„ CSS æ–‡ä»¶ï¼Œå¦‚æœä½ æ˜¯é€šè¿‡ @ import â€œfile.cssâ€; å¯¼å…¥ CSS æ–‡ä»¶ï¼Œé‚£æ•ˆæœè·Ÿæ™®é€šçš„ CSS å¯¼å…¥ä¸€æ ·ã€‚æ³¨æ„ï¼šå¯¼å…¥æ–‡ä»¶ä¸­å®šä¹‰çš„æ··å…¥ã€å˜é‡ç­‰ä¿¡æ¯ä¹Ÿå°†ä¼šè¢«å¼•å…¥åˆ°ä¸»æ ·å¼æ–‡ä»¶ä¸­ï¼Œå› æ­¤éœ€è¦é¿å…å®ƒä»¬äº’ç›¸å†²çªã€‚ 12345678910reset.css:body { background: #EEE;}main.xxx:@import &quot;reset.css&quot;;@import &quot;file.{type}&quot;;p { background: #0982C1;} æœ€ç»ˆç”Ÿæˆçš„ CSSï¼š 1234567@import &quot;reset.css&quot;;body { background: #EEE;}p { background: #0982C1;} é¢œè‰²å‡½æ•°CSS é¢„å¤„ç†å™¨ä¸€èˆ¬éƒ½ä¼šå†…ç½®ä¸€äº›é¢œè‰²å¤„ç†å‡½æ•°ç”¨æ¥å¯¹é¢œè‰²å€¼è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚åŠ äº®ã€å˜æš—ã€é¢œè‰²æ¢¯åº¦ç­‰ã€‚Sassï¼š 12345678lighten($color, 10%);darken($color, 10%);saturate($color, 10%);desaturate($color, 10%);grayscale($color);complement($color);invert($color);mix($color1, $color2, 50%); ä¸Šé¢åªæ˜¯ç®€å•åˆ—äº† Sass çš„ä¸€äº›åŸºæœ¬é¢œè‰²å¤„ç†å‡½æ•°ï¼Œå®Œæ•´çš„åˆ—è¡¨è¯·çœ‹ Sass Documentation.ä¸‹é¢æ˜¯ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼š 12345$color: #0982C1;h1 { background: $color; border: 3px solid darken($color, 50%);} Less: 1234567lighten(@color, 10%);darken(@color, 10%);saturate(@color, 10%);desaturate(@color, 10%);spin(@color, 10);spin(@color, -10);mix(@color1, @color2); LESS å®Œæ•´çš„é¢œè‰²å‡½æ•°åˆ—è¡¨è¯·çœ‹ LESS Documentation.LESS ä½¿ç”¨é¢œè‰²å‡½æ•°çš„ä¾‹å­ï¼š 12345@color: #0982C1;h1 { background: @color; border: 3px solid darken(@color, 50%);} Stylus: 1234lighten(color, 10%);darken(color, 10%);saturate(color, 10%);desaturate(color, 10%); å®Œæ•´çš„é¢œè‰²å‡½æ•°åˆ—è¡¨è¯·é˜…è¯» Stylus Documentation.å®ä¾‹ï¼š 1234color = #0982C1h1 background color border 3px solid darken(color, 50%) è¿ç®—ç¬¦ä½ å¯ä»¥ç›´æ¥åœ¨ CSS é¢„å¤„ç†å™¨ä¸­è¿›è¡Œæ ·å¼çš„è®¡ç®—ï¼Œä¾‹å¦‚ï¼š 123456body { margin: (14px/2); top: 50px + 100px; right: 100px - 50px; left: 10 * 10;} ä¸€äº›è·Ÿå…·ä½“æµè§ˆå™¨ç›¸å…³çš„å¤„ç†è¿™æ˜¯å®£ä¼ ä½¿ç”¨é¢„å¤„ç†çš„åŸå› ä¹‹ä¸€ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç†ç”±ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœçš„å¤§é‡çš„æ—¶é—´å’Œæ±—æ°´ã€‚åˆ›å»ºä¸€ä¸ªmixinæ¥å¤„ç†ä¸åŒæµè§ˆå™¨çš„CSSå†™æ³•æ˜¯å¾ˆç®€å•çš„ï¼ŒèŠ‚çœäº†å¤§é‡çš„é‡å¤å·¥ä½œå’Œç—›è‹¦çš„ä»£ç ç¼–è¾‘ã€‚Sass 12345678@mixin border-radius($values) { -webkit-border-radius: $values; -moz-border-radius: $values; border-radius: $values;}div { @ include border-radius(10px);} Less 12345678.border-radius(@values) { -webkit-border-radius: @values; -moz-border-radius: @values; border-radius: @values;}div { .border-radius(10px);} Stylus 12345678border-radius(values) { -webkit-border-radius: values; -moz-border-radius: values; border-radius: values;}div { border-radius(10px);} ç¼–è¯‘ç»“æœï¼š 12345div { -webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px;} 3Dæ–‡æœ¬è¦ç”Ÿæˆå…·æœ‰ 3D æ•ˆæœçš„æ–‡æœ¬å¯ä»¥ä½¿ç”¨ text-shadows ï¼Œå”¯ä¸€çš„é—®é¢˜å°±æ˜¯å½“è¦ä¿®æ”¹é¢œè‰²çš„æ—¶å€™å°±éå¸¸çš„éº»çƒ¦ï¼Œè€Œé€šè¿‡ mixin å’Œé¢œè‰²å‡½æ•°å¯ä»¥å¾ˆè½»æ¾çš„å®ç°ï¼šSass 123456789101112@mixin text3d($color) { color: $color; text-shadow: 1px 1px 0px darken($color, 5%), 2px 2px 0px darken($color, 10%), 3px 3px 0px darken($color, 15%), 4px 4px 0px darken($color, 20%), 4px 4px 2px #000;}h1 { font-size: 32pt; @ include text3d(#0982c1);} Less 123456789101112.text3d(@color) { color: @color; text-shadow: 1px 1px 0px darken(@color, 5%), 2px 2px 0px darken(@color, 10%), 3px 3px 0px darken(@color, 15%), 4px 4px 0px darken(@color, 20%), 4px 4px 2px #000;}span { font-size: 32pt; .text3d(#0982c1);} Stylus 123456text3d(color) color: color text-shadow: 1px 1px 0px darken(color, 5%), 2px 2px 0px darken(color, 10%), 3px 3px 0px darken(color, 15%), 4px 4px 0px darken(color, 20%), 4px 4px 2px #000span font-size: 32pt text3d(#0982c1) ç”Ÿæˆçš„ CSS 123456789span { font-size: 32pt; color: #0982c1; text-shadow: 1px 1px 0px #097bb7, 2px 2px 0px #0875ae, 3px 3px 0px #086fa4, 4px 4px 0px #07689a, 4px 4px 2px #000;} åˆ— (Columns)ä½¿ç”¨æ•°å€¼æ“ä½œå’Œå˜é‡å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°é€‚åº”å±å¹•å¤§å°çš„å¸ƒå±€å¤„ç†ã€‚Sass 12345678910111213141516$siteWidth: 1024px;$gutterWidth: 20px;$sidebarWidth: 300px;body { margin: 0 auto; width: $siteWidth;}.content { float: left; width: $siteWidth - ($sidebarWidth+$gutterWidth);}.sidebar { float: left; margin-left: $gutterWidth; width: $sidebarWidth;} Less 12345678910111213141516@siteWidth: 1024px;@gutterWidth: 20px;@sidebarWidth: 300px;body { margin: 0 auto; width: @siteWidth;}.content { float: left; width: @siteWidth - (@sidebarWidth+@gutterWidth);}.sidebar { float: left; margin-left: @gutterWidth; width: @sidebarWidth;} Stylus 12345678910111213141516siteWidth = 1024px;gutterWidth = 20px;sidebarWidth = 300px;body { margin: 0 auto; width: siteWidth;}.content { float: left; width: siteWidth - (sidebarWidth+gutterWidth);}.sidebar { float: left; margin-left: gutterWidth; width: sidebarWidth;} å®é™…æ•ˆæœ 12345678910111213body { margin: 0 auto; width: 1024px;}.content { float: left; width: 704px;}.sidebar { float: left; margin-left: 20px; width: 300px;} é”™è¯¯æŠ¥å‘Šå¦‚æœä½ ç»å¸¸ CSS ä½ ä¼šå‘ç°å¾ˆéš¾æ‰¾åˆ° CSS ä¸­é”™è¯¯çš„åœ°æ–¹ï¼Œè¿™ä¹Ÿæ˜¯é¢„å¤„ç†æ¡†æ¶çš„å¥½å¤„ï¼Œå®ƒä¼šæŠ¥å‘Šé”™è¯¯ï¼Œä½ å¯ä»¥ä»è¿™ç¯‡æ–‡ç« ä¸­å­¦ä¹ å¦‚ä½•è®© CSS æ¡†æ¶é”™è¯¯æŠ¥å‘Šã€‚ æ³¨é‡Šä»¥ä¸Šä¸‰ç§æ¡†æ¶éƒ½æ”¯æŒå½¢å¦‚ çš„å¤šè¡Œæ³¨é‡Šä»¥åŠ // çš„å•è¡Œæ³¨é‡Šã€‚","link":"/2017/03/24/%E6%AF%94%E8%BE%83%E4%B8%89%E4%B8%AACSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%88%E6%A1%86%E6%9E%B6%EF%BC%89-Sass%E3%80%81LESS%E5%92%8CStylus/"},{"title":"ç†è§£jsä¸­çš„new","text":"æ–°ç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡ é“¾æ¥åˆ°åŸå‹ ç»‘å®š this è¿”å›æ–°å¯¹è±¡ åœ¨è°ƒç”¨ new çš„è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿä»¥ä¸Šå››ä»¶äº‹æƒ…ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¯•ç€æ¥è‡ªå·±å®ç°ä¸€ä¸ª new 12345678910111213function create() { // åˆ›å»ºä¸€ä¸ªç©ºçš„å¯¹è±¡ let obj = new Object() // è·å¾—æ„é€ å‡½æ•° let Con = [].shift.call(arguments) // é“¾æ¥åˆ°åŸå‹ obj.__proto__ = Con.prototype // ç»‘å®š thisï¼Œæ‰§è¡Œæ„é€ å‡½æ•° let result = Con.apply(obj, arguments) // ç¡®ä¿ new å‡ºæ¥çš„æ˜¯ä¸ªå¯¹è±¡ return typeof result === 'object' ? result : obj} å¯¹äºå®ä¾‹å¯¹è±¡æ¥è¯´ï¼Œéƒ½æ˜¯é€šè¿‡ new äº§ç”Ÿçš„ï¼Œæ— è®ºæ˜¯ function Foo() è¿˜æ˜¯ let a = { b : 1 } ã€‚ å¯¹äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡æ¥è¯´ï¼Œæ›´æ¨èä½¿ç”¨å­—é¢é‡çš„æ–¹å¼åˆ›å»ºå¯¹è±¡ï¼ˆæ— è®ºæ€§èƒ½ä¸Šè¿˜æ˜¯å¯è¯»æ€§ï¼‰ã€‚å› ä¸ºä½ ä½¿ç”¨ new Object() çš„æ–¹å¼åˆ›å»ºå¯¹è±¡éœ€è¦é€šè¿‡ä½œç”¨åŸŸé“¾ä¸€å±‚å±‚æ‰¾åˆ° Objectï¼Œä½†æ˜¯ä½ ä½¿ç”¨å­—é¢é‡çš„æ–¹å¼å°±æ²¡è¿™ä¸ªé—®é¢˜ã€‚ 12345function Foo() {}// function å°±æ˜¯ä¸ªè¯­æ³•ç³–// å†…éƒ¨ç­‰åŒäº new Function()let a = { b: 1 }// è¿™ä¸ªå­—é¢é‡å†…éƒ¨ä¹Ÿæ˜¯ä½¿ç”¨äº† new Object() å¯¹äº new æ¥è¯´ï¼Œè¿˜éœ€è¦æ³¨æ„ä¸‹è¿ç®—ç¬¦ä¼˜å…ˆçº§ã€‚ 12345678910111213function Foo() { return this;}Foo.getName = function () { console.log('1');};Foo.prototype.getName = function () { console.log('2');};new Foo.getName(); // -&gt; 1new Foo().getName(); // -&gt; 2 ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œnew Foo() çš„ä¼˜å…ˆçº§å¤§äº new Foo ï¼Œæ‰€ä»¥å¯¹äºä¸Šè¿°ä»£ç æ¥è¯´å¯ä»¥è¿™æ ·åˆ’åˆ†æ‰§è¡Œé¡ºåº 12new (Foo.getName());(new Foo()).getName(); å¯¹äºç¬¬ä¸€ä¸ªå‡½æ•°æ¥è¯´ï¼Œå…ˆæ‰§è¡Œäº† Foo.getName() ï¼Œæ‰€ä»¥ç»“æœä¸º 1ï¼›å¯¹äºåè€…æ¥è¯´ï¼Œå…ˆæ‰§è¡Œ new Foo() äº§ç”Ÿäº†ä¸€ä¸ªå®ä¾‹ï¼Œç„¶åé€šè¿‡åŸå‹é“¾æ‰¾åˆ°äº† Foo ä¸Šçš„ getName å‡½æ•°ï¼Œæ‰€ä»¥ç»“æœä¸º 2ã€‚","link":"/2021/10/23/%E7%90%86%E8%A7%A3js%E4%B8%AD%E7%9A%84new/"}],"tags":[{"name":"html","slug":"html","link":"/tags/html/"},{"name":"git","slug":"git","link":"/tags/git/"},{"name":"javascript","slug":"javascript","link":"/tags/javascript/"},{"name":"Vue","slug":"Vue","link":"/tags/Vue/"},{"name":"css","slug":"css","link":"/tags/css/"},{"name":"node","slug":"node","link":"/tags/node/"},{"name":"react","slug":"react","link":"/tags/react/"},{"name":"vue","slug":"vue","link":"/tags/vue/"},{"name":"http","slug":"http","link":"/tags/http/"},{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","link":"/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"}],"categories":[]}